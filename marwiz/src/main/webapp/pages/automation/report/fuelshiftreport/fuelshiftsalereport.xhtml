<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <ui:include src="/pages/general/common/datagridtoolbarreport.xhtml" >
        <ui:param name="bean" value="#{fuelShiftSaleReportBean}"/> 
        <ui:param name="datatable" value="frmFuelShiftSaleReport:dtbFuelShiftSaleReport" />
        <ui:param name="fileName" value="#{loc.fuelshiftreport} "/>
        <ui:param name="outputText" value="#{loc.shift}-#{fuelShiftSaleReportBean.fuelShift.shiftNo}"/>
        <ui:param name="renderedOutputText" value='true'/>
        <ui:param name="renderedToggler" value='true'/>
        <ui:param name="renderedExcel" value='true'/>
        <ui:param name="renderedPdf" value='true'/>
        <ui:param name="renderedPrint" value='true'/>
        <ui:param name="renderedGraphic" value='false'/>
        <ui:param name="renderedBack" value='true' />
    </ui:include>

    <h:form id="frmFuelShiftSaleReport">

        <p:dataTable  id="dtbFuelShiftSaleReport" var="shiftsales"  value="#{fuelShiftSaleReportBean.listOfObjects}" emptyMessage="#{loc.norecordsfound}"
                      rows="#{sessionBean.user.defualtGridSize}" rowKey="#{shiftsales.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                      rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="false" lazy="true"
                      >


            <p:ajax event="colReorder" listener="#{fuelShiftSaleReportBean.reorder}" update="frmGridToolbar:toggle" />     
            <p:ajax event="colResize"  listener="#{fuelShiftSaleReportBean.onResize}" />

            <p:column id="clmDate" headerText="#{loc.date}"  visible="#{fuelShiftSaleReportBean.toogleList[0]}"   exportable="#{fuelShiftSaleReportBean.toogleList[0]}">
                <h:outputText value="#{shiftsales.processDate}"  >
                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                </h:outputText>
            </p:column>

            <p:column id="clmPumpNo" headerText="#{loc.pumpno}"   visible="#{fuelShiftSaleReportBean.toogleList[1]}" exportable="#{fuelShiftSaleReportBean.toogleList[1]}">
                <h:outputText value="#{shiftsales.pumpno}" style="text-align: center !important; " /> 
            </p:column> 

            <p:column id="clmNozzleNo" headerText="#{loc.uscnozzleno}"   visible="#{fuelShiftSaleReportBean.toogleList[2]}" exportable="#{fuelShiftSaleReportBean.toogleList[2]}">
                <h:outputText value="#{shiftsales.nozzleNo}" style="text-align: center !important; " /> 
            </p:column>

            <p:column id="clmAccountingIntegrationCode" headerText="#{loc.customercode}"   visible="#{fuelShiftSaleReportBean.toogleList[3]}" exportable="#{fuelShiftSaleReportBean.toogleList[3]}">
                <h:outputText value="#{shiftsales.accountCode}" style="text-align: center !important; " /> 
            </p:column>

            <p:column id="clmStockName" headerText="#{loc.stockname}"   visible="#{fuelShiftSaleReportBean.toogleList[4]}" exportable="#{fuelShiftSaleReportBean.toogleList[4]}">
                <h:outputText value="#{shiftsales.stockName}" style="text-align: center !important; " /> 
            </p:column> 

            <p:column id="clmFuelIntegrationCode" headerText="#{loc.stockcode}"   visible="#{fuelShiftSaleReportBean.toogleList[5]}" exportable="#{fuelShiftSaleReportBean.toogleList[5]}">
                <h:outputText value="#{shiftsales.stockCode}" style="text-align: center !important; " /> 
            </p:column>

            <p:column id="clmPlate" headerText="#{loc.plate}"   visible="#{fuelShiftSaleReportBean.toogleList[6]}" exportable="#{fuelShiftSaleReportBean.toogleList[6]}">
                <h:outputText value="#{shiftsales.plate}" style="text-align: center !important; " /> 
            </p:column> 

            <p:column id="clmAttendant" headerText="#{loc.pumpper}"   visible="#{fuelShiftSaleReportBean.toogleList[7]}" exportable="#{fuelShiftSaleReportBean.toogleList[7]}">
                <h:outputText value="#{shiftsales.attendant}" style="text-align: center !important; " /> 
            </p:column> 

            <p:column id="clmIntegrationCode" headerText="#{loc.attendantcode}"   visible="#{fuelShiftSaleReportBean.toogleList[8]}" exportable="#{fuelShiftSaleReportBean.toogleList[8]}">
                <h:outputText value="#{shiftsales.attendantCode}" style="text-align: center !important; " /> 
            </p:column>

            <p:column id="clmSaleType" headerText="#{loc.salestype}"   visible="#{fuelShiftSaleReportBean.toogleList[9]}" exportable="#{fuelShiftSaleReportBean.toogleList[9]}">
                <h:outputText value="#{shiftsales.fuelSaleType.name}" style="text-align: center !important; " /> 
            </p:column>

            <p:column id="clmPaymentType" headerText="#{loc.paymenttype}"   visible="#{fuelShiftSaleReportBean.toogleList[10]}" exportable="#{fuelShiftSaleReportBean.toogleList[10]}">
                <h:outputText value="#{shiftsales.paymentType}" style="text-align: center !important; " /> 
            </p:column>

            <p:column id="clmPrice" headerText="#{loc.price}"   visible="#{fuelShiftSaleReportBean.toogleList[11]}" exportable="#{fuelShiftSaleReportBean.toogleList[11]}">
                <h:outputText value="#{shiftsales.price}" style="text-align: center !important; float: right; " >
                    <f:converter converterId="currencyConverter" />
                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText> 
            </p:column> 

            <p:column id="clmDiscountTotal" headerText="#{loc.discountamount}"   visible="#{fuelShiftSaleReportBean.toogleList[12]}" exportable="#{fuelShiftSaleReportBean.toogleList[12]}">
                <h:outputText value="#{shiftsales.discountTotal}" style="text-align: center !important; float: right; " >
                    <f:converter converterId="currencyConverter" />
                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText> 
            </p:column> 

            <p:column id="clmTotalMoney" headerText="#{loc.salesprice}"   visible="#{fuelShiftSaleReportBean.toogleList[13]}" exportable="#{fuelShiftSaleReportBean.toogleList[13]}">
                <h:outputText value="#{shiftsales.totalMoney}" style="text-align: center !important; float: right;" >
                    <f:converter converterId="currencyConverter" />
                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText> 
            </p:column> 

            <p:column id="clmLiter" headerText="#{loc.salesamount}"   visible="#{fuelShiftSaleReportBean.toogleList[14]}" exportable="#{fuelShiftSaleReportBean.toogleList[14]}">
                <h:outputText value="#{shiftsales.liter}" style="text-align: center !important; float: right; " >
                    <f:converter converterId="currencyConverter" />
                    <f:attribute name="unit" value="#{shiftsales.unit}"/>
                    <f:attribute name="type" value="unit" />
                </h:outputText> 
            </p:column> 


            <p:columnGroup type="footer" class="Fright">     
                <p:row>
                    <p:column colspan="#{fuelShiftSaleReportBean.toogleList.size()-2-fuelShiftSaleReportBean.countToggle}" style="text-align:right;">
                        <f:facet name="footer"  >
                            <h:outputText value="#{loc.sum}:" class="FontBold" style="font-size: 15px; color: #565656;" />
                        </f:facet>
                    </p:column>
                    <p:column colspan="1">
                        <f:facet name="footer"  >
                            <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftSaleReportBean.totalMoney}" >
                                <f:converter converterId="currencyConverter"  />
                                <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                <f:attribute name="type" value="currency" />
                            </h:outputText>
                        </f:facet>
                    </p:column>              
                    <p:column colspan="1">
                        <f:facet name="footer"  >
                            <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftSaleReportBean.calculateAccordingUnit()}" />
                        </f:facet>
                    </p:column>
                </p:row>
            </p:columnGroup>

        </p:dataTable>  
    </h:form>


    <!--    <p:dialog id="dlgFuelShiftGraphic" widgetVar="dlg_FuelShiftGraphic" resizable="false" width="60%" focus="dlgFuelShiftGraphic" modal="true" responsive="true" dynamic="true" closeOnEscape="true" class="dialogScroll">
            <ui:include src="shiftgraphicprocess.xhtml"/>
        </p:dialog>-->

    <!--Print butonuna basınca çalışan kısım-->
    <p:panel id="printerContainer" style="display: none"  >
        <p:panelGrid id="printerPanel" >

        </p:panelGrid>
    </p:panel> 

    <script type="text/javascript">
        function print_page() {
            var divContents = $("#printerPanel").html();
            var printWindow = window.open('', '', 'height=400,width=800');
            printWindow.document.write('<div style="text-align:center; font-weight:bold; font-family:sans-serif;">#{loc.fuelshiftreport}</div>');
            printWindow.document.write('<div style="text-align:left; font-weight:bold; font-family:sans-serif;">#{loc.shiftno} : #{fuelShiftSaleReportBean.fuelShift.shiftNo}</div>');
            printWindow.document.write('<div id="printerDiv">');
            printWindow.document.write(divContents);
            printWindow.document.write('</div>');
            printWindow.document.close();
            printWindow.print();

        }
    </script>

</ui:composition>



