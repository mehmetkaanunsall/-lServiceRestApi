<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">



    <h:form id="frmShiftReportPrintDetail">


        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="bean" value="#{fuelShiftReportPrintDetailBean}"/> 
            <ui:param name="outputtext" value="#{loc.printdetailedfuelshiftreport}"/>
            <ui:param name="renderback" value="true"/>
            <ui:param name="renderedOutputText" value='true'/>
            <ui:param name="renderedPrint" value='true' />
            <ui:param name="btnPrinterId" value='true' />
            <ui:param name="target" value='frmShiftReportPrintDetail' />
        </ui:include>

        <h:panelGroup id="pgrShiftPrintDetail" layout="block" transient="true">  
            <div class="ui-g divContent">
                <div class="ui-g panelToggle">

                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText   value="#{loc.shiftno} : " />
                        <h:outputText style="text-align: left !important;" value="#{fuelShiftReportPrintDetailBean.selectedFuelShift.shiftNo}"/>
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText   value="#{loc.startdate} : " />
                        <h:outputText   value="#{fuelShiftReportPrintDetailBean.selectedFuelShift.beginDate}">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>

                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText value="#{loc.enddate} : " />
                        <h:outputText   value="#{fuelShiftReportPrintDetailBean.selectedFuelShift.endDate}">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText value="#{loc.salecount} : " />
                        <h:outputText   value="#{fuelShiftReportPrintDetailBean.saleCount}"/>
                    </div>

                </div>
            </div>
        </h:panelGroup>

        <div class="EmptyBox20" />

        <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding-right: 0px; padding-left: 0px">
            <!-- sale type-->
            <p:dataTable  id="dtbSalesType" reflow="false" var="salesType" value="#{fuelShiftReportPrintDetailBean.listOfSaleTypes}" class="rowGroupTable"
                          widgetVar="salesTypePF" emptyMessage="#{loc.norecordsfound}" expandableRowGroups="true" sortBy="#{salesType.fuelSaleType.id}" 
                          >

                <f:facet name="header" >
                    <h:outputText  style="padding-left:50%;" value="#{loc.salestype}"/>
                </f:facet>

                <p:headerRow>
                    <p:column colspan="3">
                        <h:outputText value="#{salesType.fuelSaleType.name} (#{fuelShiftReportPrintDetailBean.calculateSalesCount(0,salesType.fuelSaleType.typeno)}) /  #{loc.sum}: "/>
                        <h:outputText value="#{fuelShiftReportPrintDetailBean.calculateTotalStockForUnit(salesType.fuelSaleType.id,'', 3)}" />
                        <h:outputText value=" / #{loc.sum}:" />
                        <h:outputText value="#{fuelShiftReportPrintDetailBean.calculateTotalStockForUnit(salesType.fuelSaleType.id,'', 1)}" />
                    </p:column>
                </p:headerRow> 

                <p:column id="clmUserSalesType" headerText="#{loc.pumpper}" >
                    <h:outputText value="#{salesType.attendant!=null ? !salesType.attendant.trim().equals('') ? salesType.attendant : fuelShiftReportPrintDetailBean.branchSetting.automationId == 5 ? fuelShiftReportPrintDetailBean.fuelSaleTypeName : loc.attendantnotexist : ''}
                                  (#{salesType.saleCount})"/>
                </p:column>

                <p:column id="clmTotalMoneySaleType" headerText="#{loc.overalltotal} (#{sessionBean.currencySignOrCode(sessionBean.user.lastBranch.currency.id,0)})" >
                    <h:outputText value="#{salesType.totalMoney}" style="float: right;" >
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>

                <p:column id="clmTotalLiterSaleType" headerText="#{loc.overalltotal}" >
                    <h:outputText value="#{salesType.liter}" style="float: right;" >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="unit" value="#{salesType.unit}"/>
                        <f:attribute name="type" value="unit" />
                    </h:outputText>
                </p:column>


                <p:columnGroup type="footer" class="Fright">
                    <p:row>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText value="#{loc.sum} " style="text-align:right; font-weight: bold; " />
                            </f:facet>
                        </p:column>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText  style="text-align:right; font-weight: bold; " value="#{fuelShiftReportPrintDetailBean.calculateTotalMoney()}" >
                                    <f:converter converterId="currencyConverter"  />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>
                            </f:facet>
                        </p:column>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText  style="text-align:right; font-weight: bold; " value="#{fuelShiftReportPrintDetailBean.calculateAccordingUnit()}"/>
                            </f:facet>
                        </p:column>
                    </p:row>
                </p:columnGroup>
            </p:dataTable> 
        </div>

        <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding-right: 0px; padding-left: 0px">
            <!-- attendants-->
            <p:dataTable  id="dtbAttendants" reflow="false" var="salesType" value="#{fuelShiftReportPrintDetailBean.listOfSaleTypes}" class="rowGroupTable"
                          widgetVar="attendantPF" emptyMessage="#{loc.norecordsfound}" expandableRowGroups="true" sortBy="#{salesType.attendantCode}" 
                          >

                <f:facet name="header" >
                    <h:outputText  style="padding-left:50%;" value="#{loc.pumpper}"/>
                </f:facet>

                <p:headerRow>
                    <p:column colspan="3">
                        <h:outputText value="#{salesType.attendant!=null ? !salesType.attendant.trim().equals('') ? salesType.attendant : fuelShiftReportPrintDetailBean.branchSetting.automationId == 5 ? fuelShiftReportPrintDetailBean.fuelSaleTypeName : loc.attendantnotexist : ''} (#{fuelShiftReportPrintDetailBean.calculateSalesCount(1,salesType.attendant)}) /  #{loc.sum}: "/>
                        <h:outputText value="#{fuelShiftReportPrintDetailBean.calculateTotalStockForUnit(0, salesType.attendantCode, 4)}"/>
                        <h:outputText value=" / #{loc.sum}:" />
                        <h:outputText value="#{fuelShiftReportPrintDetailBean.calculateTotalStockForUnit(0, salesType.attendantCode, 2)}" />
                    </p:column>
                </p:headerRow> 

                <p:column id="clmUserSalesType" headerText="#{loc.salestype}" >
                    <h:outputText value="#{salesType.fuelSaleType.name} (#{salesType.saleCount})"/>
                </p:column>

                <p:column id="clmTotalMoneySaleType" headerText="#{loc.overalltotal} (#{sessionBean.currencySignOrCode(sessionBean.user.lastBranch.currency.id,0)})" >
                    <h:outputText value="#{salesType.totalMoney}" style="float: right;" >
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>

                <p:column id="clmTotalLiterSaleType" headerText="#{loc.overalltotal} (LT)" >
                    <h:outputText value="#{salesType.liter}" style="float: right;" >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="unit" value="#{salesType.unit}"/>
                        <f:attribute name="type" value="unit" />
                    </h:outputText>
                </p:column>

                <p:columnGroup type="footer" class="Fright">
                    <p:row>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText value="#{loc.sum} " style="text-align:right; font-weight: bold; " />
                            </f:facet>
                        </p:column>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText  style="text-align:right; font-weight: bold; " value="#{fuelShiftReportPrintDetailBean.calculateTotalMoney()}" >
                                    <f:converter converterId="currencyConverter"  />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>
                            </f:facet>
                        </p:column>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText  style="text-align:right; font-weight: bold; " value="#{fuelShiftReportPrintDetailBean.calculateAccordingUnit()}" />
                            </f:facet>
                        </p:column> 
                    </p:row>
                </p:columnGroup>
            </p:dataTable> 
        </div>

    </h:form>

</ui:composition>