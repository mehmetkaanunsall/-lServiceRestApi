<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:form id="frmFuelShiftDate">

        <h:panelGroup id="pgrFuelShift" layout="block" transient="true">
            <ui:include src="/pages/general/common/toolbarreport.xhtml" >
                <ui:param name="outputtext" value="#{loc.fuelshift}"/>
                <ui:param name="bean" value='#{fuelShiftBean}' />
                <ui:param name="update" value="cldStartDate cldEndDate pgrFuelShiftDatatable" />
            </ui:include>

            <h:panelGroup id="pgrMarketShiftDate" layout="block" transient="true">  
                <div class="ui-g divContent">
                    <div class="panelToggle ui-g-12">

                        <div class='ui-g-12 ui-md-6 ui-lg-2'>
                            <p:outputLabel value="#{loc.startdate}" for="cldStartDate" styleClass="Fs12 FontBold"/>
                            <p:calendar  id="cldStartDate" value="#{fuelShiftBean.beginDate}" required="true" class="datepicker" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" showOn="button" timeControlType="select"  showButtonPanel="true" placeholder="#{loc.startdate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                                <p:ajax event="change" update="cldStartDate" resetValues="true" global="false"/>
                            </p:calendar>
                        </div>

                        <div class='ui-g-12 ui-md-6 ui-lg-2'>
                            <p:outputLabel value="#{loc.enddate}" for="cldEndDate" styleClass="Fs12 FontBold"/>
                            <p:calendar  id="cldEndDate" value="#{fuelShiftBean.endDate}" required="true" class="datepicker" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" timeControlType="select"  showOn="button" showButtonPanel="true" placeholder="#{loc.enddate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                                <p:ajax event="change" update="cldEndDate" resetValues="true" global="false"/>
                            </p:calendar>
                        </div>

                    </div>
                </div>

            </h:panelGroup>
        </h:panelGroup>
    </h:form>
    <div class="EmptyBox20"/>
    <h:panelGroup id="pgrFuelShiftDatatable" >
        <ui:include src="/pages/general/common/datagridtoolbar.xhtml" >
            <ui:param name="bean" value="#{fuelShiftBean}"/> 
            <ui:param name="update" value=""/>
            <ui:param name="btnNewId" value="false"/>
            <ui:param name="datatable" value="frmFuelShift:dtbFuelShift" /> 
            <ui:param name="dtbWidgetVar" value="fuelShiftPF" /> 
            <ui:param name="fileName" value="#{loc.fuelshift}"/>,
            <ui:param name="renderedFilter" value='true'/>
            <ui:param name="renderedToggler" value='true'/>
            <ui:param name="renderedExel" value='true'/>
            <ui:param name="renderedPdf" value='true'/>
            <ui:param name="renderedAdd" value='true'/>
            <ui:param name="btnImport" value="#{fuelShiftBean.getRendered(52, 0)}"/>
            <ui:param name="btnImportForTurpak" value="#{(fuelShiftBean.branchSetting.automationId==2 or fuelShiftBean.branchSetting.automationId==5) and fuelShiftBean.getRendered(52, 0)}"/>
            <ui:param name="renderedCheckBox" value="true"/>
            <ui:param name="labelForCheckBox" value="#{loc.showdeletedshifts}"/>
            <ui:param name="renderedCheckBox2" value="true"/>
            <ui:param name="labelForCheckBox2" value="#{loc.showunapprovedshifts}"/>
            <ui:param name="btnBringShift" value="#{fuelShiftBean.branchSetting.automationId==1 and fuelShiftBean.getRendered(52, 0)}"/>
            <ui:param name="btnShowNonTransferableShifts" value="#{fuelShiftBean.branchSetting.automationId==1}"/>
        </ui:include>

        <h:form id="frmFuelShift">

            <p:dataTable  id="dtbFuelShift" var="Shift"  value="#{fuelShiftBean.listOfObjects}" selection="#{fuelShiftBean.selectedObject}" selectionMode="single"  widgetVar="fuelShiftPF" emptyMessage="#{loc.norecordsfound}"
                          rows="#{sessionBean.user.defualtGridSize}" rowKey="#{Shift.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                          rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="false" lazy="true" 
                          rowStyleClass="#{Shift.isDeleted ? 'ColumnColorRed' : null}">


                <p:column id="clmFuelShiftNo" headerText="#{loc.shiftno}" sortable="true" sortBy="#{Shift.shiftNo}" visible="#{fuelShiftBean.toogleList[0]}" exportable="#{fuelShiftBean.toogleList[0]}">
                    <h:outputText value="#{Shift.shiftNo}" style="text-align: center !important; " /> 
                </p:column>

                <p:column id="clmStartDate" headerText="#{loc.startdate}" sortable="true" sortBy="#{Shift.beginDate}" visible="#{fuelShiftBean.toogleList[1]}"   exportable="#{fuelShiftBean.toogleList[1]}">
                    <h:outputText value="#{Shift.beginDate}"  >
                        <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                    </h:outputText>
                </p:column>

                <p:column id="clmEndDate" headerText="#{loc.enddate}" sortable="true" sortBy="#{Shift.endDate}" visible="#{fuelShiftBean.toogleList[2]}"   exportable="#{fuelShiftBean.toogleList[2]}">
                    <h:outputText value="#{Shift.endDate}"  >
                        <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                    </h:outputText>
                </p:column>

                <p:column id="clmTotalAmount" headerText="#{loc.totalsalequantity}" visible="#{fuelShiftBean.toogleList[3]}"   exportable="false">
                    <h:outputText value="#{Shift.totalSalesAmount}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="type" value="liter"/>
                    </h:outputText>
                </p:column>
                <p:column id="clmTotalSalePrice" headerText="#{loc.totalsalesamount}"  visible="#{fuelShiftBean.toogleList[4]}"   exportable="false">
                    <h:outputText value="#{Shift.totalMoney}"  class="Fright">
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>
                <p:column id="clmTotalShiftPayment" headerText="#{loc.receivedsaleprice}"  visible="#{fuelShiftBean.toogleList[5]}"   exportable="false">
                    <h:outputText value="#{Shift.shiftPaymentTotal}"  class="Fright">
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>
                <p:column id="clmDifference" headerText="#{loc.difference}"  visible="#{fuelShiftBean.toogleList[6]}"   exportable="false">
                    <h:outputText value="#{fuelShiftBean.differenceTotal(Shift.totalMoney, Shift.shiftPaymentTotal)}"  class="Fright">
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>

                <p:column id="clmCreditCardSalePrice" headerText="#{loc.creditcardcollection}"  visible="#{fuelShiftBean.toogleList[7]}"   exportable="false">
                    <h:outputText value="#{Shift.creditCardPaymentPrice}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency"/>     
                    </h:outputText>
                </p:column>
                <p:column id="clmCreditSalePrice" headerText="#{loc.postpaidcollection}" visible="#{fuelShiftBean.toogleList[8]}"   exportable="false">
                    <h:outputText value="#{Shift.creditPaymentPrice}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency"/>     
                    </h:outputText>
                </p:column>

                <p:column id="clmTts" headerText="#{loc.copyoftts}" visible="#{fuelShiftBean.toogleList[9]}"   exportable="false">
                    <h:outputText value="#{Shift.ttsPaymentPrice}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency"/>     
                    </h:outputText>
                </p:column>
                
                 <p:column id="clmTotalAmount2" headerText="#{loc.totalsalequantity}" visible="false" exportable="#{fuelShiftBean.toogleList[3]}" toggleable="false">
                    <h:outputText value="#{Shift.totalSalesAmount}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="type" value=""/>
                    </h:outputText>
                </p:column>
                <p:column id="clmTotalSalePrice2" headerText="#{loc.totalsalesamount}"  visible="false" exportable="#{fuelShiftBean.toogleList[4]}" toggleable="false">
                    <h:outputText value="#{Shift.totalMoney}"  class="Fright">
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="type" value="" />
                    </h:outputText>
                </p:column>
                <p:column id="clmTotalShiftPayment2" headerText="#{loc.receivedsaleprice}"  visible="false" exportable="#{fuelShiftBean.toogleList[5]}" toggleable="false">
                    <h:outputText value="#{Shift.shiftPaymentTotal}"  class="Fright">
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="type" value="" />
                    </h:outputText>
                </p:column>
                <p:column id="clmDifference2" headerText="#{loc.difference}"  visible="false" exportable="#{fuelShiftBean.toogleList[6]}" toggleable="false">
                    <h:outputText value="#{fuelShiftBean.differenceTotal(Shift.totalMoney, Shift.shiftPaymentTotal)}"  class="Fright">
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="type" value="" />
                    </h:outputText>
                </p:column>
                <p:column id="clmCreditCardSalePrice2" headerText="#{loc.creditcardcollection}"  visible="false" exportable="#{fuelShiftBean.toogleList[7]}" toggleable="false">
                    <h:outputText value="#{Shift.creditCardPaymentPrice}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="type" value=""/>     
                    </h:outputText>
                </p:column>
                <p:column id="clmCreditSalePrice2" headerText="#{loc.creditcollection}" visible="false"  exportable="#{fuelShiftBean.toogleList[8]}" toggleable="false">
                    <h:outputText value="#{Shift.creditPaymentPrice}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="type" value=""/>     
                    </h:outputText>
                </p:column>
                <p:column id="clmTts2" headerText="#{loc.copyoftts}" visible="false" exportable="#{fuelShiftBean.toogleList[9]}" toggleable="false">
                    <h:outputText value="#{Shift.ttsPaymentPrice}" class="Fright">
                        <f:converter converterId="currencyConverter"/>
                        <f:attribute name="type" value=""/>     
                    </h:outputText>
                </p:column>


                <p:column id="clmShiftAttendant" headerText="#{loc.employeeofshift}" visible="#{fuelShiftBean.toogleList[17]}"   exportable="#{fuelShiftBean.toogleList[17]}">
                    <h:outputText value="#{fuelShiftBean.readXml(Shift.shiftAttendant)}"/>
                </p:column>

                <p:column id="clmStatus" headerText="#{loc.statu}"  visible="#{fuelShiftBean.toogleList[18]}"   exportable="#{fuelShiftBean.toogleList[18]}">
                    <h:outputText value="#{fuelShiftBean.compareTotal(Shift.totalMoney, Shift.shiftPaymentTotal) == -1 ? loc.surplus : fuelShiftBean.compareTotal(Shift.totalMoney, Shift.shiftPaymentTotal) == 1 ? loc.deficit : loc.complete}"  />
                </p:column>

                <p:column id="clmDetail" style="text-align: center !important; width: 80px;" headerText="#{loc.detail}" visible="#{fuelShiftBean.toogleList[19]}"  exportable="false">
                    <p:commandLink title="#{loc.detail}" action="#{fuelShiftBean.goToShiftDetail()}">
                        <i class="fa fa-search Fs16"/>  
                        <f:setPropertyActionListener value="#{Shift}"  target="#{fuelShiftBean.selectedShift}"  />
                    </p:commandLink> 
                </p:column>

                <p:column id="clmTransferProcess" style="text-align: center !important; width: 80px;" headerText="#{loc.approval}" visible="#{fuelShiftBean.toogleList[20]}"  exportable="false">
                    <p:commandLink title="#{loc.shifttransferprocesses}" action="#{fuelShiftBean.goToShiftTransferProcess()}" rendered="#{!Shift.isConfirm}">
                        <i class="fa fa-pencil-square-o Fs16" style="color: #dc3a3a"/>   
                        <f:setPropertyActionListener value="#{Shift}"  target="#{fuelShiftBean.selectedShift}"  />
                    </p:commandLink> 
                    <p:commandLink title="#{loc.shifttransferprocesses}" action="#{fuelShiftBean.goToShiftTransferProcess()}" rendered="#{Shift.isConfirm}">
                        <i class="fa fa-check Fs16" style="color: #2b9843"/>   
                        <f:setPropertyActionListener value="#{Shift}"  target="#{fuelShiftBean.selectedShift}"  />
                    </p:commandLink> 
                </p:column>
                
               
                <p:columnGroup type="footer" class="Fright" rendered="#{!fuelShiftBean.listOfTotals.isEmpty()}">     
                    <p:row>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[0]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[1]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[2]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column visible="#{fuelShiftBean.toogleList[3]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.listOfTotals.get(0).totalSalesAmount }" >
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="type" value="liter"/>
                                </h:outputText>
                            </f:facet>
                        </p:column>  
                        <p:column visible="#{fuelShiftBean.toogleList[4]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.listOfTotals.get(0).totalMoney}">
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency"/>     
                                </h:outputText>
                            </f:facet>
                        </p:column>  

                        <p:column visible="#{fuelShiftBean.toogleList[5]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.listOfTotals.get(0).shiftPaymentTotal}">
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency"/>     
                                </h:outputText>
                            </f:facet>
                        </p:column>  

                        <p:column visible="#{fuelShiftBean.toogleList[6]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.differenceTotal(fuelShiftBean.listOfTotals.get(0).totalMoney, fuelShiftBean.listOfTotals.get(0).shiftPaymentTotal)}">
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency"/>     
                                </h:outputText>
                            </f:facet>
                        </p:column>  
                        
                        <p:column visible="#{fuelShiftBean.toogleList[7]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.listOfTotals.get(0).creditCardPaymentPrice}">
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency"/>     
                                </h:outputText>
                            </f:facet>
                        </p:column>  


                        <p:column visible="#{fuelShiftBean.toogleList[8]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.listOfTotals.get(0).creditPaymentPrice}">
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency"/>     
                                </h:outputText>
                            </f:facet>
                        </p:column>
                        <p:column visible="#{fuelShiftBean.toogleList[9]}">
                            <f:facet name="footer"  >
                                <h:outputText class="Fright FontBold" style="font-size: 15px; color: #565656;" value="#{fuelShiftBean.listOfTotals.get(0).ttsPaymentPrice}">
                                    <f:converter converterId="currencyConverter"/>
                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency"/>     
                                </h:outputText>
                            </f:facet>
                        </p:column>

                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[10]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[11]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[12]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[13]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                         <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[14]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                         <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[15]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                         <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[16]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                         <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[17]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                          <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[18]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[19]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                        <p:column style="text-align:right;" visible="#{fuelShiftBean.toogleList[20]}">
                            <f:facet name="footer"  >
                            </f:facet>
                        </p:column>
                    </p:row>
                </p:columnGroup>




            </p:dataTable>  
        </h:form>

    </h:panelGroup>

    <p:dialog id="dlgPreviewDtb" width="70%" showEffect="fade" hideEffect="fade" resizable="false" responsive="true" widgetVar="shiftPreviewPF" focus="dlgPreviewDtb" modal="true" closeOnEscape="true" transient="true" dynamic="true">
        <p:ajax event="close" listener="#{fuelShiftBean.setIsFailure(false)}" global="false"/>
        <h:form id="formDialog">
            <ui:include src="/pages/general/common/processtoolbar.xhtml" >
                <ui:param name="outputtext" value="#{fuelShiftBean.title}"/>
                <ui:param name="bean" value='#{fuelShiftBean}' />
                <ui:param name="btnSaveId" value="#{fuelShiftBean.isFailure ? 'false' : 'true'}" />    
                <ui:param name="renderback" value='false'/>
            </ui:include>

            <p:dataTable  id="dtbShiftReport" var="shift"  value="#{fuelShiftBean.rowsSales}" emptyMessage="#{loc.norecordsfound}" sortBy="#{shift.fuelShift.shiftNo}" class="rowGroupTable dialogDatatableWith500" expandableRowGroups="true" 
                          rows="#{sessionBean.user.defualtGridSize}" rowKey="#{shift.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                          rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="false" >


                <p:headerRow>
                    <p:column colspan="15">
                        <h:outputText value="#{shift.fuelShift.shiftNo}"/>
                    </p:column>
                </p:headerRow> 

                <p:column headerText="#{loc.date}">
                    <h:panelGroup rendered="#{!fuelShiftBean.isFailure}">
                        <h:outputText value="#{shift.processDate}" >
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{fuelShiftBean.isFailure}">
                        <h:outputText value="#{shift.processDateString}" />
                    </h:panelGroup>

                </p:column>

                <p:column headerText="#{loc.nozzle}" class="#{!shift.isErrorNozzle and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.nozzleNo}" />
                </p:column>

                <p:column headerText="#{loc.pumpno}" class="#{!shift.isErrorNozzle and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.pumpno}" />
                </p:column>

                <p:column headerText="#{loc.customercode}" class="#{!shift.isErrorAccount and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.accountCode}" />
                </p:column>

                <p:column headerText="#{loc.stockname}" class="#{!shift.isErrorStock and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.stockName}" />
                </p:column>

                <p:column headerText="#{loc.stockcode}" class="#{!shift.isErrorStock and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.stockCode}" />
                </p:column>

                <p:column  headerText="#{loc.liter}" >
                    <h:outputText value="#{shift.liter}" style="float: right;" >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="type" value="liter" />
                    </h:outputText>
                </p:column>

                <p:column  headerText="#{loc.price}" >
                    <h:outputText value="#{shift.price}" style="float: right;" >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>

                <p:column headerText="#{loc.totalmoney}">
                    <h:outputText value="#{shift.totalMoney}" style="float: right;" >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>

                <p:column headerText="#{loc.plate}">
                    <h:outputText value="#{shift.plate}" />
                </p:column>

                <p:column headerText="#{loc.pumpper}" class="#{!shift.isErrorAttendant and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.attendant}" />
                </p:column>

                <p:column headerText="#{loc.attendantcode}" class="#{!shift.isErrorAttendant and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.attendantCode}" />
                </p:column>

                <p:column headerText="#{loc.salestype}" class="#{!shift.isSaleType and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}">
                    <h:outputText value="#{shift.salteType}" />
                </p:column>
                <p:column headerText="#{loc.cardtype}" class="#{!shift.isCardType and fuelShiftBean.isFailure ? 'ColumnColorRed' : ''}" rendered="#{fuelShiftBean.branchSetting.automationId==5}">
                    <h:outputText value="#{shift.fuelCardType}" />
                </p:column>

                <p:column headerText="#{loc.paymenttype}">
                    <h:outputText value="#{shift.paymentType}" />
                </p:column>

                <p:column headerText="#{loc.discountamount}" >
                    <h:outputText value="#{shift.discountTotal}" style="float: right;" >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>

            </p:dataTable>

        </h:form>
    </p:dialog>



    <p:dialog id="dlgShiftFileUpload" widgetVar="dlg_shiftfileupload" modal="true" dynamic="true" resizable="false" focus="dlgShiftFileUpload"  responsive="true" closeOnEscape="true" width="30%">
        <p:ajax event="close" update="dlgShiftFileUpload" listener="#{fuelShiftBean.clearData()}" global="false"/>
        <h:form id="form" enctype="multipart/form-data" > 
            <p:panelGrid  id="pgrFileUpload" class="pgrResponsive">
                <div class="ui-g">
                    <h:panelGroup layout="block">
                        <p:row>
                            <p:column colspan="12" style="font-weight: bold;font-size: 16px"> <h:outputText value="#{loc.fileselectionandtransferoperations}" /></p:column>
                        </p:row>
                        <p:row>
                            <p:column colspan="6">
                                <table style="width: 150px !important;table-layout: fixed;border: none !important;" >
                                    <tbody>
                                        <tr>
                                            <p:fileUpload  allowTypes="/(D1).$/" invalidFileMessage="#{loc.invalidfiletype}"
                                                           invalidSizeMessage="#{loc.filesizecannotbegreaterthan1mb}"
                                                           update="@this,btnTransfer,txtFileName,btnClose"
                                                           style=" margin-top: 46px !important;position: relative;" auto="true" sizeLimit="10000000" multiple="false" label="#{loc.choosefile}"
                                                           fileUploadListener="#{fuelShiftBean.handleFileUploadFile}" rendered="#{fuelShiftBean.branchSetting.automationId==1}"
                                                           mode="advanced" process="@this"/>

                                            <!--Asis Entegrasyon -->
                                            <p:fileUpload  allowTypes="/(d1).$/" invalidFileMessage="#{loc.invalidfiletype}"
                                                           invalidSizeMessage="#{loc.filesizecannotbegreaterthan1mb}"
                                                           update="@this,btnTransferAsis,txtFileName,btnClose"
                                                           style=" margin-top: 46px !important;position: relative;" auto="true" sizeLimit="10000000" multiple="false" label="#{loc.choosefile}"
                                                           fileUploadListener="#{fuelShiftBean.handleFileUploadFile}" rendered="#{fuelShiftBean.branchSetting.automationId==3}"
                                                           mode="advanced" process="@this"/>



                                            <p:fileUpload  allowTypes="/(\.|\/)(rar|zip|xml|xml\.p7m)$/" invalidFileMessage="#{loc.invalidfiletype}"
                                                           invalidSizeMessage="#{loc.filesizecannotbegreaterthan1mb}"
                                                           style=" margin-top: 46px !important;position: relative;" update="@this,btnTransferXml,txtFileName,btnClose"
                                                           auto="true" sizeLimit="10000000" multiple="false" label="#{loc.choosefile}"
                                                           fileUploadListener="#{fuelShiftBean.handleFileUploadFile}" rendered="#{fuelShiftBean.branchSetting.automationId==2 or fuelShiftBean.branchSetting.automationId==5}"
                                                           mode="advanced" process="@this"/>

                                            <p:fileUpload  allowTypes="/(D1).$/" invalidFileMessage="#{loc.invalidfiletype}"
                                                           invalidSizeMessage="#{loc.filesizecannotbegreaterthan1mb}"
                                                           update="@this,btnTransferStawiz,txtFileName,btnClose"
                                                           style=" margin-top: 46px !important;position: relative;" auto="true" sizeLimit="10000000" multiple="false" label="#{loc.choosefile}"
                                                           fileUploadListener="#{fuelShiftBean.handleFileUploadFile}" rendered="#{fuelShiftBean.branchSetting.automationId==4}"
                                                           mode="advanced" process="@this"/>


                                        </tr>

                                        <tr>
                                            <td style="width: 100px;border:none !important;"><h:outputText id="txtFileName"  styleClass="wrapLabel" value="#{fuelShiftBean.uploadedFile!=null ? fuelShiftBean.uploadedFile.fileName : ''}" /> </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </p:column> 
                            <p:column  colspan="6">
                                <p:commandButton id="btnTransferStawiz" rendered="#{fuelShiftBean.branchSetting.automationId==4}" icon="fa fa-exchange" disabled="#{fuelShiftBean.uploadedFile==null}" resetValues="true" value="#{loc.transfer}" update="@this,btnTransferXml ,btnClose,txtFileName" actionListener="#{fuelShiftBean.importShiftFromStawiz()}" />
                                <p:commandButton id="btnTransferAsis" rendered="#{fuelShiftBean.branchSetting.automationId==3}" icon="fa fa-exchange" disabled="#{fuelShiftBean.uploadedFile==null}" resetValues="true" value="#{loc.transfer}" update="@this,btnTransferAsis ,btnClose,txtFileName" actionListener="#{fuelShiftBean.importShiftFromAsis()}" />
                                <p:commandButton id="btnTransferXml" rendered="#{fuelShiftBean.branchSetting.automationId==2 or fuelShiftBean.branchSetting.automationId==5}" icon="fa fa-exchange" disabled="#{fuelShiftBean.uploadedFile==null}" resetValues="true" value="#{loc.transfer}" update="@this,btnTransferXml ,btnClose,txtFileName" actionListener="#{fuelShiftBean.importShiftFromXml()}" />
                                <p:commandButton id="btnTransfer" rendered="#{fuelShiftBean.branchSetting.automationId==1}" icon="fa fa-exchange" disabled="#{fuelShiftBean.uploadedFile==null}" resetValues="true" value="#{loc.transfer}" update="@this,btnTransfer ,btnClose,txtFileName" actionListener="#{fuelShiftBean.importShiftFromTxt()}" />
                                <p:commandButton id="btnClose"  icon="fa fa-close" disabled="#{fuelShiftBean.uploadedFile==null}" resetValues="true" value="#{loc.remove}" update="@this,btnTransfer ,btnClose,txtFileName" actionListener="#{fuelShiftBean.clearData()}" />
                            </p:column>

                        </p:row>
                    </h:panelGroup>

                </div>
            </p:panelGrid> 

        </h:form>
    </p:dialog>

    <!--sistemda olan vardiyalar-->
    <p:dialog id="dlgShiftAvailable" widgetVar="dlg_ShiftAvailable" resizable="false" width="25%" focus="dlgShiftAvailable" responsive="true" dynamic="true" transient="true" modal="true" closeOnEscape="true">
        <h:form id="frmShiftAvailable">
            <ui:include src="/pages/general/common/tabgridtoolbar.xhtml" >
                <ui:param name="outputtext" value="#{loc.shiftisavailableinthesystem}"/>
                <ui:param name="bean" value='#{fuelShiftBean}' />
                <ui:param name="update"  value="" />
            </ui:include>
            <p:dataTable var="shift" value="#{fuelShiftBean.rowsSales}">
                <p:column headerText="#{loc.shiftno}">
                    <h:outputText value="#{shift.fuelShift.shiftNo}" />
                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>


    <p:dialog id="dlgShiftListSamba" widgetVar="dlg_ShiftListSamba" class="dialogScroll" resizable="false" width="25%" focus="dlgShiftListSamba" responsive="true" dynamic="true" transient="true" modal="true" closeOnEscape="true" >
        <h:form id="frmShiftListSamba">
            <ui:include src="/pages/general/common/tabgridtoolbar.xhtml" >
                <ui:param name="outputtext" value="#{loc.fuelshift}"/>
                <ui:param name="bean" value='#{fuelShiftBean}' />
                <ui:param name="update"  value="" />
            </ui:include>
            <p:dataTable var="smbFile" value="#{fuelShiftBean.listOfSamba}" class="tabDatatable" selection="#{fuelShiftBean.selectedSambaFile}" 
                         sortBy="#{smbFile.name}" sortOrder="descending" selectionMode="single" emptyMessage="#{loc.norecordsfound}" rowKey="#{smbFile.uncPath}">

                <p:ajax event="#{sessionBean.user.gridRowSelect}" listener="#{fuelShiftBean.uploadSambaFile()}" />  
                <p:column headerText="#{loc.untransferredfiles}" sortBy="#{smbFile.name}" sortable="true">
                    <h:outputText value="#{smbFile.name}" />
                </p:column>
            </p:dataTable>

        </h:form>
    </p:dialog>
    
     
    

    <style type="text/css">
        .ui-fileupload-buttonbar{
            padding: 0px !important;
            margin-top: -35px !important;
            margin: -20px 2px;
        }       
        .wrapLabel{
            word-wrap: break-word !important;
        }
        .pgrResponsive{
            border-collapse: collapse;
            margin: 0;
            padding: 0px;
            width: 100%;
            table-layout: auto;
        }


    </style>

</ui:composition>



