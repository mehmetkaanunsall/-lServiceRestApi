<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">



    <h:form id="frmFuelShiftTransfer">

        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.fuelshifttransferprocesses}"/>
            <ui:param name="bean" value='#{fuelShiftTransferBean}' />
            <ui:param name="update" value="" />
            <ui:param name="btnSaveId" value="false" />     
            <ui:param name="renderback" value='true'/>
            <ui:param name="btnDeleteId" value='#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted and fuelShiftTransferBean.getRendered(54, 0)}' />
            <ui:param name="createExcelFile" value='#{fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}'/>
            <ui:param name="createPdfFile" value='#{fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}'/>
            <ui:param name="createShiftPreview" value="#{fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}"/>
            <ui:param name="labelCreateExcelFile" value="#{loc.shiftsummary}"/>
            <ui:param name="labelCreatePdfFile" value="#{loc.shiftsummary}"/>
        </ui:include>

        <h:panelGroup id="pgrFuelShiftTransfer" layout="block" transient="true" >  
            <div class="ui-g divContent">
                <div class="ui-g-12 panelToggle">
                    <div class="EmptyBox10"/>
                    <div class="ui-g-12 ui-md-12 ui-lg-6">
                        <div class="ui-g-12 ui-md-12 ui-lg-4">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText   value="#{loc.shiftno}" class="FontBold Fs15"/>
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText style="text-align: left !important;" value="#{fuelShiftTransferBean.selectedShift.shiftNo}"/>
                            </div>
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-4">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText   value="#{loc.startdate}" class="FontBold Fs15"/>
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText   value="#{fuelShiftTransferBean.selectedShift.beginDate}">
                                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                                </h:outputText>
                            </div>
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-4">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText value="#{loc.enddate}" class="FontBold Fs15" />
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText   value="#{fuelShiftTransferBean.selectedShift.endDate}">
                                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                                </h:outputText>
                            </div>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6">

                        <div class="ui-g-12 ui-md-12 ui-lg-4">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText value="#{loc.actualsalesprice}" class="FontBold Fs15" />
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText   value="#{fuelShiftTransferBean.selectedShift.totalMoney}">
                                    <f:converter converterId="currencyConverter"  />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>
                            </div>
                        </div>   
                        <div class="ui-g-12 ui-md-12 ui-lg-4">
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText value="#{loc.receivedsaleprice}" class="FontBold Fs15" />
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                                <h:outputText   value="#{fuelShiftTransferBean.overallTotalShiftPayment}">
                                    <f:converter converterId="currencyConverter"  />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>
                            </div>
                        </div>   
                        <div class="ui-g-12 ui-md-12 ui-lg-4">
                            <div class="ui-g-12 ui-md-12 ui-lg-12 Fright">
                                <p:commandButton id="btnShiftProcess" value="#{fuelShiftTransferBean.selectedShift.isConfirm ? loc.openshiftapproved : loc.approveshift}" rendered="#{!fuelShiftTransferBean.selectedShift.isDeleted}" process="@this" class="Fright MarTop11" actionListener="#{fuelShiftTransferBean.beforeApproveShift()}"/>  
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </h:panelGroup>

        <div class="EmptyBox20" />


        <h:panelGroup rendered="#{fuelShiftTransferBean.listOfAttendant.size()>0}">

            <p:tabView id="tbvFuelShiftTransfer" scrollable="true" dynamic="true" cache="true" value="#{fuelShiftTransferBean.listOfAttendant}" var="attendantShift" activeIndex="#{fuelShiftTransferBean.activeIndex}">
                <p:ajax event="tabChange" listener="#{fuelShiftTransferBean.onTabChange(attendantShift)}" update="pngBook" />
                <p:tab title="#{attendantShift.account.name}" >

                    <div class="ui-g">
                        <div class="EmptyBox10"/>
                        <div class="ui-g-12 ui-md-12 ui-lg-12">
                            <p:fieldset legend="#{loc.actualsaleprices}" toggleable="true" class="shiftSaleFieldSet" >
                                <p:dataTable id="dtbSales" value="#{fuelShiftTransferBean.listOfSalesToSaleType}" rowKey="#{fuelShiftSale.id}" emptyMessage="#{loc.norecordsfound}" var="fuelShiftSale" >

                                    <p:column headerText="#{loc.salestype}">
                                        <h:outputText value="#{fuelShiftSale.fuelSaleType.name}" />
                                    </p:column>

                                    <p:column headerText="#{loc.salesprice}"   >
                                        <h:outputText value="#{fuelShiftSale.totalMoney}" style="float:right;" >
                                            <f:converter converterId="currencyConverter"  />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </p:column>
                                    <p:columnGroup type="footer">
                                        <p:column>
                                            <f:facet name="footer" >
                                                <h:outputText value="#{loc.sum}" class="Fright FontBold" style="color: #565656;"></h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="footer" >
                                                <h:outputText value="#{fuelShiftTransferBean.totalShiftSale}" class="Fright FontBold" style="color: #565656;">
                                                    <f:converter converterId="currencyConverter" />
                                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                                    <f:attribute name="type" value="currency" />
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                    </p:columnGroup>
                                </p:dataTable>
                            </p:fieldset>
                        </div>
                        <h:panelGroup rendered="#{attendantShift.account.id!=-1 and attendantShift.account.id!=-2}">
                            <div class="#{fuelShiftTransferBean.isParoPoint ? 'ui-g-12 ui-md-12 ui-lg-5' : 'ui-g-12 ui-md-6 ui-lg-6'}">
                                <div class="#{fuelShiftTransferBean.isParoPoint ? 'ui-g-12 ui-md-6 ui-lg-6' : 'ui-g-12 ui-md-6 ui-lg-6'}">
                                    <p:fieldset legend="#{loc.cash}" class="shiftCashFieldSet" >
                                        <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                            <p:outputLabel value="#{loc.safe}"  for="slcSafe" styleClass="Fs12 FontBold"/>
                                            <p:selectOneMenu id="slcSafe" value="#{fuelShiftTransferBean.selectedShiftPayment.safe.id}" required="true">                 
                                                <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                                                <f:selectItems value="#{fuelShiftTransferBean.listOfSafeGeneral}" 
                                                               var="safe" itemLabel="#{safe.name}" 
                                                               itemValue="#{safe.id}"  itemDisabled="#{!safe.isMposMovement}"/>
                                                <p:ajax event="change" global="false"/>
                                            </p:selectOneMenu>
                                        </div>
                                        <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                            <p:outputLabel value="#{loc.total}" for="txtTotalSafe" styleClass="Fs12 FontBold"/>
                                            <p:inputNumber id="txtTotalSafe" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                                           thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                                           roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" minValue="0"
                                                           value="#{fuelShiftTransferBean.cashPrice}"  class="Wid97 TexAlRight"  placeholder="#{loc.total}" required="true">
                                                <p:ajax event="keyup" global="false" />
                                            </p:inputNumber>
                                        </div>
                                        <div  class="ui-g-12 ui-md-6 ui-lg-9"></div>
                                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                                            <p:commandButton value="#{loc.save}" process="@this" action="#{fuelShiftTransferBean.saveShiftPayment(0)}" global="false" class="Fright" rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">
                                            </p:commandButton>
                                        </div>
                                    </p:fieldset>
                                </div>
                                <div class="#{fuelShiftTransferBean.isParoPoint ? 'ui-g-12 ui-md-6 ui-lg-6' : 'ui-g-12 ui-md-6 ui-lg-6'}">
                                    <p:fieldset legend="#{loc.creditcard}" class="shiftCashFieldSet" >
                                        <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                            <p:outputLabel value="#{loc.bank}"  for="slcBank" styleClass="Fs12 FontBold"/>
                                            <p:selectOneMenu id="slcBank" value="#{fuelShiftTransferBean.selectedShiftPayment.bankAccount.id}" required="true">                 
                                                <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                                                <f:selectItems value="#{fuelShiftTransferBean.listOfBankAccountGeneral}" 
                                                               var="bank" itemLabel="#{bank.name}" 
                                                               itemValue="#{bank.id}"  />
                                                <p:ajax event="change" global="false"/>
                                            </p:selectOneMenu>
                                        </div>
                                        <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                            <p:outputLabel value="#{loc.total}" for="txtTotalBank" styleClass="Fs12 FontBold"/>
                                            <p:inputNumber id="txtTotalBank" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                                           thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                                           roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" minValue="0"
                                                           value="#{fuelShiftTransferBean.creditCardPrice}"  class="Wid97 TexAlRight"  placeholder="#{loc.total}" required="true">
                                                <p:ajax event="keyup" global="false" />
                                            </p:inputNumber>
                                        </div>
                                        <div  class="ui-g-12 ui-md-6 ui-lg-9"></div>
                                        <div  class="ui-g-12 ui-md-6 ui-lg-3">
                                            <p:commandButton value="#{loc.save}" process="@this" action="#{fuelShiftTransferBean.saveShiftPayment(1)}"  global="false" class="Fright" rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">

                                            </p:commandButton>
                                        </div>
                                    </p:fieldset>
                                </div>
                            </div>
                            <div class="#{fuelShiftTransferBean.isParoPoint ? 'ui-g-12 ui-md-12 ui-lg-7' : 'ui-g-12 ui-md-6 ui-lg-6'}">
                                <div class="#{fuelShiftTransferBean.isParoPoint ? 'ui-g-12 ui-md-6 ui-lg-5' : 'ui-g-12 ui-md-6 ui-lg-6'}">
                                    <h:panelGroup id="pngAccountIncome">

                                        <p:fieldset id="fldIncomeExpense" rendered="#{!fuelShiftTransferBean.isAccountCollectionPayment}" legend="#{loc.incomeexpense}" class="shiftCashFieldSet">

                                            <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                                <h:panelGroup id="pngIncomeExpense">
                                                    <p:outputLabel value="#{fuelShiftTransferBean.isIncome ? loc.income : loc.expense}" for="#{fuelShiftTransferBean.isIncome ? 'slcIncome' : 'slcExpense'}" styleClass="Fs12 FontBold"/>
                                                    <p:commandLink id="cmdIncomeExpense" resetValues="true" process="@this" global="false" 
                                                                   title="#{!fuelShiftTransferBean.isIncome ? loc.income : loc.expense}" 
                                                                   actionListener="#{fuelShiftTransferBean.incomeOrExpense()}" update="pngIncomeExpense"  >
                                                        <i class="fa fa-refresh Fs14 tlbrBackBtn"/>                 
                                                    </p:commandLink>
                                                    <p:commandLink id="cmdIncomeExpenseAccount" resetValues="true" process="@this" global="false" 
                                                                   title="#{!fuelShiftTransferBean.isAccountCollectionPayment ? loc.accountcollectionepayment : loc.incomeexpense}" 
                                                                   actionListener="#{fuelShiftTransferBean.incomeExpenseOrAccountCollectionPayment()}" update="pngAccountIncome"  >
                                                        <i class="fa fa-exchange Fs14 tlbrBackBtn Fright" />                 
                                                    </p:commandLink>

                                                    <h:panelGroup rendered="#{!fuelShiftTransferBean.isIncome}">
                                                        <p:inputText id="slcExpense" required="true" onclick="showIncomeExpenseBookShift()"  value="#{fuelShiftTransferBean.selectedShiftPayment.financingDocument.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.expense}" >
                                                        </p:inputText>
                                                        <p:commandLink process="@this" update="frmIncomeExpenseBookFilter" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                                            <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                                            <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([false, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','fuelShiftTransferBean')}" />
                                                        </p:commandLink>
                                                    </h:panelGroup>
                                                    <h:panelGroup rendered="#{fuelShiftTransferBean.isIncome}">
                                                        <p:inputText id="slcIncome" required="true" onclick="showIncomeExpenseBookShift()"  value="#{fuelShiftTransferBean.selectedShiftPayment.financingDocument.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.income}" >
                                                        </p:inputText>
                                                        <p:commandLink process="@this" update="frmIncomeExpenseBookFilter" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                                            <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                                            <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([true, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','fuelShiftTransferBean')}" />
                                                        </p:commandLink>
                                                    </h:panelGroup>
                                                </h:panelGroup>
                                            </div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                                <p:outputLabel value="#{loc.total}" for="txtTotalIncomeExpense" styleClass="Fs12 FontBold"/>
                                                <p:inputNumber id="txtTotalIncomeExpense" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                                               thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                                               roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" minValue="0"
                                                               value="#{fuelShiftTransferBean.incomeExpensePrice}"  class="Wid97 TexAlRight"  placeholder="#{loc.total}" required="true">
                                                    <p:ajax event="keyup" global="false" />
                                                </p:inputNumber>
                                            </div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-9"></div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-3">
                                                <p:commandButton value="#{loc.save}" process="@this" action="#{fuelShiftTransferBean.saveShiftPayment(2)}"  global="false" class="Fright" rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">
                                                </p:commandButton>
                                            </div>
                                        </p:fieldset>

                                        <p:fieldset id="fldAccount" rendered="#{fuelShiftTransferBean.isAccountCollectionPayment}" legend="#{loc.accountcollectionepayment}" class="shiftCashFieldSet">

                                            <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                                <h:panelGroup id="pngAccountCollectionPayment">
                                                    <p:outputLabel value="#{fuelShiftTransferBean.isAccountCollection ? loc.collection : loc.payment}" for="slcCollectionPayment" styleClass="Fs12 FontBold"/>
                                                    <p:commandLink id="cmdCollectionPayment" resetValues="true" process="@this" global="false" 
                                                                   title="#{fuelShiftTransferBean.isAccountCollection ? loc.payment : loc.collection}" 
                                                                   actionListener="#{fuelShiftTransferBean.collectionOrPayment()}" update="pngAccountCollectionPayment"  >
                                                        <i class="fa fa-refresh Fs14 tlbrBackBtn"/>                 
                                                    </p:commandLink>
                                                    <p:commandLink id="cmdIncomeExpenseAccount1" resetValues="true" process="@this" global="false" 
                                                                   title="#{!fuelShiftTransferBean.isAccountCollectionPayment ? loc.accountcollectionepayment : loc.incomeexpense}" 
                                                                   actionListener="#{fuelShiftTransferBean.incomeExpenseOrAccountCollectionPayment()}" update="pngAccountIncome"  >
                                                        <i class="fa fa-exchange Fs14 tlbrBackBtn Fright" />                 
                                                    </p:commandLink>


                                                    <p:inputText id="slcCollectionPayment"  required="true" onclick="showAccountBookPayment()"  value="#{fuelShiftTransferBean.selectedShiftPayment.financingDocument.account.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.account}" >
                                                    </p:inputText>
                                                    <p:commandLink id="btnAccount" update="frmAccountBookFilterPayment" process="@this" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_accountPayment').loadContents();">
                                                        <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                                        <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([sessionBean.user.lastBranch],'frmAccountBookFilterPayment','olp_accountPayment','accountCollectionPayment')}" global="false" update="pngAccountBook" />
                                                    </p:commandLink>


                                                </h:panelGroup>
                                            </div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-6">
                                                <p:outputLabel value="#{loc.total}" for="txtTotalCollectionPayment" styleClass="Fs12 FontBold"/>
                                                <p:inputNumber id="txtTotalCollectionPayment" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                                               thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                                               roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" minValue="0"
                                                               value="#{fuelShiftTransferBean.accountCollectionPaymentPrice}"  class="Wid97 TexAlRight"  placeholder="#{loc.total}" required="true">
                                                    <p:ajax event="keyup" global="false" />
                                                </p:inputNumber>
                                            </div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-9"></div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-3">
                                                <p:commandButton value="#{loc.save}" process="@this" action="#{fuelShiftTransferBean.saveShiftPayment(4)}"  global="false" class="Fright" rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">
                                                </p:commandButton>
                                            </div>
                                        </p:fieldset>

                                    </h:panelGroup>
                                </div>
                                <div class="#{fuelShiftTransferBean.isParoPoint ? 'ui-g-12 ui-md-6 ui-lg-3' : 'ui-g-12 ui-md-6 ui-lg-6'}">
                                    <p:fieldset legend="#{loc.postpaid}" class="shiftCashFieldSet" >
                                        <div  class="ui-g-12 ui-md-12 ui-lg-12">
                                            <p:commandButton value="#{loc.bringsales}" actionListener="#{fuelShiftTransferBean.bringCreditSales()}" update="dlgCreditSales pngBook" resetValues="true" process="@this" global="true" class="Wid100 MarTop18" />
                                        </div>
                                        <h:panelGroup rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">
                                            <div  class="EmptyBox46"/>         
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{fuelShiftTransferBean.selectedShift.isConfirm or fuelShiftTransferBean.selectedShift.isDeleted}">
                                            <div  class="EmptyBox17"/>         
                                        </h:panelGroup>
                                    </p:fieldset>
                                </div>
                                <h:panelGroup rendered="#{fuelShiftTransferBean.isParoPoint}">
                                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                                        <p:fieldset legend="#{loc.point}" class="shiftCashFieldSet" >
                                            <div  class="ui-g-12 ui-md-12 ui-lg-12">
                                                <p:outputLabel value="#{loc.total}" for="txtPoint" styleClass="Fs12 FontBold"/>
                                                <p:inputNumber id="txtPoint" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                                               thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                                               roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" minValue="0"
                                                               value="#{fuelShiftTransferBean.paroPointPrice}"  class="Wid97 TexAlRight"  placeholder="#{loc.total}" required="true">
                                                    <p:ajax event="keyup" global="false" />
                                                </p:inputNumber>
                                            </div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-9"></div>
                                            <div  class="ui-g-12 ui-md-6 ui-lg-3">
                                                <p:commandButton value="#{loc.save}" process="@this" action="#{fuelShiftTransferBean.saveShiftPayment(3)}" global="false" class="Fright" rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">
                                                </p:commandButton>
                                            </div>
                                        </p:fieldset>
                                    </div>
                                </h:panelGroup>

                            </div>
                            <p:remoteCommand name="showAccountBookPayment" delay="200" update="frmAccountBookFilterPayment pngAccountBook" process="@this" oncomplete="PF('olp_accountPayment').loadContents();" actionListener="#{accountBookFilterBean.findFilterListLazyLoading([sessionBean.user.lastBranch],'frmAccountBookFilterPayment','olp_accountPayment','accountCollectionPayment')}" global="false" >
                            </p:remoteCommand>


                        </h:panelGroup>
                        <h:panelGroup rendered="#{attendantShift.account.id!=-1}">
                            <div class="EmptyBox20"/>
                            <div  class="ui-g-12 ui-md-12 ui-lg-12">
                                <p:dataTable id="dtbPayment" value="#{fuelShiftTransferBean.listOfShiftPayment}" rowKey="#{shiftPayment.id}" emptyMessage="#{loc.norecordsfound}"
                                             selection="#{fuelShiftTransferBean.selectedFinancingDocument}" selectionMode="single" var="shiftPayment" >

                                    <p:ajax event="#{sessionBean.user.gridRowSelect}"  listener="#{fuelShiftTransferBean.getfinancingDocument()}" global="false" update="dlgFinancingDocument pngBook" resetValues="true"/>

                                    <p:column headerText="#{loc.salestype}" rendered="#{attendantShift.account.id==-2}">
                                        <h:outputText value="#{shiftPayment.fuelSaleType.name}"/>
                                    </p:column>
                                    <p:column headerText="#{loc.processtype}">
                                        <h:outputText value="#{shiftPayment.bankAccount.id>0 ? loc.creditcard : shiftPayment.safe.id>0 ? loc.cash : 
                                                               (shiftPayment.financingDocument.incomeExpense.id>0 and shiftPayment.financingDocument.incomeExpense.isIncome) ? loc.income : 
                                                               (shiftPayment.financingDocument.incomeExpense.id>0 and !shiftPayment.financingDocument.incomeExpense.isIncome) ? loc.expense : shiftPayment.credit.id>0 ?  loc.postpaid : shiftPayment.fuelSaleType.typeno==98 ? loc.point : shiftPayment.financingDocument.account.id > 0 and !shiftPayment.financingDocument.account.isEmployee ? shiftPayment.financingDocument.financingType.id == 50 ? loc.accountpayment : shiftPayment.financingDocument.financingType.id == 49 ?  loc.accountcollection : loc.employeemovement : loc.employeemovement}" />
                                    </p:column>
                                    <p:column id ="clmMovementPlace" headerText="#{loc.movementplace}"  >
                                        <h:outputText value="#{shiftPayment.bankAccount.id >0 ? shiftPayment.bankAccount.name : 
                                                               (shiftPayment.safe.id > 0 ? shiftPayment.safe.name : shiftPayment.financingDocument.incomeExpense.id>0 ? shiftPayment.financingDocument.incomeExpense.name : shiftPayment.credit.id>0 ? shiftPayment.credit.account.name : shiftPayment.fuelSaleType.typeno==98 ? shiftPayment.financingDocument.account.name : shiftPayment.account.id>0 and shiftPayment.financingDocument.account.isEmployee ? shiftPayment.account.name : shiftPayment.financingDocument.account.name)}" />
                                    </p:column>

                                    <p:column id ="clmSalePrice" headerText="#{loc.salesprice}"   >
                                        <h:outputText value="#{shiftPayment.financingDocument.price}" style="float:right;" >
                                            <f:converter converterId="currencyConverter"  />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                        <h:panelGroup rendered="#{shiftPayment.bankAccount.id>0 or shiftPayment.safe.id>0 or (shiftPayment.financingDocument.incomeExpense.id>0 and shiftPayment.financingDocument.incomeExpense.isIncome) or
                                                                  (shiftPayment.financingDocument.incomeExpense.id==0 and shiftPayment.financingDocument.financingType.id==49) or shiftPayment.credit.id>0 or shiftPayment.fuelSaleType.typeno==98}" >
                                            <li  class="Fleft BordRad10" style="float: right;margin-right: 10px">
                                                <i class="fa fa-plus green"></i>
                                            </li>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{(shiftPayment.financingDocument.incomeExpense.id>0 and !shiftPayment.financingDocument.incomeExpense.isIncome) or (shiftPayment.financingDocument.incomeExpense.id==0 and shiftPayment.financingDocument.financingType.id==50)}" >
                                            <li  class="Fleft BordRad10" style="float: right;margin-right: 10px">
                                                <i class="fa fa-minus red"></i>
                                            </li>
                                        </h:panelGroup>

                                    </p:column>
                                    <p:columnGroup type="footer">
                                        <p:column colspan="#{attendantShift.account.id==-2 ? '3' : '2'}">
                                            <f:facet name="footer" >
                                                <h:outputText value="#{loc.sum}" class="Fright FontBold" style="color: #565656;"></h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column>
                                            <f:facet name="footer" >
                                                <h:outputText value="#{fuelShiftTransferBean.totalShiftPayment}" class="Fright FontBold" style="color: #565656;">
                                                    <f:converter converterId="currencyConverter" />
                                                    <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                                                    <f:attribute name="type" value="currency" />
                                                </h:outputText>
                                            </f:facet>
                                        </p:column>
                                    </p:columnGroup>

                                </p:dataTable>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{attendantShift.account.id!=-1 and attendantShift.account.id!=-2}">
                            <div class="EmptyBox20"/>


                            <p:panel style="margin: auto">
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                                        <p:outputLabel for="txtTotalShiftAmount" value="#{loc.tobereceivedsaleprice}" class="Fs15 FontBold"/>
                                    </div>
                                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                                        <p:inputText id="txtTotalShiftAmount" value="#{fuelShiftTransferBean.totalShiftSale}" readonly="true" style="text-align:  right">
                                            <f:converter converterId="currencyConverter"  />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </p:inputText>
                                    </div>
                                </div>
                                <div class="ui-g-12 ui-md-6 ui-lg-6">
                                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                                        <p:outputLabel for="txtTotalShiftPayment" value="#{fuelShiftTransferBean.compareShiftPayment()==0 ? loc.shiftdeficit : loc.shiftexcess}" class="Fs15 FontBold MarRight15" style="#{fuelShiftTransferBean.compareShiftPayment()==0 ? 'color:#f95d5d  !important;' : 'color:#488e48 !important;'}"/>
                                        <h:panelGroup rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}">
                                            <p:commandLink title="#{loc.chargeuser}" actionListener="#{fuelShiftTransferBean.askConfirmationChargeUser(1)}" resetValues="true" process="@this"  class="#{fuelShiftTransferBean.compareShiftPayment()==0 ? 'clmInputGroupShift' : ''} MarRight5">
                                                <i class="Fs14 #{fuelShiftTransferBean.compareShiftPayment()==0 ? 'MarLeft5' : 'MarLeft-5'} #{fuelShiftTransferBean.compareShiftPayment()==0 ? 'fa fa-user-times' :''}" /><!--Kullanıcıyı borçlandır-->
                                            </p:commandLink>

                                            <p:commandLink title="#{loc.createexpense}" actionListener="#{fuelShiftTransferBean.createFinancingDocument(3)}" resetValues="true" process="@this"  class="#{fuelShiftTransferBean.compareShiftPayment()==0 ? 'clmInputGroupShift' : ''} MarRight5">
                                                <i class="Fs14 #{fuelShiftTransferBean.compareShiftPayment()==0 ? 'MarLeft5' : 'MarLeft-5'} #{fuelShiftTransferBean.compareShiftPayment()==0 ? 'fa fa-arrow-down' :''}" /><!--Gider oluştur-->
                                            </p:commandLink>

                                            <p:commandLink title="#{loc.transferusertoexcessamount}" actionListener="#{fuelShiftTransferBean.askConfirmationChargeUser(2)}" update="dlgFinancingDocument" resetValues="true" process="@this"   class="#{fuelShiftTransferBean.compareShiftPayment()==1 ? 'clmInputGroupShift' : ''} MarRight5">
                                                <i class="Fs14 #{fuelShiftTransferBean.compareShiftPayment()==1 ? 'MarLeft5' : 'MarLeft-5'} #{fuelShiftTransferBean.compareShiftPayment()==1 ? 'fa fa-user-plus' : ''}" /><!--Kullanıcıya fazlalığı aktar-->
                                            </p:commandLink>

                                            <p:commandLink title="#{loc.createincome}" actionListener="#{fuelShiftTransferBean.createFinancingDocument(4)}" update="dlgFinancingDocument" resetValues="true" process="@this" class="#{fuelShiftTransferBean.compareShiftPayment()==1 ? 'clmInputGroupShift' : ''} MarRight5">
                                                <i class="Fs14 #{fuelShiftTransferBean.compareShiftPayment()==1 ? 'MarLeft5' : 'MarLeft-5'} #{fuelShiftTransferBean.compareShiftPayment()==1 ? 'fa fa-arrow-up' : ''}" /><!--Kullanıcıya fazlalığı aktar-->
                                            </p:commandLink>
                                        </h:panelGroup>
                                    </div>
                                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                                        <p:inputText id="txtTotalShiftPayment" value="#{fuelShiftTransferBean.compareShiftPayment()==0 ? fuelShiftTransferBean.totalRemaining : -fuelShiftTransferBean.totalRemaining}" readonly="true" style="text-align:  right; #{fuelShiftTransferBean.compareShiftPayment()==0 ? 'color:#f95d5d ;' : 'color:#488e48;'}">
                                            <f:converter converterId="currencyConverter"  />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </p:inputText>

                                    </div>
                                </div>
                            </p:panel>
                            <div class="EmptyBox10"/>
                        </h:panelGroup>

                    </div>
                </p:tab>
            </p:tabView>

            <p:remoteCommand name="showIncomeExpenseBookShift" update="frmIncomeExpenseBookFilter" process="@this" oncomplete="PF('olp_IncomeExpense').loadContents();" 
                             actionListener="#{incomeExpenseBookFilterBean.findFilterList([fuelShiftTransferBean.isIncome, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','fuelShiftTransferBean')}" />

        </h:panelGroup>
        <h:commandLink id="btnSecretExcel" style="display: none"  immediate="true"  actionListener="#{fuelShiftTransferBean.createExcelFile}"  >
            <i class="icon-file-excel tlbrExcelBtn Fs22"/>                 
        </h:commandLink>
        <h:commandLink id="btnSecretPdf" style="display: none"  immediate="true"  actionListener="#{fuelShiftTransferBean.creatPdfFile}">
            <i class="icon-file-pdf tlbrPdfBtn Fs22"/>                 
        </h:commandLink>
        <p:remoteCommand name="bringExcel" oncomplete="transferExcel();" delay="500"/>
        <p:remoteCommand name="bringPdf" oncomplete="transferPdf();" delay="500"/>
        <p:remoteCommand name="goToPreview" process="@this" actionListener="#{fuelShiftTransferBean.showPreview()}" delay="1000"/>
    </h:form>


    <h:panelGroup id="pngBook" rendered="#{fuelShiftTransferBean.listOfAttendant.size()>0}">
        <p:overlayPanel id="olpIncomeExpense" widgetVar="olp_IncomeExpense"  showEvent="none" modal="true" for="frmFuelShiftTransfer:tbvFuelShiftTransfer:#{fuelShiftTransferBean.activeIndex}:dtbPayment:clmSalePrice" transient="true"  my="right top" at="left bottom" dismissable="true" hideEffect="blind" showCloseIcon="true" class="Wid30">
            <ui:include src="/pages/general/common/incomeexpensebook.xhtml">
                <ui:param name="updateBean" value='#{fuelShiftTransferBean}' />
                <ui:param name="type" value='fuelShiftTransferBean' />
                <ui:param name="parameters" value='#{[fuelShiftTransferBean.isIncome, sessionBean.user.lastBranch]}' /> 
                <ui:param name="form" value='frmIncomeExpenseBookFilter' /> 
            </ui:include>
        </p:overlayPanel>

        <c:if test="#{fuelShiftTransferBean.isDestroy}">
            <ui:include src="/pages/general/common/accountbook.xhtml" >
                <ui:param name="updateBean" value="#{fuelShiftTransferBean.isFinancingDoc ? fuelShiftTransferBean : fuelShiftCreateCreditBean}" />
                <ui:param name="for" value="#{fuelShiftTransferBean.isFinancingDoc ? 'frmFinancingDocumentProcess:slcOperationType' : 'frmToolbarCreditSales:btnSave'}" />
                <ui:param name="type" value="#{fuelShiftTransferBean.isFinancingDoc ? fuelShiftTransferBean.bookType : 'shareCreditSales'}" />
                <ui:param name="parameters" value='' /> 
                <ui:param name="columnsize" value='2' /> 
                <ui:param name="form" value='frmAccountBookFilter' /> 
                <ui:param name="overlay" value="olp_account" />
            </ui:include>
        </c:if>

    </h:panelGroup>


    <h:panelGroup id="pngAccountBook"> <!--Cari tahsilat ödeme için -->
        <!-- hızlı cari eklemek ve cari değiştirmek için -->
        <ui:include src="/pages/general/common/accountbook.xhtml" >
            <ui:param name="updateBean" value='#{fuelShiftTransferBean}' />
            <ui:param name="for" value="frmFuelShiftTransfer:tbvFuelShiftTransfer:#{fuelShiftTransferBean.activeIndex}:slcCollectionPayment" />
            <ui:param name="type" value='accountCollectionPayment' />
            <ui:param name="parameters" value='#{[sessionBean.user.lastBranch]}' /> 
            <ui:param name="columnsize" value='2' /> 
            <ui:param name="form" value='frmAccountBookFilterPayment' /> 
            <ui:param name="overlay" value="olp_accountPayment" />
        </ui:include>
    </h:panelGroup>


    <!--Finansman Belgesi-->
    <p:dialog id="dlgFinancingDocument" widgetVar="dlg_FinancingDocument" resizable="false" width="60%" focus="dlgFinancingDocument" responsive="true" dynamic="true" modal="true" closeOnEscape="true">
        <p:ajax event="close" listener="#{fuelShiftTransferBean.bringBooleanValue()}" update="pngBook frmIncomeExpenseBookFilter" global="false"/>
        <ui:include src="/pages/finance/financingdocument/financingdocumentformovement.xhtml" >
            <ui:param name="financingDocument" value="#{fuelShiftTransferBean.selectedFinancingDocument.financingDocument}"/>
            <ui:param name="bean" value='#{fuelShiftTransferBean}' />
            <ui:param name="type" value='#{fuelShiftTransferBean.updateCondition}' />
        </ui:include>
    </p:dialog>

    <p:confirmDialog global="true" class="deleteConfirm MaxWid500"   id="dlgConfirmationFD" widgetVar="dlgConfirmationFD" closeOnEscape="true" responsive="true"   >
        <f:facet name="message">
            <h:outputText value="#{fuelShiftTransferBean.messageFinancing}"  style="white-space: pre-wrap;">
                <i class="icon-trash Fs20 tlbrDeleteBtn" /> 
            </h:outputText>
        </f:facet>
        <p:commandButton action="#{fuelShiftTransferBean.createTempFinancingDocument()}"  onclick="PF('dlgConfirmationFD').hide()"    process="@this"  value="#{loc.yes}"   styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
        <p:commandButton value="#{loc.no}"   type="button" onclick="PF('dlgConfirmationFD').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
    </p:confirmDialog>

    <!--sistemda olmayan pompacılar-->
    <p:dialog id="dlgAttendantnotInSystem" widgetVar="dlg_AttendantnotInSystem" resizable="false" width="25%" focus="dlgAttendantnotInSystem" responsive="true" dynamic="true" transient="true" modal="true" closeOnEscape="true">
        <h:form id="frmAttendantNotInSystem">
            <ui:include src="/pages/general/common/tabgridtoolbar.xhtml" >
                <ui:param name="outputtext" value="#{loc.nonintegratedemployees}"/>
                <ui:param name="bean" value='#{fuelShiftTransferBean}' />
                <ui:param name="update"  value="" />
            </ui:include>
            <p:dataTable var="attendant" value="#{fuelShiftTransferBean.listOfAttendantNotInSystem}">
                <p:column headerText="#{loc.pumpper}">
                    <h:outputText value="#{attendant.attendant}" />
                </p:column>

                <p:column headerText="#{loc.integrationcode}">
                    <h:outputText value="#{attendant.attendantCode}" />
                </p:column>
            </p:dataTable>
        </h:form>
    </p:dialog>

    <!-- Pompacısız Olanlar İçin Borçlandır, Alacaklandır-->
    <p:dialog id="dlgWithoutAttendantFD" widgetVar="dlg_WithoutAttendantFD" resizable="false" width="30%" header="#{loc.attendants}" focus="dlgWithoutAttendantFD" responsive="true" dynamic="true" modal="true" closeOnEscape="true" class="dialogWithTitle">
        <ui:include src="/pages/automation/fuelshift/fuelshiftattendant.xhtml" />
    </p:dialog>


    <!-- Veresiye Dialog-->
    <p:dialog id="dlgPostPaid" widgetVar="dlg_PostPaid" resizable="false" width="40%" focus="dlgPostPaid" responsive="true" dynamic="true" modal="true" closeOnEscape="true" >
        <p:ajax event="close" listener="#{fuelShiftTransferBean.resetDialog()}" global="false"/>
        <h:form>
            <ui:include src="/pages/general/common/processtoolbar.xhtml" >
                <ui:param name="outputtext" value="#{loc.postpaidprocesses}"/>
                <ui:param name="bean" value='#{fuelShiftTransferBean}' />
                <ui:param name="update" value="pgrPostPaidProcess" />
                <ui:param name="renderback" value='false'/>
                <ui:param name="btnDeleteId" value="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.isAutomationTab and !fuelShiftTransferBean.selectedShift.isDeleted}" />
                <ui:param name="btnTestBeforeDeleteId" value="true" />
            </ui:include>
            <h:panelGroup id="pgrPostPaidProcess" layout="block" class="divContent">
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                        <p:outputLabel value="#{loc.postpaiddate}" for="txtCreditDate" class="FontBold Fs12"/>
                        <p:inputText id="txtCreditDate" value="#{fuelShiftTransferBean.selectedFinancingDocument.processDate}" required="true" placeholder="#{loc.creditdate}" readonly="true">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss"/>
                        </p:inputText>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                        <p:outputLabel value="#{loc.customername}" for="txtCustomerName" class="FontBold Fs12"/>
                        <p:inputText id="txtCustomerName" value="#{fuelShiftTransferBean.selectedFinancingDocument.credit.account.name}" required="true" placeholder="#{loc.customername}" readonly="true"/>  
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                        <p:outputLabel value="#{loc.postpaidamount}" for="txtCreditAmount" class="FontBold Fs12"/>
                        <p:inputText id="txtCreditAmount" value="#{fuelShiftTransferBean.selectedFinancingDocument.financingDocument.price}" required="true" placeholder="#{loc.creditamount}" readonly="true" class="TexAlRight">
                            <f:converter converterId="currencyConverter" />
                            <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </p:inputText>
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                        <p:outputLabel value="#{loc.paymentdate}" for="txtDueDate" class="FontBold Fs12"/>
                        <p:inputText id="txtDueDate" value="#{fuelShiftTransferBean.selectedFinancingDocument.credit.dueDate}" required="true" placeholder="#{loc.paymentdate}" readonly="true">  
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss"/>
                        </p:inputText>
                    </div>
                </div>
            </h:panelGroup>
        </h:form>
    </p:dialog>

    <!-- Veresiye SAtışların Listelendiği Dialog-->
    <p:dialog id="dlgCreditSales" widgetVar="dlg_CreditSales"  onHide="$('#frmAccountBookFilter').remove();" resizable="false" width="60%" focus="dlgCreditSales" responsive="true" transient="true"  modal="true" closeOnEscape="true" >
        <ui:include src="/pages/general/common/datagridtoolbardefinition.xhtml" >
            <ui:param name="bean" value="#{fuelShiftCreateCreditBean}"/>
            <ui:param name="update" value=""/> 
            <ui:param name="btnNewId" value="false"/> 
            <ui:param name="datatable" value="frmCreditSales:dtbCreditSales" />   
            <ui:param name="widgetvar" value='creditSalesPF' />
            <ui:param name="form" value='frmToolbarCreditSales' />
            <ui:param name="renderedToggler" value='false'/>       
            <ui:param name="renderedExel" value='false'/>
            <ui:param name="renderedPdf" value='false'/>
            <ui:param name="renderedCheckBox" value="true"/>
            <ui:param name="renderedSave" value="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}"/>
            <ui:param name="labelForCheckBox" value="#{loc.bringallsales}"/>
        </ui:include>

        <h:form id="frmCreditSales">

            <h:panelGroup id="pgrCreditSales" layout="block" class="divContent">
                <p:dataTable id="dtbCreditSales" value="#{fuelShiftCreateCreditBean.listOfObjects}"
                             rowKey="#{shiftSale.id}" emptyMessage="#{loc.norecordsfound}" var="shiftSale" widgetVar="creditSalesPF" filteredValue="#{fuelShiftCreateCreditBean.listOfFilteredObjects}"  
                             class="tabDatatable" >

                    <p:ajax event="page" global="false"/>
                    <p:ajax event="filter" global="false"/>
                    <p:ajax event="rowSelectCheckbox" global="false"  />
                    <p:ajax event="rowUnselectCheckbox" global="false"  />
                    <p:ajax event="toggleSelect" global="false"  />


                    <f:facet  name="footer"     >
                        <p:inputText id="globalFilter" value="#{fuelShiftCreateCreditBean.autoCompleteValue}"  style="display: none" />
                    </f:facet>

                    <p:column headerText="#{loc.processdate}" filterable="true"  filterBy="#{shiftSale.processDate}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.processDate}" >
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                    </p:column>

                    <p:column headerText="#{loc.receiptno}" filterable="true"  filterBy="#{shiftSale.receiptNo}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.receiptNo}" />
                    </p:column>

                    <p:column headerText="#{loc.plate}" filterable="true"  filterBy="#{shiftSale.plate}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.plate}" />
                        <p:commandLink title="#{loc.connectwithaccount}" action="#{fuelShiftCreateCreditBean.connectVehicleToAccount(shiftSale)}" class="Fright" rendered="#{shiftSale.isConnectVehicle}">
                            <i class="fa fa-link Fs14"/>  
                        </p:commandLink> 
                    </p:column>
                    <p:column headerText="#{loc.stock}" filterable="true"  filterBy="#{shiftSale.stockName}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.stockName}" />
                    </p:column>
                    <p:column headerText="#{loc.unitprice}" filterable="true"  filterBy="#{shiftSale.price}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.price}"  style="float:right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="#{loc.quantity}" filterable="true"  filterBy="#{shiftSale.liter}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.liter}"  style="float:right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="type" value="" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="#{loc.totalmoney}" filterable="true"  filterBy="#{shiftSale.totalMoney}" filterMatchMode="contains">
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet> 
                        <h:outputText value="#{shiftSale.totalMoney}"  style="float:right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="#{loc.account}">
                        <p:inputText  value="#{shiftSale.credit.account.name}" onclick="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted ? 'showAccountBook()' : ''}" class="inputPositionForBookFilter" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" placeholder="#{loc.account} " >
                            <p:commandLink  class="commandLinkPositionForBookFilter"  disabled="#{fuelShiftTransferBean.selectedShift.isConfirm or fuelShiftTransferBean.selectedShift.isDeleted}" process="@this" oncomplete="PF('olp_account').loadContents();" >
                                <i class="fa fa-book Fs16 softgray iconPositionForDatatable iconPositionForBookFilter"/>   
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([],'frmAccountBookFilter','olp_account','shareCreditSales')}" />
                                <p:ajax event="click" global="false" listener="#{fuelShiftCreateCreditBean.clickSale(shiftSale.id)}"/>
                            </p:commandLink> 
                            <p:ajax event="click" global="false" listener="#{fuelShiftCreateCreditBean.clickSale(shiftSale.id)}"/>
                        </p:inputText>
                    </p:column>

                </p:dataTable>
            </h:panelGroup>

            <p:remoteCommand name="showAccountBook"  rendered="#{!fuelShiftTransferBean.selectedShift.isConfirm and !fuelShiftTransferBean.selectedShift.isDeleted}" process="@this" oncomplete="PF('olp_account').loadContents()" actionListener="#{accountBookFilterBean.findFilterListLazyLoading([],'frmAccountBookFilter','olp_account','shareCreditSales')}" />
        </h:form>
    </p:dialog>
    <h:form>
        <p:remoteCommand name="openDialog" oncomplete="PF('dlg_AttendantnotInSystem').show()" autoRun="#{fuelShiftTransferBean.isAutoRun}" delay="50" global="false"/>
    </h:form>

    <p:dialog id="dlgApproveShift"  widgetVar="dlg_ApproveShift"  resizable="false" transient="true" focus="dlgApproveShift" closeOnEscape="true" responsive="true"  width="20%" modal="true" >
        <h:form id="frmAproval">  
            <div class="ui-g" >
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <h:outputText class="FontBold Fs14" style="white-space: pre-wrap; color: #ca5959; text-align: center; display: block;"  value="#{loc.areyousureyouwanttoapproveshift}"  />
                </div>  
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <p:selectBooleanCheckbox value="#{fuelShiftTransferBean.isApproveShiftExcel}" style="text-align: center; display: block;" itemLabel="#{loc.createexcel}" class="Fleft" styleClass="Fs13 FontBold checkboxDarkBorder">
                        <p:ajax global="false" listener="#{fuelShiftTransferBean.bringOption(1)}" update="frmAproval"/>
                    </p:selectBooleanCheckbox>
                </div>  
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <p:selectBooleanCheckbox value="#{fuelShiftTransferBean.isApproveShiftPdf}" style="text-align: center; display: block; padding-right: 7px;" itemLabel="#{loc.iscreatedpdf}" class="Fleft" styleClass="Fs13 FontBold checkboxDarkBorder">
                        <p:ajax global="false" listener="#{fuelShiftTransferBean.bringOption(2)}" update="frmAproval"/>
                    </p:selectBooleanCheckbox>
                </div>  
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <p:selectBooleanCheckbox value="#{fuelShiftTransferBean.isPreview}" style="text-align: center; display: block; padding-left: 26px;" itemLabel="#{loc.ispreviewshowed}" class="Fleft" styleClass="Fs13 FontBold checkboxDarkBorder">
                        <p:ajax global="false"/>
                    </p:selectBooleanCheckbox>
                </div>  
                <div class="ui-g-12 ui-md-12 ui-lg-6 TexAlRight">
                    <p:commandButton value="#{loc.yes}" actionListener="#{fuelShiftTransferBean.transferExcelPdf()}"  onclick="PF('dlg_ApproveShift').hide()"  process="@form" styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
                </div>       
                <div class="ui-g-12 ui-md-12 ui-lg-6 TexAlLeft">
                    <p:commandButton value="#{loc.no}" type="button" onclick="PF('dlg_ApproveShift').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
                </div>
            </div>
        </h:form>
    </p:dialog>


    <p:confirmDialog global="true" class="deleteConfirm MaxWid500"   id="dlgConfirmationConnectVehicle" widgetVar="dlgConfirmationConnectVehicle" closeOnEscape="true" responsive="true"   >
        <f:facet name="message">
            <div class="ui-g">
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <h:outputText value="#{loc.areyousuretoconnectthisplatewithselectedaccount}"/>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <h:outputText value="#{loc.account} : #{fuelShiftCreateCreditBean.selectedPlate.account.name}"  style="white-space: pre-wrap; color:black !important"/>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <h:outputText value="#{loc.plate} : #{fuelShiftCreateCreditBean.selectedPlate.plate}"  style="white-space: pre-wrap; color:black !important"/>
                </div>
            </div>

        </f:facet>
        <p:commandButton action="#{fuelShiftCreateCreditBean.saveVehicleToAccount()}"  onclick="PF('dlgConfirmationConnectVehicle').hide()"    process="@this"  value="#{loc.yes}"   styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"  style="margin-right: 5px" />
        <p:commandButton value="#{loc.no}"   type="button" onclick="PF('dlgConfirmationConnectVehicle').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" style="margin-left: 5px"/>
    </p:confirmDialog>


    <script type="text/javascript">
        function transferExcel() {
            document.getElementById("frmFuelShiftTransfer:btnSecretExcel").click();
        }
        function transferPdf() {
            document.getElementById("frmFuelShiftTransfer:btnSecretPdf").click();
        }
    </script>


</ui:composition>



