<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:form id="frmFuelCardTypeProcess" >


        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="bean" value='#{cardTypeBean}' />
            <ui:param name="outputtext" value="#{loc.fuelcardtypeprocesses}"/>
            <ui:param name="update" value="pgrFuelCardTypeProcess " />
            <ui:param name="btnSaveId" value="#{cardTypeBean.getRendered(355, 0)}" />
            <ui:param name="btnDeleteId" value='false' /> 
            <c:if test="#{cardTypeBean.processType==2}">
                <ui:param name="btnDeleteId" value='#{cardTypeBean.getRendered(356, 0)}' /> 
            </c:if>
        </ui:include>

        <h:panelGroup id="pgrFuelCardTypeProcess" layout="block" >
            <div class="ui-g divContent">

                <div class="#{(cardTypeBean.changeAccountBook and cardTypeBean.changeBankAccount)? 'ui-g-12 ui-md-6 ui-lg-2' :
                              (cardTypeBean.changeAccountBook and !cardTypeBean.changeBankAccount) ? 'ui-g-12 ui-md-6 ui-lg-3' : 'ui-g-12 ui-md-6 ui-lg-4' } ">
                    <p:outputLabel value="#{loc.saletype}" for="slcSaleType" styleClass="Fs12 FontBold"/>     
                    <p:selectOneMenu id="slcSaleType" value="#{cardTypeBean.selectedObject.saleType.id}" required="true" >
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="" itemDisabled="true"  noSelectionOption="true"  />
                        <f:selectItems value="#{cardTypeBean.listForSaleTypeList}"  var="sale" itemLabel="#{sale.name}" itemValue="#{sale.id}" />
                        <p:ajax event="change" update="pgrFuelCardTypeProcess" listener="#{cardTypeBean.changeEvent()}" global="false"/>
                    </p:selectOneMenu>
                </div>

                <div class="#{(cardTypeBean.changeAccountBook and cardTypeBean.changeBankAccount)?' ui-g-12 ui-md-6 ui-lg-2' : 
                              (cardTypeBean.changeAccountBook and !cardTypeBean.changeBankAccount) ? 'ui-g-12 ui-md-6 ui-lg-3' : 'ui-g-12 ui-md-6 ui-lg-4'} ">
                    <p:outputLabel value="#{loc.itsname}" for="txtName" styleClass="Fs12 FontBold"/>
                    <p:inputText id="txtName" value="#{cardTypeBean.selectedObject.name}" required="true" placeholder="#{loc.name} ">
                        <p:ajax  global="false" />
                    </p:inputText>

                </div>

                <div class="#{(cardTypeBean.changeAccountBook and cardTypeBean.changeBankAccount) ?' ui-g-12 ui-md-6 ui-lg-2' : 
                              (cardTypeBean.changeAccountBook and !cardTypeBean.changeBankAccount) ? 'ui-g-12 ui-md-6 ui-lg-3' : 'ui-g-12 ui-md-6 ui-lg-4'}">
                    <p:outputLabel value="#{loc.itsnumber}" for="txtTypeNo" styleClass="Fs12 FontBold"/>
                    <p:inputText id="txtTypeNo" value="#{cardTypeBean.selectedObject.typeNo}" required="true" placeholder="#{loc.itsnumber} ">
                        <p:ajax  event="keyup" update="pgrFuelCardTypeProcess" listener="#{cardTypeBean.changeEvent()}" global="false"/>
                    </p:inputText>

                </div>
                <div class="#{cardTypeBean.changeAccountBook and cardTypeBean.changeBankAccount ? 'ui-g-6' : 'ui-g-3'}">

                    <h:panelGroup  rendered="#{cardTypeBean.changeAccountBook ? true : false }">
                        
                        <div class="#{cardTypeBean.changeBankAccount ? 'ui-g-12 ui-md-6 ui-lg-6' : 'ui-g-12 ui-md-6 ui-lg-12'}" >
                            <p:outputLabel value="#{loc.currentname}" for="txtCustomer"  styleClass="Fs12 FontBold" />

                            <p:inputText  id="txtCustomer" onclick="showAccountBook()" value="#{cardTypeBean.selectedObject.account.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" placeholder="#{loc.choose}"  >   
                            </p:inputText>
                            <p:commandLink id="btnCustomer" process="@this" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_account').loadContents();">
                                <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([sessionBean.user.lastBranch],'frmAccountBookFilter','olp_account','')}" />
                            </p:commandLink>
                        </div>

                    </h:panelGroup>


                    <h:panelGroup rendered="#{cardTypeBean.changeBankAccount ? true : false}">
                        <div class="#{cardTypeBean.changeAccountBook ? 'ui-g-12 ui-md-6 ui-lg-6' : 'ui-g-12 ui-md-6 ui-lg-12'}"> 
                            <p:outputLabel value="#{loc.bankaccount}" for="slcBankAccount" styleClass="Fs12 FontBold" />
                            <p:selectOneMenu id="slcBankAccount" value="#{cardTypeBean.selectedObject.bankacount.id}"  filter="true" styleClass="Wid97" required="true" >
                                <f:selectItem itemLabel="#{loc.choose}" itemValue="0" /> 
                                <f:selectItems value="#{cardTypeBean.listOfBankAccount}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name} - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>

                </div>

            </div>

        </h:panelGroup>
        <p:remoteCommand name="showAccountBook" process="@this" oncomplete="PF('olp_account').loadContents();" actionListener="#{accountBookFilterBean.findFilterListLazyLoading([sessionBean.user.lastBranch],'frmAccountBookFilter','olp_account','')}" />

    </h:form>





</ui:composition>


