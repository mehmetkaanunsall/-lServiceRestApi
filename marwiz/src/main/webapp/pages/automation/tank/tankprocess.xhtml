
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions" 
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:form id="frmTankProcess">
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.tankprocesses}"/>
            <ui:param name="bean" value='#{tankProcessBean}' />
            <ui:param name="update" value="frmTankProcess frmTankProcess:pgrTankProcess" />
            <ui:param name="btnSaveId" value='#{tankProcessBean.getRendered(165, 0)}' />     
            <ui:param name="renderback" value='true'/>
            <c:if test="#{tankProcessBean.processType==2}">
                <ui:param name="renderSelectedObject" value='true'/>
                <ui:param name="selectedObjectName" value="#{tankProcessBean.selectedObject.name}"/>
                <ui:param name="btnDeleteId" value='#{tankProcessBean.getRendered(166, 0)}' />
                <ui:param name="btnTestBeforeDeleteId" value='true' />
            </c:if>
        </ui:include>

        <h:panelGroup id="pgrTankProcess" layout="block">
            <div class="ui-g divContent">
                <div class="ui-g-12 panelToggle">
                    <p:focus for="txtTankName"/>

                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.tankname}" for="txtTankName" class="FontBold Fs12"/>
                        <p:inputText id="txtTankName" value="#{tankProcessBean.selectedObject.name}" required="true" placeholder="#{loc.tankname}">
                            <p:keyFilter regEx="/[^\\\{\}\[\]\,\:\u0022]/" preventPaste="false" />
                            <f:validateRegex pattern="[^\\\{\}\[\]\,\:\u0022]*" />
                        </p:inputText>
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.tankcode}" for="txtTankCode" class="FontBold Fs12"/>
                        <p:inputText id="txtTankCode" value="#{tankProcessBean.selectedObject.code}" required="true" placeholder="#{loc.tankcode}"/>  
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.capacity}" for="txtCapacity" class="Fs12 FontBold" /> 
                        <p:inputNumber id="txtCapacity" value="#{tankProcessBean.selectedObject.capacity}" minValue="0"
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                       roundMethod="D"  symbolPosition="#{sessionBean.locale=='tr' ? 's': 'p'}"
                                       required="true" class="Wid90 TexAlRight" placeholder="#{loc.capacity}"  >                 
                        </p:inputNumber>
                    </div>


                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.minamount}" for="txtMinCapacity" class="Fs12 FontBold" /> 
                        <p:inputNumber id="txtMinCapacity" value="#{tankProcessBean.selectedObject.minCapacity}" minValue="0"
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                       roundMethod="D"  symbolPosition="#{sessionBean.locale=='tr' ? 's': 'p'}"
                                       required="true" class="Wid90 TexAlRight" placeholder="#{loc.minamount}"  >                 
                        </p:inputNumber>
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.stock}" for="slcStock" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcStock" value="#{tankProcessBean.selectedWareHouseItem.stock.id}" required="true">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true" />
                            <f:selectItems value="#{tankProcessBean.listOfWareHouseItem}" var="warehouse" itemLabel="#{warehouse.stock.name}" itemValue="#{warehouse.stock.id}"  />
                        </p:selectOneMenu> 
                    </div>



                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.description}" for="txtDescription" class="FontBold Fs12"/>
                        <p:inputText id="txtDescription" value="#{tankProcessBean.selectedObject.description}" placeholder="#{loc.description}"/>  
                    </div>


                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.concentrationrate}" for="txtConcentrationRate" class="Fs12 FontBold" /> 
                        <p:inputNumber id="txtConcentrationRate" value="#{tankProcessBean.selectedObject.concentrationRate}" minValue="0"
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                       roundMethod="D"  symbolPosition="#{sessionBean.locale=='tr' ? 's': 'p'}" symbol=" %"
                                       required="true" class="Wid90 TexAlRight" placeholder="#{loc.concentrationrate}"  >                 
                        </p:inputNumber>
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-3">
                        <p:outputLabel value="#{loc.statu}" for="slcStatu" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcStatu" value="#{tankProcessBean.selectedObject.status.id}" required="true" >
                            <f:selectItems value="#{sessionBean.getStatus(7)}" var="statu" itemLabel="#{statu.nameMap.get(sessionBean.langId).name}" itemValue="#{statu.id}"  />
                        </p:selectOneMenu>
                    </div>

                </div>
            </div>
        </h:panelGroup>
    </h:form>

    <div class="EmptyBox10" />

    <p:tabView id="tbvTankProc" activeIndex="#{marwiz.tabIndex}" rendered="#{tankProcessBean.processType==2 and (tankProcessBean.getRendered(46, 1) or tankProcessBean.getRendered(47, 1))}" scrollable="true" dynamic="true" cache="true">

        <p:ajax event="tabChange"  listener="#{tankProcessBean.onTabChange}" />
        <p:tab id="tab46" title="#{loc.movements}" rendered="#{tankProcessBean.getRendered(46, 1)}">
            <c:if test="#{tankProcessBean.activeIndex==46}">
                <ui:include src="/pages/automation/tank/tankmovementtab.xhtml"/>
            </c:if>
        </p:tab>

        <p:tab id="tab47" title="#{loc.nozzles}" rendered="#{tankProcessBean.getRendered(47, 1)}">
            <div class="EmptyBox20" />
            <c:if test="#{tankProcessBean.activeIndex==47}">
                <ui:include src="/pages/automation/nozzle/nozzle.xhtml"/>
            </c:if>
        </p:tab>
    </p:tabView>



    <p:confirmDialog global="true" class="deleteConfirm"  widgetVar="dlgConfirm" width="50%" showEffect="fade" hideEffect="fade"  closeOnEscape="true" responsive="true">
        <c:if test="#{tankProcessBean.activeIndex==46}">
            <f:facet name="message">
                <h:outputText value="#{loc.theselectedproductswillbetransferredas0balancetothewarehouse}"  style="white-space: pre-wrap;">
                    <i class="icon-trash Fs20 tlbrDeleteBtn" /> 
                </h:outputText>
            </f:facet>
            <p:commandButton value="#{loc.yes}" actionListener="#{warehouseStockTabBean.addStock()}" async="true" global="true" onclick="PF('dlgConfirm').hide()"   styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
            <p:commandButton value="#{loc.no}"  onclick="PF('dlgConfirm').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
        </c:if>
    </p:confirmDialog>



</ui:composition>
