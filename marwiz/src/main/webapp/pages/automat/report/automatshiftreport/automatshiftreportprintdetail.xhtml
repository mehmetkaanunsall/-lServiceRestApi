<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:form id="print">

        <p:commandButton id="BtnPrint" value="BtnPrint"  type="button" icon="ui-icon-print" style="display:none;">
            <p:printer target="print" /> 
        </p:commandButton>

        <h:panelGroup  id="shiftno">
            <div class="ui-g-12 ui-md-12 "  >
                <p:panel id="outPanel" style="height: 80px">
                    <div class="ui-g-12 ui-md-6 "  >
                        <h:outputText style="text-align: left !important;" value="#{loc.shiftno}: #{automatShiftReportPrintDetailBean.selectedObject.shiftNo}"/>
                        <br/>
                        <h:outputText style="text-align: left !important;" value=" #{loc.stationname}: #{sessionBean.user.lastBranch.name}"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 " style="margin-top: -2px !important">
                        <h:outputText   value="#{loc.startdate}:"/>
                        <h:outputText   value="#{automatShiftReportPrintDetailBean.selectedObject.beginDate}">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                        <h:outputText  style="float: right;"   value="#{automatShiftReportPrintDetailBean.selectedObject.endDate}">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                        <h:outputText style="float: right;"  value=" #{loc.enddate}:"/>
                    </div>
                </p:panel>
            </div>
        </h:panelGroup>
        <div class="EmptyBox5"  />

        <h:panelGroup id="pgrStationUscShiftPrintDetailDatatable" >
            <h:panelGroup >
                <h:form id="frmStationUscShiftPrintDetailDatatable">
                    <p:dataTable  id="dtbSalesType" var="paymentType" widgetVar="salestypePF" emptyMessage="#{loc.norecordsfound}"  value="#{automatShiftReportPrintDetailBean.listOfPaymentType}"
                                  rows="#{sessionBean.user.defualtGridSize}" rowKey="#{paymentType.automatSalesItem.paymentType}" 
                                  rowsPerPageTemplate="#{sessionBean.user.gridSize}"  currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="false"
                                  sortBy="#{paymentType.automatSalesItem.paymentType}" expandableRowGroups="true" class="rowGroupTable" >


                        <f:facet name="header" >
                            <h:outputText  style="padding-left:50%;" value="#{loc.paymenttype}"/>
                        </f:facet>

                        <p:headerRow>
                            <p:column >
                                <h:outputText value="#{paymentType.automatSalesItem.paymentType ==0 ? loc.cash : paymentType.automatSalesItem.paymentType ==1 ? loc.mobilepayment : paymentType.automatSalesItem.paymentType ==2 ? loc.barcode : paymentType.automatSalesItem.paymentType ==3 ? 'OPT' : ''} ("/>
                                <h:outputText converter="javax.faces.Integer"  value="#{automatShiftReportPrintDetailBean.calcTotal(paymentType.automatSalesItem.paymentType,5)}"/>
                                <h:outputText value=") "/>
                            </p:column>

                            <p:column>

                                <h:outputText  style="float: right" value="#{automatShiftReportPrintDetailBean.calcTotal(paymentType.automatSalesItem.paymentType,1)}" >
                                    <f:converter converterId="currencyConverter" />
                                    <f:attribute name="unit"  value="#{paymentType.automatSalesItem.stock.unit}"/>
                                    <f:attribute name="type" value="unit" />
                                </h:outputText>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{automatShiftReportPrintDetailBean.calcTotal(paymentType.automatSalesItem.paymentType,2)}" style="float: right">
                                    <f:converter converterId="currencyConverter" />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>
                            </p:column>
                        </p:headerRow>     

                        <p:column  id="clmSalesType" headerText="#{loc.stock}" >
                            <h:outputText  value="#{paymentType.automatSalesItem.stock.id==0 ? loc.forgottenmoney :paymentType.automatSalesItem.stock.name} (#{paymentType.totalCount})" >
                                <f:convertNumber maxFractionDigits="#{sessionBean.user.lastBranch.currencyrounding}"  />
                            </h:outputText>
                        </p:column>

                        <p:column id="clmSalesAmount" headerText="#{loc.salesamount}">  
                            <h:outputText  style="float: right" value="#{paymentType.automatSalesItem.operationAmount}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="unit"  value="#{paymentType.automatSalesItem.stock.unit}"/>
                                <f:attribute name="type" value="unit" />
                            </h:outputText>
                        </p:column>

                        <p:column id="clmSalesPrice" headerText="#{loc.salesprice}"> 
                            <h:outputText  style="float: right" value="#{paymentType.automatSalesItem.totalMoney}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                <f:attribute name="type" value="currency" />
                            </h:outputText>
                        </p:column>


                        <p:columnGroup type="footer" class="Fright">
                            <p:row>
                                <p:column colspan="1" style="text-align:right; font-weight: bold; " >
                                    <f:facet name="footer"  >
                                        <h:outputText value="#{loc.sum} " style="text-align:right; font-weight: bold; " />
                                    </f:facet>
                                </p:column>

                                <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                                    <f:facet name="footer"  >
                                        <h:outputText  style="text-align:right; font-weight: bold; " value="#{automatShiftReportPrintDetailBean.calculateSalesAmount(1)}" >
                                        </h:outputText>
                                    </f:facet>
                                </p:column>

                                <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                                    <f:facet name="footer"  >
                                        <h:outputText  style="text-align:right; font-weight: bold; " value="#{automatShiftReportPrintDetailBean.calcTotal(0,2)}" >
                                            <f:converter converterId="currencyConverter" />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </f:facet>
                                </p:column>

                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>  
                    <div class="EmptyBox10"/>

                    <p:dataTable  id="dtbProducts" var="product" reflow="false" widgetVar="productPF" emptyMessage="#{loc.norecordsfound}"
                                  rowKey="#{product.automatSalesItem.stock.id}"  sortBy="#{product.automatSalesItem.stock.id}" class="rowGroupTable" expandableRowGroups="true"  value="#{automatShiftReportPrintDetailBean.listOfProduct}" >
                        <f:facet name="header" >
                            <h:outputText  style="padding-left: 50%;" value="  #{loc.products}"/>
                        </f:facet>
                        <p:headerRow>
                            <p:column>
                                <h:outputText value="#{product.automatSalesItem.stock.id== 0 ? loc.forgottenmoney :product.automatSalesItem.stock.name}  ("/>
                                <h:outputText converter="javax.faces.Integer"  value="#{automatShiftReportPrintDetailBean.calcProduct(product.automatSalesItem.stock.id,3)}"/>
                                <h:outputText value=")"/>
                            </p:column>

                            <p:column>
                                <h:outputText style="float:right;"  value="#{automatShiftReportPrintDetailBean.calcProduct(product.automatSalesItem.stock.id,1)}" >
                                    <f:converter converterId="currencyConverter" />
                                    <f:attribute name="unit"  value="#{product.automatSalesItem.stock.unit}"/>
                                    <f:attribute name="type" value="unit" />
                                </h:outputText>  
                            </p:column>

                            <p:column>

                            </p:column>

                            <p:column>
                                <h:outputText  style="float:right " value="#{automatShiftReportPrintDetailBean.calcProduct(product.automatSalesItem.stock.id,2)}" >
                                    <f:converter converterId="currencyConverter" />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>
                            </p:column>
                        </p:headerRow>        


                        <p:column id="clmProduct"  headerText="#{loc.product}" >
                            <h:outputText value="#{product.automatSalesItem.stock.id== 0 ? loc.forgottenmoney :product.automatSalesItem.stock.name} (#{product.totalCount})"/>
                        </p:column>


                        <p:column id="clmProductSalesAmount"  headerText="#{loc.salesamount}">
                            <h:outputText  style="float: right" value="#{product.automatSalesItem.operationAmount}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="unit"  value="#{product.automatSalesItem.stock.unit}"/>
                                <f:attribute name="type" value="unit" />
                            </h:outputText>
                        </p:column>

                        <p:column id="clmUnitPrice" headerText="#{loc.unitprice}" >
                            <h:outputText  style="float:right; " value="#{product.automatSalesItem.unitPrice}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                <f:attribute name="type" value="currency" />
                            </h:outputText>
                        </p:column>

                        <p:column id="clmProductSalesPrice"  headerText="#{loc.salesprice}" >
                            <h:outputText  style="float:right; " value="#{product.automatSalesItem.totalMoney}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                <f:attribute name="type" value="currency" />
                            </h:outputText>
                        </p:column>
                        <p:columnGroup type="footer" class="Fright">
                            <p:row>
                                <p:column style="text-align:right; font-weight: bold; " footerText="#{loc.sum} :" />
                                <p:column style="text-align:right; font-weight: bold; "  >
                                    <f:facet name="footer"  >
                                        <h:outputText  style="text-align:right; font-weight: bold; " value="#{automatShiftReportPrintDetailBean.calculateSalesAmount(2)}" >

                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                                <p:column style="text-align:right; font-weight: bold; " footerText="" />
                                <p:column style="text-align:right; font-weight: bold; ">
                                    <f:facet name="footer"  >
                                        <h:outputText  style="text-align:right; font-weight: bold; " value="#{automatShiftReportPrintDetailBean.calcProduct(0,5)}" >
                                            <f:converter converterId="currencyConverter" />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>  

                    <div class="EmptyBox10"/>

                    <p:dataTable  id="dtbPlatform" var="product" reflow="false" widgetVar="productPF" emptyMessage="#{loc.norecordsfound}"
                                  rowKey="#{product.automatSalesItem.platform.id}"  sortBy="#{product.automatSalesItem.platform.id}" class="rowGroupTable" expandableRowGroups="true"  value="#{automatShiftReportPrintDetailBean.listOfPlatform}" >
                        <f:facet name="header" >
                            <h:outputText  style="padding-left: 50%;" value="  #{loc.platform}"/>
                        </f:facet>
                        <p:headerRow>
                            <p:column>
                                <h:outputText value="#{product.automatSalesItem.washingMachine.name} - #{loc.platform} :"/>  

                                <h:outputText value="#{product.automatSalesItem.platform.platformNo}  ("/>
                                <h:outputText converter="javax.faces.Integer"  value="#{automatShiftReportPrintDetailBean.calcPlatform(product.automatSalesItem.platform.id,3)}"/>
                                <h:outputText value=")"/>
                            </p:column>
                            <p:column>
                                <h:outputText style="float:right;"  value="#{automatShiftReportPrintDetailBean.calcPlatform(product.automatSalesItem.platform.id,1)}" >
                                    <f:converter converterId="currencyConverter" />
                                    <f:attribute name="unit"  value="#{product.automatSalesItem.stock.unit}"/>
                                    <f:attribute name="type" value="unit" />
                                </h:outputText>  

                            </p:column>

                            <p:column>
                                <h:outputText  style="float:right; " value="#{automatShiftReportPrintDetailBean.calcPlatform(product.automatSalesItem.platform.id,2)}" >
                                    <f:converter converterId="currencyConverter" />
                                    <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                    <f:attribute name="type" value="currency" />
                                </h:outputText>

                            </p:column>
                        </p:headerRow>        


                        <p:column id="clmProduct"  headerText="#{loc.platform}" >
                            <h:outputText value="#{product.automatSalesItem.stock.id==0 ? loc.forgottenmoney : product.automatSalesItem.stock.name} (#{product.totalCount})"/>
                        </p:column>


                        <p:column id="clmProductSalesAmount"  headerText="#{loc.salesamount}">
                            <h:outputText style="float:right;"  value="#{product.automatSalesItem.operationAmount}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="unit"  value="#{product.automatSalesItem.stock.unit}"/>
                                <f:attribute name="type" value="unit" />
                            </h:outputText>
                        </p:column>

                        <p:column id="clmProductSalesPrice"  headerText="#{loc.salesprice}" >
                            <h:outputText  style="float:right; " value="#{product.automatSalesItem.totalMoney}" >
                                <f:converter converterId="currencyConverter" />
                                <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                <f:attribute name="type" value="currency" />
                            </h:outputText>
                        </p:column>
                        <p:columnGroup type="footer" class="Fright">
                            <p:row>
                                <p:column style="text-align:right; font-weight: bold; " footerText="#{loc.sum} :" />
                                <p:column style="text-align:right; font-weight: bold; "  >
                                    <f:facet name="footer"  >
                                        <h:outputText  style="text-align:right; font-weight: bold; " value="#{automatShiftReportPrintDetailBean.calculateSalesAmount(3)}" >

                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                                <p:column style="text-align:right; font-weight: bold; ">
                                    <f:facet name="footer"  >
                                        <h:outputText  style="text-align:right; font-weight: bold; " value="#{automatShiftReportPrintDetailBean.calcPlatform(0,2)}" >
                                            <f:converter converterId="currencyConverter" />
                                            <f:attribute name="currency"  value="#{sessionBean.user.lastBranch.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>

                </h:form>

            </h:panelGroup>
        </h:panelGroup>
    </h:form>

    <script type="text/javascript">




        $(document).ready(function () {
            window.onload = my_code();
        });

        function my_code() {
            document.getElementById('print:BtnPrint').click();
        }



    </script>


</ui:composition>



