<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions" 
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:include  src="/pages/system/authorize/newauthorize.xhtml"   >
        <ui:param name="bean" value='#{authorizeProcessBean}' />

    </ui:include>

    <div class="EmptyBox10"></div>

    <p:tabView id="tbvModules" rendered="#{authorizeProcessBean.getRendered(51, 1) or authorizeProcessBean.getRendered(52, 1) or authorizeProcessBean.getRendered(79, 1)}" scrollable="true" dynamic="true" cache="true">       
        <p:ajax event="tabChange" listener="#{authorizeProcessBean.onTabChange}"  global="false"/> 
        <ui:include src="authorizeauthorizetab.xhtml"/>

        <p:tab id="tab52" title="#{loc.users}" rendered="#{authorizeProcessBean.getRendered(52, 1)}"> 
            <c:if test="#{authorizeProcessBean.activeIndex==52}">               
                <ui:include src="authorizeuserstab.xhtml"/>
            </c:if>
        </p:tab>

        <p:tab id="tab79" title="#{loc.history}" rendered="#{authorizeProcessBean.getRendered(79, 1)}">
            <c:if test="#{authorizeProcessBean.activeIndex==79}">
                <ui:include src="/pages/system/authorize/authorizehistorytab.xhtml" >
                    <ui:param name="bean" value='#{historyTabBean}' />
                    <c:set var="createdPerson" value='#{authorizeHistoryTabBean.selectedAuthorize.userCreated.fullName}- #{authorizeHistoryTabBean.selectedAuthorize.userCreated.username}' scope="request"/>
                    <c:set var="createdTime" value='#{sessionBean.convertDateTime(authorizeHistoryTabBean.selectedAuthorize.dateCreated)}'  scope="request"/>
                    <c:set var="rowId" value="#{authorizeHistoryTabBean.selectedAuthorize.id}" scope="request" /> 
                    <c:set var="tableName" value="general.authorize" scope="request" /> 
                </ui:include>
            </c:if>
        </p:tab>
    </p:tabView> 

    <p:dialog id="dlgUserProcess" widgetVar="dlg_userprocess" resizable="false" width="20%" focus="dlgUserProcess" responsive="true" dynamic="true" closeOnEscape="true" modal="true">
        <c:if test="#{authorizeProcessBean.activeIndex==52}">
            <ui:include src="/pages/system/authorize/authorizeuserprocess.xhtml"/>
        </c:if>
    </p:dialog>


    <p:dialog id="dlgHistoryDetail" widgetVar="dlg_historyDetail" modal="true" resizable="false" width="40%" focus="dlgHistoryDetail" responsive="true" closeOnEscape="true">
        <c:if test="#{authorizeProcessBean.activeIndex==79}">
            <ui:include src="authorizehistorydetail.xhtml">
                <ui:param name="bean" value='#{authorizeHistoryTabBean}' />
            </ui:include>
        </c:if>
    </p:dialog> 

</ui:composition>
