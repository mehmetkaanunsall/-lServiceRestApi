<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <p:tab id="tab51" title="#{loc.authorization}" rendered="#{authorizeTabBean.isModuleTab}">  
        <c:if test="#{authorizeProcessBean.activeIndex==51 or authorizeProcessBean.activeIndex==0}">  
            <h:form id="frmAuthorizationTab1">
                <div class="ContainerIndent">
                    <p:pickList id="pckModule" class="authorizationPage" var="Module" value="#{authorizeTabBean.moduleList}" addAllLabel="#{loc.addall}" removeAllLabel="#{loc.removeall}" addLabel="#{loc.add}" removeLabel="#{loc.remove}"
                                itemValue="#{Module}" itemDisabled="#{authorizeTabBean.authorize.isAdmin ? Module.id==2 : 'false'}" itemLabel="#{Module}" responsive="true" converter="entityConverter" >

                        <p:ajax global="false" event="transfer" listener="#{authorizeTabBean.onTransfer}"/>

                        <f:facet name="sourceCaption">#{loc.unauthorizedmodules}</f:facet>
                        <f:facet name="targetCaption">#{loc.authorizedmodules}</f:facet>


                        <p:column class="Wid90">
                            <h:outputText value="#{Module.getNameMap().get(sessionBean.langId).getName()}"  />
                        </p:column>
                        <p:column class="Wid10" >
                            <p:commandLink actionListener="#{authorizeTabBean.passParameterToAuthorize}"  class="Fright" update="tbvModules">
                                <i class="fa fa-search"/>
                                <f:param name="module" value="#{Module.id}"/>
                            </p:commandLink>
                        </p:column>



                    </p:pickList>
                </div>
            </h:form>
        </c:if>
    </p:tab>

    <p:tab id="tab0" title="#{loc.authorization}" rendered="#{!authorizeTabBean.isModuleTab}"> 
        <c:if test="#{authorizeProcessBean.activeIndex==51 or authorizeProcessBean.activeIndex==0}">  
            <h:form id="frmAuthorizationTab2">
                <div class="ContainerIndent">

                    <p:toolbar>
                        <f:facet name="left">
                            <p:commandLink class="Fleft" update="tbvModules treProcess treCard treReport treDefinition" process="@this" actionListener="#{authorizeTabBean.goToPcrdForSelectedModule(false)}">
                                <i class="icon-reply-outline Fs20 tlbrBackBtn"/>   
                            </p:commandLink>   
                            <h:outputText value="#{authorizeTabBean.module.nameMap.get(sessionBean.langId).getName()}" class="outputTextFont Fright"/>
                        </f:facet>

                        <f:facet name="right">
                            <p:commandLink id="btn19" class="Fright" process="@this" rendered="#{authorizeTabBean.getRendered(267, 0)}" actionListener="#{authorizeTabBean.save()}" update="tbvModules grwProcessMessage">
                                <i class="fa fa-save Fs20 MarTop5 tlbrSaveBtn"/>
                            </p:commandLink>    
                        </f:facet>

                    </p:toolbar>



                    <div class="ui-g">
                        <div class="divContent ui-g-12">

                            <p:panelGrid id="grdPcrd" columns="4" layout="grid" style="border-top: 0px !important;" class="grdAuthorizeColor panelGridNoBorder">

                                <p:panel class="panelSizeForTreeScroll">
                                    <f:facet name="header">
                                        #{loc.process}
                                        <p:selectBooleanCheckbox id="sbcProcess" class="Fright" value="#{authorizeTabBean.isSelectAllProcess}">
                                            <p:ajax update="treProcess" listener="#{authorizeTabBean.selectAll(0)}" global="false" />
                                            <p:tooltip for="sbcProcess" value="#{loc.selectall}"/>
                                        </p:selectBooleanCheckbox> 

                                    </f:facet>

                                    <p:tree id="treProcess"  value="#{authorizeTabBean.rootProcess}"  propagateSelectionUp="false" showUnselectableCheckbox="true"  var="Page" selectionMode="checkbox" dynamic="true" class="panelGridNoBorder treeScroll">                    

                                        <p:ajax event="select"  listener="#{authorizeTabBean.onNodeSelect}" global="false"/>
                                        <p:ajax event="unselect" listener="#{authorizeTabBean.onNodeUnSelect}" global="false" />

                                        <p:treeNode class="authorizationPage" type="folder" expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed" >
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).name}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="page" icon="ui-icon-document">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="tab" icon="fa fa-bars lightgray">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="button" icon="fa fa-dot-circle-o lightgray">
                                            <h:outputText value="#{authorizeTabBean.btnNameToPropertiesFile(Page.name)}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="childNode" rendered="false">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>
                                    </p:tree>

                                </p:panel>

                                <p:panel class="panelSizeForTreeScroll">


                                    <f:facet name="header">
                                        #{loc.card} 
                                        <p:selectBooleanCheckbox id="sbcCard" class="Fright" value="#{authorizeTabBean.isSelectAllCard}">
                                            <p:ajax update="treCard" listener="#{authorizeTabBean.selectAll(1)}" global="false" />
                                        </p:selectBooleanCheckbox> 
                                        <p:tooltip for="sbcCard" value="#{loc.selectall}"/>
                                    </f:facet>


                                    <p:tree id="treCard" value="#{authorizeTabBean.rootCard}" var="Page" propagateSelectionUp="false" showUnselectableCheckbox="true" selectionMode="checkbox" dynamic="true" class="panelGridNoBorder treeScroll">  


                                        <p:ajax event="select"  listener="#{authorizeTabBean.onNodeSelect}" global="false"/>
                                        <p:ajax event="unselect" listener="#{authorizeTabBean.onNodeUnSelect}" global="false"/>

                                        <p:treeNode class="authorizationPage" type="folder" expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed" >
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).name}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="page" icon="ui-icon-document">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="tab" icon="fa fa-bars lightgray">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="button" icon="fa fa-dot-circle-o lightgray">
                                            <h:outputText value="#{authorizeTabBean.btnNameToPropertiesFile(Page.name)}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="childNode" rendered="false">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                    </p:tree>

                                </p:panel>


                                <p:panel class="panelSizeForTreeScroll">
                                    <f:facet name="header">
                                        #{loc.report}
                                        <p:selectBooleanCheckbox id="sbcPeport" class="Fright" value="#{authorizeTabBean.isSelectAllReport}">
                                            <p:ajax update="treReport" listener="#{authorizeTabBean.selectAll(2)}" global="false" />
                                            <p:tooltip for="sbcPeport" value="#{loc.selectall}"/>
                                        </p:selectBooleanCheckbox> 
                                    </f:facet>

                                    <p:tree id="treReport" value="#{authorizeTabBean.rootReport}" var="Page" propagateSelectionUp="false" showUnselectableCheckbox="true" selectionMode="checkbox" dynamic="true" class="panelGridNoBorder treeScroll">                    
                                        <p:ajax event="select"  listener="#{authorizeTabBean.onNodeSelect}" global="false"/>
                                        <p:ajax event="unselect" listener="#{authorizeTabBean.onNodeUnSelect}" global="false"/>

                                        <p:treeNode class="authorizationPage" type="folder" expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed" >
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).name}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="page" icon="ui-icon-document">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="tab" icon="fa fa-bars lightgray">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="button" icon="fa fa-dot-circle-o lightgray">
                                            <h:outputText value="#{authorizeTabBean.btnNameToPropertiesFile(Page.name)}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="childNode" rendered="false">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>
                                    </p:tree>
                                </p:panel>



                                <p:panel class="panelSizeForTreeScroll">

                                    <f:facet name="header">
                                        #{loc.definition}
                                        <p:selectBooleanCheckbox id="sbcDefinition" class="Fright" value="#{authorizeTabBean.isSelectAllDefinition}">
                                            <p:ajax update="treDefinition" listener="#{authorizeTabBean.selectAll(3)}" global="false" />
                                            <p:tooltip for="sbcDefinition" value="#{loc.selectall}"/>
                                        </p:selectBooleanCheckbox> 
                                    </f:facet>

                                    <p:tree id="treDefinition" value="#{authorizeTabBean.rootDefinition}" showUnselectableCheckbox="true" var="Page" propagateSelectionUp="false" selectionMode="checkbox" dynamic="true" class="panelGridNoBorder treeScroll">                    

                                        <p:ajax event="select"  listener="#{authorizeTabBean.onNodeSelect}" global="false"/>
                                        <p:ajax event="unselect" listener="#{authorizeTabBean.onNodeUnSelect}" global="false" />

                                        <p:treeNode class="authorizationPage" type="folder" expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed" >
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).name}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="page" icon="ui-icon-document">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).name}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="tab" icon="fa fa-bars lightgray">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="button" icon="fa fa-dot-circle-o lightgray">
                                            <h:outputText value="#{authorizeTabBean.btnNameToPropertiesFile(Page.name)}" />
                                        </p:treeNode>

                                        <p:treeNode class="authorizationPage" type="childNode" rendered="false">
                                            <h:outputText value="#{Page.nameMap.get(sessionBean.langId).getName()}" />
                                        </p:treeNode>
                                    </p:tree>
                                </p:panel>  



                            </p:panelGrid>


                        </div>
                    </div>
                </div>
            </h:form>
        </c:if>    
    </p:tab>
</ui:composition>