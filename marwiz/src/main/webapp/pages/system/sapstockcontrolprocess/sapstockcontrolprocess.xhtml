<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:form id="frmSapStockControl">
        <ui:include src="/pages/general/common/toolbarreport.xhtml" >
            <ui:param name="outputtext" value="#{loc.sapstockcontrolprocess}"/> 
            <ui:param name="bean" value='#{sapStockControlProcessBean}' />
            <ui:param name="update" value="frmSapStockControlProcessDatatable:dtbSapStockControlProcessIntegration  pgrSapStockControlProcessDatatable " />
        </ui:include>

        <h:panelGroup id="pgSapStockControlProcess" class="divContent" layout="block" transient="true">  
            <div class="panelToggle  ui-g">
                <div class="ui-g-12 ui-md-6 ui-lg-2">
                    <p:outputLabel value="#{loc.date}" for="cldStartDate" styleClass="Fs12 FontBold"/>
                    <p:calendar  id="cldStartDate" class="datepicker" value="#{sapStockControlProcessBean.date}" required="true" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat}" timeControlType="select" showOn="button" showButtonPanel="true" placeholder="#{loc.startdate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                        <p:ajax event="change" update="cldStartDate" resetValues="true" global="false"/>
                    </p:calendar>
                </div>

                <div class="ui-g-12  ui-md-6 ui-lg-2">
                    <p:outputLabel value="#{loc.marwizsapdifferencereason}" for="slcDifferenceReason" styleClass="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcDifferenceReason" value="#{sapStockControlProcessBean.differenceReasonType}" >
                        <f:selectItem itemValue="1" itemLabel="#{loc.productswithdifferentquantity}"  />
                        <f:selectItem itemValue="2" itemLabel="#{loc.productsnotavailableonmarwiz}"  />
                        <f:selectItem itemValue="3" itemLabel="#{loc.productsnotavailableonsap}"  />
                        <f:selectItem itemValue="4" itemLabel="#{loc.all}"  />
                    </p:selectOneMenu>
                </div>

            </div>
        </h:panelGroup>
    </h:form>

    <div class="EmptyBox30"></div>

    <h:panelGroup id="pgrSapStockControlProcessDatatable" >
        <h:panelGroup rendered="#{sapStockControlProcessBean.isFind}">
            <ui:include src="/pages/general/common/datagridtoolbardefinition.xhtml" >
                <ui:param name="bean" value="#{sapStockControlProcessBean}"/>
                <ui:param name="datatable" value="frmSapStockControlProcessDatatable:dtbSapStockControlProcessIntegration" />
                <ui:param name="fileName" value="#{loc.sapstockcontrolprocess}"/>
                <ui:param name="form" value='frmToolbarSapStockControl' />
                <ui:param name="widgetvar" value='sapStockControlIntegrationPF' />
                <ui:param name="renderedExcelManuel" value='true'/>
                <ui:param name="renderedPdfManuel" value='true'/>
            </ui:include>




            <h:form id="frmSapStockControlProcessDatatable">

                <p:dataTable  id="dtbSapStockControlProcessIntegration"  var="sap"  value="#{sapStockControlProcessBean.listOfObjects}" selection="#{sapStockControlProcessBean.selectedObject}" selectionMode="single" widgetVar="sapStockControlIntegrationPF" emptyMessage="#{loc.norecordsfound}"  filteredValue="#{sapStockControlProcessBean.listOfFilteredObjects}"
                              rows="#{sessionBean.user.defualtGridSize}" rowKey="#{sap.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                              rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"
                              reflow="true" >

                    <p:ajax event="page" global="false"/>
                    <p:ajax event="filter" global="false"/>
                    <p:ajax event="toggleSelect" global="false" />
                    <f:facet name="footer" rendered="false" >
                        <p:inputText id="globalFilter" value="#{sapStockControlProcessBean.autoCompleteValue}"  style="display: none"  />
                    </f:facet>


                    <p:columnGroup type="header">
                        <p:row>
                            <p:column colspan="3" headerText="SAP" />
                            <p:column colspan="6" headerText="MARWIZ" />
                        </p:row>

                        <p:row>
                            <p:column headerText="#{loc.stockcode}"  exportable="#{sapStockControlProcessBean.toogleList[0]}" sortable="true" sortBy="#{sap.sapStockCode}" filterable="true"  filterBy="#{sap.sapStockCode}" filterMatchMode="contains" >
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>       
                            <p:column headerText="#{loc.quantity}"  exportable="#{sapStockControlProcessBean.toogleList[1]}" sortable="true" sortBy="#{sap.sapQuantity}" filterable="true"  filterBy="#{sap.sapQuantity}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column> 
                            <p:column headerText="MARWIZ #{loc.centerstockcode}"  exportable="#{sapStockControlProcessBean.toogleList[2]}" sortable="true" sortBy="#{sap.centerStockCode}" filterable="true"  filterBy="#{sap.centerStockCode}" filterMatchMode="contains" >
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                            <p:column headerText="#{loc.barcode}"  exportable="#{sapStockControlProcessBean.toogleList[3]}" sortable="true" sortBy="#{sap.stock.barcode}"  filterable="true"  filterBy="#{sap.stock.barcode}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                            <p:column headerText="#{loc.centerstockcode}"  exportable="#{sapStockControlProcessBean.toogleList[4]}" sortable="true" sortBy="#{sap.centerStockCode}" filterable="true"  filterBy="#{sap.centerStockCode}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                            <p:column headerText="#{loc.stockname}"  exportable="#{sapStockControlProcessBean.toogleList[5]}" sortable="true" sortBy="#{sap.stock.name}" filterable="true"  filterBy="#{sap.stock.name}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                            <p:column headerText="#{loc.quantity}"  exportable="#{sapStockControlProcessBean.toogleList[6]}" sortable="true" sortBy="#{sap.marwizQuantity}" filterable="true"  filterBy="#{sap.marwizQuantity}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                            <p:column headerText="#{loc.isservice}"  exportable="#{sapStockControlProcessBean.toogleList[7]}" sortable="true" sortBy="#{sap.stock.isService}" filterable="true"  filterBy="#{sap.stock.isService}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                            <p:column headerText="#{loc.description}"  exportable="#{sapStockControlProcessBean.toogleList[8]}" sortable="true" sortBy="#{sap.errorCode}" filterable="true"  filterBy="#{sap.errorCode}" filterMatchMode="contains">
                                <f:facet name="filter">
                                    <p:outputLabel   rendered="false" />
                                </f:facet>
                            </p:column>
                        </p:row>



                    </p:columnGroup> 



                    <p:column id="clmSapStockCode" selectRow="false"    visible="#{sapStockControlProcessBean.toogleList[0]}" exportable="#{sapStockControlProcessBean.toogleList[0]}">
                        <h:outputText value="#{sap.sapStockCode}" >
                        </h:outputText>
                    </p:column>


                    <p:column id="clmSapQuantity"  selectRow="false"   visible="#{sapStockControlProcessBean.toogleList[1]}" exportable="#{sapStockControlProcessBean.toogleList[1]}">
                        <h:outputText value="#{sap.sapQuantity}" style="float: right;" >
                            <f:converter converterId="currencyConverter" />
                            <f:attribute name="unit" value="#{sap.sapUnit}"/>
                            <f:attribute name="type" value="unit" />
                        </h:outputText>
                    </p:column>

                    <p:column id="clmSapStockCodeForMarwız"  selectRow="false"  visible="#{sapStockControlProcessBean.toogleList[2]}" exportable="#{sapStockControlProcessBean.toogleList[2]}">
                        <h:outputText value="#{sap.errorCode == -3 ? '' : sap.centerStockCode}" >
                        </h:outputText>
                    </p:column>

                    <p:column id="clmBarcode"  selectRow="false"   visible="#{sapStockControlProcessBean.toogleList[3]}" exportable="#{sapStockControlProcessBean.toogleList[3]}">
                        <h:outputText value="#{sap.stock.barcode}" />
                    </p:column> 

                    <p:column id="clmCenterStockCode"   selectRow="false"    visible="#{sapStockControlProcessBean.toogleList[4]}" exportable="#{sapStockControlProcessBean.toogleList[4]}">
                        <h:outputText value="#{sap.stock.id > 0 ? sap.centerStockCode : ''}" />
                    </p:column> 

                    <p:column id="clmStockName" selectRow="false"   visible="#{sapStockControlProcessBean.toogleList[5]}" exportable="#{sapStockControlProcessBean.toogleList[5]}">
                        <h:outputText value="#{sap.stock.name}" />
                    </p:column> 

                    <p:column id="clmMarwizQuantity" selectRow="false"  visible="#{sapStockControlProcessBean.toogleList[6]}" exportable="#{sapStockControlProcessBean.toogleList[6]}">
                        <h:outputText value="#{sap.marwizQuantity}" style="float: right;" >
                            <f:converter converterId="currencyConverter" />
                            <f:attribute name="unit" value="#{sap.stock.unit}"/>
                            <f:attribute name="type" value="unit" />
                        </h:outputText>
                    </p:column>

                    <p:column id="clmIsService" selectRow="false"   visible="#{sapStockControlProcessBean.toogleList[7]}" exportable="#{sapStockControlProcessBean.toogleList[7]}">
                        <h:outputText value="#{sap.stock.id > 0 ? sap.stock.isService ? loc.yes : loc.no : ''}" />
                    </p:column>

                    <p:column id="clmDescription"  selectRow="false"   visible="#{sapStockControlProcessBean.toogleList[8]}" exportable="#{sapStockControlProcessBean.toogleList[8]}">
                        <h:outputText value="#{sap.errorCode == -1 ? loc.marwizsapproductquantitiesaredifferent : sap.errorCode == -2 ? loc.productnotfoundonmarwiz : loc.productnotfoundonsap}" />
                    </p:column> 



                </p:dataTable>  
            </h:form>
        </h:panelGroup>
    </h:panelGroup>





    <p:growl id="grwSapStockControlProcessMessage" showDetail="true" globalOnly="true" life="10000"/> 

</ui:composition>