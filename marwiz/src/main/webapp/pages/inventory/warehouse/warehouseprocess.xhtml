
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions" 
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:form id="frmWarehouseProcess">
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.warehouseprocesses}"/>
            <ui:param name="bean" value='#{warehouseProcessBean}' />
            <ui:param name="update" value="pgrWarehouseProcess" />
            <ui:param name="btnSaveId" value='#{warehouseProcessBean.getRendered(146, 0)}' />     
            <ui:param name="renderback" value='true'/>
            <c:if test="#{warehouseProcessBean.processType==2}">
                <ui:param name="renderSelectedObject" value='true'/>
                <ui:param name="selectedObjectName" value="#{warehouseProcessBean.selectedObject.name}"/>
                <ui:param name="btnDeleteId" value='#{warehouseProcessBean.getRendered(147, 0)}' />
                <ui:param name="btnTestBeforeDeleteId" value='true' />
            </c:if>
        </ui:include>

        <h:panelGroup id="pgrWarehouseProcess" layout="block">
            <div class="ui-g divContent">
                <div class="ui-g-12 panelToggle">
                    <p:focus for="txtWarehouseName"/>

                    <div class="ui-g-12  ui-md-2">
                        <p:outputLabel value="#{loc.warehousename}" for="txtWarehouseName" class="FontBold Fs12"/>
                        <p:inputText id="txtWarehouseName" value="#{warehouseProcessBean.selectedObject.name}" required="true" placeholder="#{loc.warehousename}">
                            <p:keyFilter regEx="/[^\\\{\}\[\]\,\:\u0022]/" preventPaste="false" />
                            <f:validateRegex pattern="[^\\\{\}\[\]\,\:\u0022]*" />
                        </p:inputText>
                    </div>

                    <div class="ui-g-12  ui-md-2">
                        <p:outputLabel value="#{loc.warehousecode}" for="txtWarehouseCode" class="FontBold Fs12"/>
                        <p:inputText id="txtWarehouseCode" value="#{warehouseProcessBean.selectedObject.code}" required="true" placeholder="#{loc.warehousecode}"/>  
                    </div>

                    <div class="ui-g-12  ui-md-2">
                        <p:outputLabel value="#{loc.statu}" for="slcStatu" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcStatu" value="#{warehouseProcessBean.selectedObject.status.id}" required="true" >
                            <f:selectItems value="#{sessionBean.getStatus(7)}" var="statu" itemLabel="#{statu.nameMap.get(sessionBean.langId).name}" itemValue="#{statu.id}"  />
                        </p:selectOneMenu>
                    </div>

                    <div class="ui-g-12  ui-md-6">
                        <p:outputLabel value="#{loc.description}" for="txtDescription" class="FontBold Fs12"/>
                        <p:inputText id="txtDescription" value="#{warehouseProcessBean.selectedObject.description}" placeholder="#{loc.description}"/>  
                    </div>

                </div>
            </div>
        </h:panelGroup>
    </h:form>

    <div class="EmptyBox10" />

    <p:tabView id="tbvWarehouseProc" activeIndex="#{marwiz.tabIndex}" rendered="#{warehouseProcessBean.processType==2 and (warehouseProcessBean.getRendered(40 ,1)
                                                    or warehouseProcessBean.getRendered(41 ,1) or warehouseProcessBean.getRendered(42 ,1))}" scrollable="true" dynamic="true" cache="true">

        <p:ajax event="tabChange" update="pngStockBook" listener="#{warehouseProcessBean.onTabChange}" />
        <p:tab id="tab40" title="#{loc.stocks}" rendered="#{warehouseProcessBean.getRendered(40 ,1)}">
            <c:if test="#{warehouseProcessBean.activeIndex==40}">
                <ui:include src="/pages/inventory/warehouse/warehousestocktab.xhtml"/>
            </c:if>
        </p:tab>

        <p:tab id="tab41" title="#{loc.shelves}" rendered="#{warehouseProcessBean.getRendered(41 ,1)}">
            <c:if test="#{warehouseProcessBean.activeIndex==41}">
                <ui:include src="/pages/inventory/warehouse/warehouseshelftab.xhtml"/>
            </c:if>
        </p:tab>

        <p:tab id="tab42" title="#{loc.movements}" rendered="#{warehouseProcessBean.getRendered(42 ,1)}">
            <c:if test="#{warehouseProcessBean.activeIndex==42}">
                <ui:include src="/pages/inventory/warehouse/warehousemovementtab.xhtml"/>
            </c:if>
        </p:tab>

    </p:tabView>

    <p:dialog id="dlgWarehouseStockProc" widgetVar="dlg_warehousestockproc" resizable="false" width="25%" focus="dlgWarehouseStockProc" responsive="true" dynamic="true" closeOnEscape="true" modal="true">
        <c:if test="#{warehouseProcessBean.activeIndex==40}">
            <ui:include src="/pages/inventory/warehouse/warehousestockprocess.xhtml"/>
        </c:if>
    </p:dialog>

    <p:dialog id="dlgWarehouseShelfProc" widgetVar="dlg_warehouseshelfproc" resizable="false" width="30%" focus="dlgWarehouseShelfProc" responsive="true" dynamic="true" closeOnEscape="true" modal="true">
        <c:if test="#{warehouseProcessBean.activeIndex==41}">
            <ui:include src="/pages/inventory/warehouse/warehouseshelfprocess.xhtml"/>
        </c:if>
    </p:dialog>

    <p:dialog id="dlgWarehouseStockShelfTabProc" widgetVar="dlg_warehousestockshelftabproc" resizable="false" width="20%" focus="dlgWarehouseStockShelfTabProc" responsive="true" dynamic="true" closeOnEscape="true" modal="true">
        <c:if test="#{warehouseProcessBean.activeIndex==40}">
            <ui:include src="/pages/inventory/warehouse/warehousestockshelftabprocess.xhtml"/>
        </c:if>
    </p:dialog>

    <p:dialog id="dlgWarehouseShelfStockTabProc" widgetVar="dlg_warehouseshelfstocktabproc" resizable="false" width="20%" focus="dlgWarehouseShelfStockTabProc" responsive="true" dynamic="true" closeOnEscape="true" modal="true">
        <c:if test="#{warehouseProcessBean.activeIndex==41}">
            <ui:include src="/pages/inventory/warehouse/warehouseshelftabstocktabprocess.xhtml"/>
        </c:if>
    </p:dialog>

    <h:panelGroup id="pngStockBook">
        <c:if test="#{warehouseProcessBean.activeIndex==40 or warehouseProcessBean.activeIndex==42}">
            <!--Kitaptan stok seçtirmek için açılan overlay panel-->
            <ui:include src="/pages/general/common/stockbookcheckbox.xhtml" >
                <ui:param name="updateBean" value="#{warehouseProcessBean.activeIndex==40 ? warehouseStockTabBean : warehouseMovementTabBean}" />
                <ui:param name="for" value="#{warehouseProcessBean.activeIndex==40 ? 'tbvWarehouseProc:frmGridToolbar:btnStock' : 'tbvWarehouseProc:frmMovementTab:btnStock'}"/>
                <ui:param name="type" value="#{warehouseProcessBean.activeIndex==40 ? 'warehouseitem' : 'reportcheckbox'}" />
                <ui:param name="parameters" value="#{warehouseProcessBean.activeIndex==40 ? [warehouseStockTabBean.wareHouse] : ''}" /> 
                <ui:param name="columnsize" value='4' />     
                <ui:param name="form" value='frmStockBookFilterCheckbox' /> 
                <ui:param name="overlay" value="olp_stockcheckbox" />
            </ui:include>
        </c:if>
    </h:panelGroup>
    <p:confirmDialog id="dlgConfirmTransferStock" global="true" class="deleteConfirm"  widgetVar="dlgConfirm" width="30%" showEffect="fade" hideEffect="fade"  closeOnEscape="true" responsive="true">
        <c:if test="#{warehouseProcessBean.activeIndex==40}">
            <f:facet name="message">
                <h:outputText value="#{loc.theselectedproductswillbetransferredas0balancetothewarehouse}"  style="white-space: pre-wrap;">
                    <i class="icon-trash Fs20 tlbrDeleteBtn" /> 
                </h:outputText>
            </f:facet>
            <p:commandButton value="#{loc.yes}" actionListener="#{warehouseStockTabBean.addStock()}" async="true" global="true" onclick="PF('dlgConfirm').hide()"   styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
            <p:commandButton value="#{loc.no}"  onclick="PF('dlgConfirm').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
        </c:if>
    </p:confirmDialog>

</ui:composition>
