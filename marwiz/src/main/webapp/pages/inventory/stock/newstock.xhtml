<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <!-- 
        Açıklama : Stok ekleme olan sayfalarda açılan dialogda bu xhtml kullanılır.
        Yazan    : Esra ÇABUK
        Bean     : stockProcessBean,newStockBean(hızlı ekleme için)
        Sayfa    : Stoklar ve stok seçilerek hızlı ekleme olan sayfalar
    -->  
    <p:focus for="txtName" />
    <div class="ui-g">

        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.stockname}" for="txtName" styleClass="Fs12 FontBold"/>
            <p:inputText id="txtName" value="#{bean.selectedObject.name}" disabled="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) or bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}" required="true" placeholder="#{loc.stockname}" >
                <p:keyFilter regEx="/[^\\\{\}\[\]\,\:\u0022\u0027]/" preventPaste="false" />
                <f:validateRegex pattern="[^\\\{\}\[\]\,\:\u0022\u0027]*" />
                <p:ajax global="false"/>
            </p:inputText>
        </div>


        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.stockcode}" for="txtStockCode" styleClass="Fs12 FontBold"/>
            <p:inputText id="txtStockCode" value="#{bean.selectedObject.code}" placeholder="#{loc.stockcode}" >
                <p:keyFilter regEx="/[^\u0022]/" preventPaste="false" />
                <f:validateRegex pattern="[^\u0022]*" />
                <p:ajax global="false"/>
            </p:inputText>
        </div>

        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.centerstockcode}" for="txtCenterCode" styleClass="Fs12 FontBold"/>
            <p:inputText id="txtCenterCode" value="#{bean.selectedObject.centerProductCode}" disabled="true" placeholder="#{loc.centerstockcode}"  >
                <p:keyFilter regEx="/[^\u0022]/" preventPaste="false" />
                <f:validateRegex pattern="[^\u0022]*" />
            </p:inputText>
        </div>


        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <h:panelGroup rendered="#{!bean.isAvailableStock and bean.selectedObject.centerstock_id == 0}">
                <p:outputLabel value="#{loc.unit}" for="slcUnit" styleClass="Fs12 FontBold"/>
                <p:commandLink class="TextDecNone" update="dlgUnitDefinitionProc" rendered="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) ? 'false' : newUnitBean.getRendered(251, 0)}" resetValues="true" title="#{loc.add}" immediate="true" actionListener="#{newUnitBean.create(1,bean.unitList)}" >
                    <i class="fa fa-plus Fs14 fltrPlusBtn" ></i>                               
                </p:commandLink>
                <p:selectOneMenu id="slcUnit" required="true" disabled="#{bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration}" value="#{bean.selectedObject.unit.id}">
                    <f:selectItems value="#{bean.unitList}"  var="unit" itemLabel="#{unit.name}" itemValue="#{unit.id}" />
                    <p:ajax event="change"  listener="#{bean.changeUnit()}" global="false"/>
                </p:selectOneMenu>
            </h:panelGroup>
            <h:panelGroup rendered="#{bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}">
                <p:outputLabel value="#{loc.unit}" for="txtUnit" styleClass="Fs12 FontBold"/>
                <p:inputText id="txtUnit" value="#{bean.selectedObject.unit.name}" disabled="true" placeholder="#{loc.unit}"  />
            </h:panelGroup>
        </div>           

        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.isservice}" for="slcService" styleClass="Fs12 FontBold"/>
            <p:selectOneMenu id="slcService" required="true" disabled="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) or bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}" value="#{bean.selectedObject.isService}">
                <f:selectItem itemValue="true" itemLabel="#{loc.yes}" />
                <f:selectItem itemValue="false" itemLabel="#{loc.no}" />
                <p:ajax listener="#{bean.changeIsService()}" update="tbvStokProc" global="false"/>
            </p:selectOneMenu>
        </div>

        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.statu}" for="slcStatu" styleClass="Fs12 FontBold"/>
            <h:panelGroup rendered="#{sessionBean.user.lastBranchSetting.isCentralIntegration and bean.selectedObject.stockInfo.isPassive and bean.selectedObject.status.id == 3}">
                <p:tooltip for="btnInfoStatus" value="#{loc.itispassiveonstationbasis}"/>
                <p:commandLink id="btnInfoStatus" global="false">
                    <i class="icon-info-circled-alt Fs16" />
                </p:commandLink>
            </h:panelGroup>
            <p:selectOneMenu id="slcStatu" required="true" disabled="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) or bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}" value="#{bean.selectedObject.status.id}">
                <f:selectItems value="#{sessionBean.getStatus(2)}"  var="statu" itemLabel="#{statu.nameMap.get(sessionBean.langId).name}" itemValue="#{statu.id}" />
            </p:selectOneMenu>
        </div>


        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.barcode}" for="txtBarcode" styleClass="Fs12 FontBold"/>
            <p:inputText id="txtBarcode" value="#{bean.selectedObject.barcode}" disabled="#{(bean.processType==2 and bean.selectedObject.centerstock_id > 0) or sessionBean.user.lastBranchSetting.isCentralIntegration}" required="true" placeholder="#{loc.barcode}" >
                <p:keyFilter regEx="/[^\u0022]/" preventPaste="false" />  
                <f:validateRegex pattern="[^\u0022]*" />
                <c:if test="#{!sessionBean.user.lastBranchSetting.isCentralIntegration}">
                    <p:ajax event="blur" listener="#{bean.findStockAccordingToBarcode()}" global="false" resetValues="true"/>
                </c:if>
            </p:inputText>
        </div>      

        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <h:panelGroup rendered="#{!bean.isAvailableStock and bean.selectedObject.centerstock_id == 0}">
                <p:outputLabel value="#{loc.brand}" for="slcBrand" styleClass="Fs12 FontBold"/>
                <p:commandLink class="TextDecNone" update="dlgBrandProc" rendered="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) ? 'false' : newBrandBean.getRendered(210, 0)}" resetValues="true" title="#{loc.add}" immediate="true" actionListener="#{newBrandBean.create(bean.brandList)}" >
                    <i class="fa fa-plus Fs14 fltrPlusBtn" ></i>                               
                </p:commandLink>
                <p:selectOneMenu id="slcBrand" required="true" disabled="#{bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration}" value="#{bean.selectedObject.brand.id}" filter="true" filterMatchMode="contains">
                    <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true" /> 
                    <f:selectItems value="#{bean.brandList}"  var="brand" itemLabel="#{brand.name}" itemValue="#{brand.id}" />
                </p:selectOneMenu>
            </h:panelGroup>
            <h:panelGroup rendered="#{bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}">
                <p:outputLabel value="#{loc.brand}" for="txtBrand" styleClass="Fs12 FontBold"/>
                <p:inputText id="txtBrand" value="#{bean.selectedObject.brand.name}" disabled="true" placeholder="#{loc.brand}"  />
            </h:panelGroup>
        </div>
        <h:panelGroup rendered="#{sessionBean.user.lastBranchSetting.isCentralIntegration and sessionBean.user.lastBranch.conceptType ==1}">
            <div class="ui-g-12 ui-md-6 ui-lg-2">
                <p:outputLabel value="#{loc.centralsupplier}" for="txtCentralSupplier" styleClass="Fs12 FontBold"/>
                <p:inputText id="txtCentralSupplier" value="#{bean.selectedObject.centralSupplier.name}" placeholder="#{loc.centralsupplier}" disabled="true">
                </p:inputText>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-2">
                <p:outputLabel value="#{loc.centralsupplierstockcode}" for="txtCentralSupplierProductCode" styleClass="Fs12 FontBold"/>
                <p:inputText id="txtCentralSupplierProductCode" value="#{bean.selectedObject.centralSupplierProductCode}" disabled="true"  placeholder="#{loc.centralsupplierstockcode}" >
                    <p:keyFilter regEx="/[^\u0022]/" preventPaste="false" />
                    <f:validateRegex pattern="[^\u0022]*" />
                </p:inputText>
            </div>
        </h:panelGroup>

        <div  class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.supplier}" for="txtSupplier" styleClass="Fs12 FontBold"/>
            <p:inputText id="txtSupplier" onclick="showAccountBook()" value="#{bean.selectedObject.supplier.id==0 ? loc.nott : bean.selectedObject.supplier.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" placeholder="#{loc.supplier} " >
            </p:inputText>
            <p:commandLink id="cmdSupplier" class="commandLinkPositionForBookFilter" process="@this"  oncomplete="PF('olp_account').loadContents();" >
                <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([],'frmAccountBookFilter','olp_account','stockprocess')}" global="false"/>
            </p:commandLink> 
        </div>
        <p:remoteCommand name="showAccountBook" process="@this" oncomplete="PF('olp_account').loadContents()" actionListener="#{accountBookFilterBean.findFilterListLazyLoading([],'frmAccountBookFilter','olp_account','stockprocess')}" />

        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.supplierstockcode}" for="txtSupplierCode" styleClass="Fs12 FontBold"/>
            <p:inputText id="txtSupplierCode" value="#{bean.selectedObject.supplierProductCode}"  placeholder="#{loc.supplierstockcode}" >
                <p:keyFilter regEx="/[^\u0022]/" preventPaste="false" />
                <f:validateRegex pattern="[^\u0022]*" />
                <p:ajax global="false"/>
            </p:inputText>
        </div>

        <div class="ui-g-12 ui-md-6 ui-lg-2"> 
            <p:outputLabel value="#{loc.productionplace}" for="slcCountry" class="Fs12 FontBold"/>
            <p:selectOneMenu   id="slcCountry" filter="true" filterMatchMode="contains"  value="#{bean.selectedObject.country.id}" >
                <f:selectItem itemLabel="#{loc.choose}" itemValue="#{null}" /> 
                <f:selectItems value="#{sessionBean.countries}" var="country" itemLabel="#{country.getName(sessionBean.langId)}" itemValue="#{country.id}"  />
            </p:selectOneMenu>
        </div>      
        <div class="ui-g-12 ui-md-6 ui-lg-2">
            <p:outputLabel value="#{loc.departmentname}" for="slcTaxDepartment" styleClass="Fs12 FontBold"/>
            <p:tooltip for="btnChangeTaxDepartment" value="#{loc.changedepartmentofstockaccordingtotaxgroupinbranchwhichdoesnthavecentralintegration}"/>
            <p:commandLink id="btnChangeTaxDepartment" actionListener="#{bean.beforeChangeStockTaxDepartment()}" resetValues="true" rendered="#{bean.processType==2 and !sessionBean.user.lastBranchSetting.isCentralIntegration}" immediate="true" process="@this" >
                <i class="fa fa-undo fltrPlusBtn Fs14"  />
            </p:commandLink>
            <p:selectOneMenu id="slcTaxDepartment" value="#{bean.selectedObject.stockInfo.taxDepartment.id}" required="true" >
                <f:selectItem itemLabel="#{loc.choose}" itemValue="0"  itemDisabled="true"/>
                <f:selectItems value="#{bean.listOfTaxDepartment}"  var="taxDepartment" itemLabel="#{taxDepartment.name}" itemValue="#{taxDepartment.id}" />
            </p:selectOneMenu>
        </div>        
        <div class="ui-g-12 ui-md-6  ui-lg-2 ">
            <p:outputLabel value="#{loc.stocktype}" for="slcStockType" styleClass="Fs12 FontBold"/>
            <p:selectOneMenu id="slcStockType" value="#{bean.selectedObject.stockType_id}" disabled="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) or bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}" >
                <f:selectItem itemLabel="#{loc.normal}" itemValue="1"/>
                <f:selectItem itemLabel="#{loc.washing}" itemValue="2"/>
                <f:selectItem itemLabel="#{bean.specialItem==1 ? loc.starbucks : loc.coffee}" itemValue="3"/>
            </p:selectOneMenu>
        </div> 
        <c:if test="#{sessionBean.user.lastBranchSetting.isCentralIntegration and bean.specialItem == 1}">
            <div class="#{sessionBean.user.lastBranchSetting.isCentralIntegration ? 'ui-g-12 ui-md-6 ui-lg-2' : 'ui-g-12 ui-md-6 ui-lg-4'}">
                <p:outputLabel value="#{loc.is_get}" styleClass="Fs12 FontBold"/>
                <p:panelGrid layout="grid" columns="1" class="pngCheckBox" >  
                    <p:selectBooleanCheckbox id="sbcIsGet"  value="#{bean.selectedObject.is_get}" disabled="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) or bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}"   class="Fleft" >
                        <p:ajax global="false" />
                        <p:outputLabel value="#{loc.isitis_get}"  style="margin-left: 2px;"  class="FontNormal"/>
                    </p:selectBooleanCheckbox>
                </p:panelGrid> 
            </div> 
        </c:if>
        <div class="#{sessionBean.user.lastBranchSetting.isCentralIntegration ? 'ui-g-12 ui-md-6 ui-lg-12' : 'ui-g-12 ui-md-6 ui-lg-6'}">
            <p:outputLabel value="#{loc.description}" for="txtDescription" styleClass="Fs12 FontBold"/>
            <p:inputTextarea id="txtDescription" value="#{bean.selectedObject.description}" readonly="#{(bean.processType==2 and sessionBean.user.lastBranchSetting.isCentralIntegration) or bean.isAvailableStock or bean.selectedObject.centerstock_id > 0}"  placeholder="#{loc.description}"  
                             rows="1" autoResize="false" style="resize: none;" />
        </div>

    </div>


</ui:composition>
