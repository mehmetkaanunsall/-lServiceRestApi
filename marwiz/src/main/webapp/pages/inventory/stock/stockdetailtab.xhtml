<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:form id="frmStockDetailTab" >

        <div class="ContainerIndent">

            <ui:include src="/pages/general/common/processtoolbar.xhtml" >
                <ui:param name="bean" value='#{stockDetailTabBean}'/>
                <ui:param name="outputtext" value=""/>
                <ui:param name="update" value="grdStockDetail" />
                <ui:param name="btnSaveId" value="#{stockDetailTabBean.getRendered(125, 0)}" />     
                <ui:param name="btnDeleteId" value='false' /> 

            </ui:include>

            <h:panelGroup id="grdStockDetail" class="divContent" layout="block">

                <div class="ui-g">
                    <div class="ui-g-12 ui-md-12 ui-lg-12 " style="padding: 0px !important;">
                        <h:outputText value="#{loc.productinformations}" styleClass="outputTextFont FontBold"/>
                        <p:separator/>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <h:panelGroup id="pngRecommended">
                            <p:outputLabel value="#{stockDetailTabBean.isProfitRate ? loc.recommendedprofitrate : loc.recommendedsaleprice}" for="txtRecommendedSalePrice" styleClass="Fs12 FontBold"/>
                            <p:commandLink  process="@this" title="#{stockDetailTabBean.isProfitRate ? loc.recommendedsaleprice : loc.recommendedprofitrate}" actionListener="#{stockDetailTabBean.changeProfitRate()}" update="pngRecommended slcCurrency" rendered="#{!sessionBean.user.lastBranchSetting.isCentralIntegration}">
                                <i class="fa fa-refresh Fs14  fltrPlusBtn" />   
                            </p:commandLink>
                            <p:inputNumber id="txtRecommendedSalePrice" symbol="#{stockDetailTabBean.isProfitRate ? '%' : '' }" class="TexAlRight" value="#{stockDetailTabBean.isProfitRate ? stockDetailTabBean.stock.stockInfo.minProfitRate : stockDetailTabBean.stock.stockInfo.recommendedPrice}" disabled="#{sessionBean.user.lastBranchSetting.isCentralIntegration}" placeholder="#{stockDetailTabBean.isProfitRate ? loc.recommendedprofitrate : loc.recommendedsaleprice}"  
                                           /> 
                        </h:panelGroup>
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">   
                        <p:outputLabel value="#{loc.currency}" for="slcCurrency" class="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcCurrency" disabled="#{stockDetailTabBean.isProfitRate or (sessionBean.user.lastBranchSetting.isCentralIntegration)}" value="#{stockDetailTabBean.stock.stockInfo.currency.id}">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="#{null}" />
                            <f:selectItems value="#{sessionBean.currencies}" var="currency" itemLabel="#{currency.nameMap.get(sessionBean.langId).name}" itemValue="#{currency.id}" /> 
                        </p:selectOneMenu>
                    </div>
                    <h:panelGroup rendered="#{sessionBean.user.lastBranchSetting.isCentralIntegration}">

                        <div class="ui-g-12 ui-md-6 ui-lg-2"> 
                            <p:outputLabel value="#{loc.mandatorysaleprice}" for="txtMandatoryPrice" class="Fs12 FontBold"/>
                            <p:inputNumber id="txtMandatoryPrice" value="#{stockDetailTabBean.stock.stockInfo.saleMandatoryPrice}" disabled="true"
                                           decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                           roundMethod="D" class="Wid90 TexAlRight" placeholder="#{loc.mandatorysaleprice}" >                 
                            </p:inputNumber>
                        </div>
                        <div class="ui-g-12 ui-md-6 ui-lg-2">     
                            <p:outputLabel value="#{loc.currency}" for="slcMandatoryCurrency" class="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcMandatoryCurrency" disabled="true" value="#{stockDetailTabBean.stock.stockInfo.saleMandatoryCurrency.id}">
                                <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/>
                                <f:selectItems value="#{sessionBean.currencies}" var="currency2" itemLabel="#{currency2.nameMap.get(sessionBean.langId).name}" itemValue="#{currency2.id}" />
                            </p:selectOneMenu>
                        </div> 
                    </h:panelGroup>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.recommendedpurchaseprice}" for="txtRecommendedPurchasePrice" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtRecommendedPurchasePrice" class="TexAlRight" value="#{stockDetailTabBean.stock.stockInfo.purchaseRecommendedPrice}" disabled="#{sessionBean.user.lastBranchSetting.isCentralIntegration}" placeholder="#{loc.recommendedpurchaseprice}"  /> 
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">   
                        <p:outputLabel value="#{loc.currency}" for="slcCurrency" class="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcPurchaseCurrency" disabled="#{sessionBean.user.lastBranchSetting.isCentralIntegration}" value="#{stockDetailTabBean.stock.stockInfo.purchaseCurrency.id}">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="#{null}" />
                            <f:selectItems value="#{sessionBean.currencies}" var="currency3" itemLabel="#{currency3.nameMap.get(sessionBean.langId).name}" itemValue="#{currency3.id}" /> 
                        </p:selectOneMenu>
                    </div>
                    <h:panelGroup rendered="#{!sessionBean.user.lastBranchSetting.isCentralIntegration}">
                        <div class="ui-g-12 ui-md-6 ui-lg-2"></div>
                        <div class="ui-g-12 ui-md-6 ui-lg-2"></div>
                    </h:panelGroup>

                    <div class="ui-g-12 ui-md-6  ui-lg-2 ">
                        <p:outputLabel value="#{loc.isfuelstock}" styleClass="Fs12 FontBold"/>
                        <p:panelGrid layout="grid" columns="1" class="pngCheckBoxReport" style="margin-top: 0px !important" > 
                            <p:selectBooleanCheckbox  value="#{stockDetailTabBean.stock.stockInfo.isFuel}" itemLabel="#{loc.fuelstock}" class="Fleft" styleClass="Fs13">
                                <p:ajax global="false" update="txtIntegrationCode" listener="#{stockDetailTabBean.stock.stockInfo.setFuelIntegrationCode(null)}" />
                            </p:selectBooleanCheckbox>
                        </p:panelGrid>

                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.integrationcode}" for="txtIntegrationCode" styleClass="Fs12 FontBold"/>
                        <p:inputText id="txtIntegrationCode" value="#{stockDetailTabBean.stock.stockInfo.fuelIntegrationCode}" disabled="#{!stockDetailTabBean.stock.stockInfo.isFuel}" /> 
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.minstocklevel}" for="txtMinStockLevel" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtMinStockLevel" value="#{stockDetailTabBean.stock.stockInfo.minStockLevel}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}"
                                       placeholder="#{loc.minstocklevel}"  /> 
                    </div>  

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.maxstocklevel}" for="txtMaxStockLevel" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtMaxStockLevel" value="#{stockDetailTabBean.stock.stockInfo.maxStockLevel}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}"
                                       placeholder="#{loc.maxstocklevel}"  /> 
                    </div> 



                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.turnoverpremium}" for="txtTurnoverPremium" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtTurnoverPremium" value="#{stockDetailTabBean.stock.stockInfo.turnoverPremium}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" symbol="%"
                                       placeholder="#{loc.turnoverpremium}"  /> 
                    </div> 

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.quicksale}" for="slcQuickSale" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcQuickSale" required="true" value="#{stockDetailTabBean.stock.stockInfo.isQuickSale}">
                            <f:selectItem itemValue="true" itemLabel="#{loc.yes}" />
                            <f:selectItem itemValue="false" itemLabel="#{loc.no}" />
                        </p:selectOneMenu>
                    </div>


                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.boxquantity}" for="txtBoxQuantity" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtBoxQuantity" value="#{stockDetailTabBean.stock.boxQuantity}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       disabled="true" placeholder="#{loc.boxquantity}"  /> 
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.minfactorvalue}" for="txtMinFactorValue" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtMinFactorValue" value="#{stockDetailTabBean.stock.stockInfo.minFactorValue}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       disabled="true" placeholder="#{loc.minfactorvalue}"  /> 
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.maxfactorvalue}" for="txtMaxFactorValue" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtMaxFactorValue" value="#{stockDetailTabBean.stock.stockInfo.maxFactorValue}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       disabled="true" placeholder="#{loc.maxfactorvalue}"  /> 
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.shelfquantity}" for="txtShelfQuantity" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtShelfQuantity" value="#{stockDetailTabBean.stock.stockInfo.shelfQuantity}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       disabled="true" placeholder="#{loc.shelfquantity}"  /> 
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.stockenoughday}" for="txtStockEnoughDay" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtStockEnoughDay" value="#{stockDetailTabBean.stock.stockInfo.stockEnoughDay}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       disabled="true" placeholder="#{loc.stockenoughday}"  /> 
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.warehousestockdivisorvalue}" for="txtWarehouseStockDivisorValue" styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtWarehouseStockDivisorValue" value="#{stockDetailTabBean.stock.stockInfo.warehouseStockDivisorValue}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                       roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       disabled="true" placeholder="#{loc.warehousestockdivisorvalue}"  /> 
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.promotionalproduct}" styleClass="Fs12 FontBold"/>
                        <p:panelGrid layout="grid" columns="1" class="pngCheckBox" >  
                            <p:selectBooleanCheckbox id="sbcPromotionalProduct"  value="#{stockDetailTabBean.stock.stockInfo.isCampaign}"  disabled="true" styleClass="Fs13" class="Fleft">
                                <p:ajax global="false" />
                                <p:outputLabel value="#{loc.isitapromotionalproduct}"  style="margin-left: 2px;"  class="FontNormal"/>
                            </p:selectBooleanCheckbox>

                        </p:panelGrid> 
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <h:panelGroup id="pngPurchaseControlDate">
                            <p:outputLabel value="#{loc.removepurchasecontrol}" for="cldDate" styleClass="Fs12 FontBold"/>
                            <p:calendar  id="cldDate" class="datepicker" value="#{stockDetailTabBean.stock.stockInfo.purchaseControlDate}" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" timeControlType="select" showOn="button" showButtonPanel="true" placeholder="#{loc.removepurchasecontrol}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                                <p:ajax event="change" update="cldDate" resetValues="true" global="false"/>
                                <p:tooltip for="pngPurchaseControlDate" position="top" value="#{loc.removethepurchaseunitpricecontroluntilthisdate}" />
                            </p:calendar>
                        </h:panelGroup>
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                        <p:outputLabel value="#{loc.negativebalance}" styleClass="Fs12 FontBold"/>
                        <p:panelGrid layout="grid" columns="1" class="pngCheckBox" >  
                            <p:selectBooleanCheckbox id="sbcNegativeBalance"  value="#{stockDetailTabBean.stock.stockInfo.isMinusStockLevel}"   class="Fleft" >
                                <p:ajax global="false" />
                                <p:outputLabel value="#{loc.canthestockdroptonegativebalance}"  style="margin-left: 2px;"  class="FontNormal"/>
                            </p:selectBooleanCheckbox>

                        </p:panelGrid> 
                    </div> 


                    <h:panelGroup rendered="#{sessionBean.user.lastBranchSetting.isEInvoice}">
                        <div class="ui-g-12 ui-md-6 ui-lg-2" >
                            <p:outputLabel value="#{loc.einvoice} #{loc.integrationcode}" for="txtEInvoiceIntegrationCode" styleClass="Fs12 FontBold"/>
                            <p:inputText id="txtEInvoiceIntegrationCode" value="#{stockDetailTabBean.stock.stockInfo.eInvoiceIntegrationCode}"  placeholder="#{loc.einvoice} #{loc.integrationcode}" /> 
                        </div>
                    </h:panelGroup> 


                    <div class="ui-g-12 ui-md-6  ui-lg-2 ">
                        <p:outputLabel value="#{loc.isdeliststock}" styleClass="Fs12 FontBold"/>
                        <p:panelGrid layout="grid" columns="1"  class="pngCheckBoxReport" style="margin-top: 0px !important" > 
                            <p:selectBooleanCheckbox  value="#{stockDetailTabBean.stock.stockInfo.isDelist}" disabled="true" itemLabel="#{loc.delist}" class="Fleft" styleClass="Fs13">
                            </p:selectBooleanCheckbox>
                        </p:panelGrid>
                    </div>


                    <h:panelGroup id="pngIncomeExpense">
                        <h:panelGroup rendered="#{stockDetailTabBean.isIncomeExpenseView}">
                            <h:panelGroup rendered="#{stockDetailTabBean.isIncome}">
                                <div class="ui-g-12 ui-md-12 ui-lg-12" >
                                    <p:outputLabel id="lblIncome" rendered="#{stockDetailTabBean.isIncome}" value="#{loc.income}"  for="txtIncome"  styleClass="Fs12 FontBold"/>
                                    <p:commandLink id="cmdIncome"  resetValues="true" process="@this" global="false" title="#{loc.income}" actionListener="#{stockDetailTabBean.incomeOrExpense(0)}" update="pngIncomeExpense"  >
                                        <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                                    </p:commandLink>

                                    <p:inputText  id="txtIncome"  onclick="showIncomeExpenseBook()" value="#{stockDetailTabBean.stock.stockInfo.incomeExpense.name}" class="inputPositionForBookFilter" readonly="true" placeholder="#{loc.income}">   

                                    </p:inputText>
                                    <p:commandLink id="btnIncome"  process="@this" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                        <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                        <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([true, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter','olp_IncomeExpense', 'stockDetailTabBean')}" />
                                    </p:commandLink>
                                </div>
                            </h:panelGroup>


                            <h:panelGroup  rendered="#{!stockDetailTabBean.isIncome}">
                                <div class="ui-g-12 ui-md-12 ui-lg-12">
                                    <p:outputLabel value="#{loc.expense}" id="lblExpense" rendered="#{!stockDetailTabBean.isIncome}" for="txtExpense"  styleClass="Fs12 FontBold"/>
                                    <p:commandLink id="clmExpense" resetValues="true" process="@this" rendered="#{!stockDetailTabBean.isIncome}" global="false" title="#{loc.expense}" actionListener="#{stockDetailTabBean.incomeOrExpense(1)}" update="pngIncomeExpense"  >
                                        <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                                    </p:commandLink>

                                    <p:inputText  id="txtExpense" onclick="showIncomeExpenseBook1()" value="#{stockDetailTabBean.stock.stockInfo.incomeExpense.name}" class="inputPositionForBookFilter" readonly="true" placeholder="#{loc.expense}">   

                                    </p:inputText>
                                    <p:commandLink id="btnExpense" process="@this"  class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense1').loadContents();">
                                        <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                        <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([false, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter1','olp_IncomeExpense1', 'stockDetailTabBean')}" />
                                    </p:commandLink>
                                </div>
                            </h:panelGroup> 



                        </h:panelGroup>               
                    </h:panelGroup>

                    <div class="ui-g-12 ui-md-6 ui-lg-2"/>

                    <div class="ui-g-12 ui-md-12 ui-lg-12 " style="padding: 0px !important;">
                        <h:outputText value="#{loc.unitpriceinformation}" styleClass="outputTextFont FontBold"/>
                        <p:separator/>
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.contentunitquantity}" for="txtStockQuantity"  styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtStockQuantity" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                       roundMethod="D" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                       value="#{stockDetailTabBean.stock.stockInfo.weight}" disabled="#{sessionBean.user.lastBranch.isAgency}" class="Wid97 TexAlRight"  placeholder="#{loc.contentunitquantity}">
                            <p:ajax event="keyup" update="txtUnitPrice" global="false"/> 
                        </p:inputNumber>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.contentunitgenus}" for="slcContentUnitGenus" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcContentUnitGenus" value="#{stockDetailTabBean.stock.stockInfo.weightUnit.id}"  disabled="#{sessionBean.user.lastBranch.isAgency}" styleClass="Wid90">
                            <f:selectItem itemValue="0" itemLabel="#{loc.choose}"/>
                            <f:selectItems value="#{stockDetailTabBean.unitList}"  var="contentUnitGenus" itemLabel="#{contentUnitGenus.name}" itemValue="#{contentUnitGenus.id}" />
                            <!--<p:ajax event="change" global="false" listener="#{stockDetailTabBean.changeUnit()}" update="txtUnitPrice"/> -->
                            <p:ajax update="txtUnitPrice" global="false"/> 
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.unitprice}" for="txtUnitPrice"  styleClass="Fs12 FontBold"/>
                        <p:inputNumber id="txtUnitPrice" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" readonly="true" 
                                       decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}"
                                       symbol="#{sessionBean.currencySignOrCode(stockDetailTabBean.stock.salePriceListItem.currency.id,0)}" symbolPosition="#{sessionBean.locale=='tr' ? 's': 'p'}" emptyValue="sign"
                                       value="#{stockDetailTabBean.calUnitPrice()}"  class="Wid97 TexAlRight"  placeholder="#{loc.stockquantity}">

                        </p:inputNumber>
                    </div> 



                    <div class="ui-g-12 ui-md-12 ui-lg-12 " style="padding: 0px !important;">
                        <h:outputText value="#{loc.deliverytovehicleinformation}" styleClass="outputTextFont FontBold"/>
                        <p:separator/>
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2"> 
                        <p:outputLabel value="#{loc.deliverytovehicleprice} #{loc.withtax}" for="txtDeliveryToVehiclePrice" class="Fs12 FontBold"/>
                        <p:inputNumber id="txtDeliveryToVehiclePrice" value="#{stockDetailTabBean.stock.stockInfo.orderDeliverySalePrice}" 
                                       decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" 
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                       roundMethod="D" class="Wid90 TexAlRight" placeholder="#{loc.deliverytovehicleprice} #{loc.withtax}" >                 
                        </p:inputNumber>
                    </div>

                    <div class="ui-g-12 ui-md-6 ui-lg-2">     
                        <p:outputLabel value="#{loc.currency}" for="slcDeliveryToVehicleCurrency" class="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcDeliveryToVehicleCurrency" value="#{stockDetailTabBean.stock.stockInfo.orderDeliverySaleCurrency.id}" styleClass="Wid95" required="true">
                            <f:selectItems value="#{sessionBean.currencies}" var="currency6" itemLabel="#{currency6.nameMap.get(sessionBean.langId).name}" itemValue="#{currency6.id}" />
                            <p:ajax event="change" update="tbvStokProc:frmStockDetailTab:txtUnitPrice" global="false"/>
                        </p:selectOneMenu>
                    </div> 

                    <c:if test="#{sessionBean.user.lastBranchSetting.isCentralIntegration and sessionBean.user.lastBranchSetting.specialItem == 1}">
                        <div class="ui-g-12 ui-md-6 ui-lg-2">
                            <p:outputLabel value="#{loc.getproductrate}" for="txtOrderDeliveryRate" styleClass="Fs12 FontBold"/>
                            <p:inputNumber id="txtOrderDeliveryRate" value="#{stockDetailTabBean.stock.stockInfo.orderDeliveryRate}" 
                                           decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                           thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                           roundMethod="D" class="Wid90 TexAlRight" decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" 
                                           disabled="true" placeholder="#{loc.getproductrate}"  /> 
                        </div>
                    </c:if>

                </div>
            </h:panelGroup>


            <p:remoteCommand name="showIncomeExpenseBook" process="@this"  oncomplete="PF('olp_IncomeExpense').loadContents();" 
                             actionListener="#{incomeExpenseBookFilterBean.findFilterList([stockDetailTabBean.isIncome
                                               ? true : false, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','stockDetailTabBean')}" />

            <p:remoteCommand name="showIncomeExpenseBook1" process="@this"  oncomplete="PF('olp_IncomeExpense1').loadContents();" 
                             actionListener="#{incomeExpenseBookFilterBean.findFilterList([stockDetailTabBean.isIncome
                                               ? true : false, sessionBean.user.lastBranch],'frmIncomeExpenseBookFilter1','olp_IncomeExpense1','stockDetailTabBean')}" />



        </div>
    </h:form>
    <div class="EmptyBox10" />
    <h:form id="frmStockDetailTabPriceList" >

        <div class="ContainerIndent">
            <p:toolbar >
                <f:facet name="left">
                    <h:outputText value="#{loc.pricelistinformation}" class="outputTextFont Fleft MarRight8" />
                </f:facet>

                <f:facet name="right">  
                    <p:commandLink id="btnSave" title="#{loc.save}" process="@form"   rendered="#{stockDetailTabBean.getRendered(143, 0)}" class="Fright MarLeft3" update="grdStockDetailPriceList"  actionListener="#{stockDetailTabBean.savePriceList()}"  >
                        <i class="fa fa-save Fs20 MarTop5 tlbrSaveBtn"/>                 
                    </p:commandLink>
                </f:facet>
            </p:toolbar>

            <p:commandLink id="btnDefaultCommandNone" process="@form" class="DispNone" global="false"/>  

            <p:defaultCommand target="#{stockDetailTabBean.getRendered(143, 0) ? 'btnSave' : 'btnDefaultCommandNone'}"/> 

            <h:panelGroup id="grdStockDetailPriceList" class="divContent" layout="block">
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-12 ui-lg-6">
                        <div class="ui-g-12 ui-md-4 ui-lg-4"> 
                            <p:outputLabel value="#{loc.saleprice}" for="txtPrice2" class="Fs12 FontBold"/>
                            <p:inputNumber id="txtPrice2" value="#{stockDetailTabBean.stock.salePriceListItem.price}" minValue="0" required="true"
                                           decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                           roundMethod="D"  symbolPosition="#{sessionBean.locale=='tr' ? 'p': 's'}" 
                                           class="Wid90 TexAlRight" placeholder="#{loc.saleprice}" >       
                                <p:ajax event="keyup" update="tbvStokProc:frmStockDetailTab:txtUnitPrice" global="false"/>
                            </p:inputNumber>
                        </div>
                        <div class="ui-g-12 ui-md-4 ui-lg-4">     
                            <p:outputLabel value="#{loc.currency}" for="slcCurrency2" class="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcCurrency2" value="#{stockDetailTabBean.stock.salePriceListItem.currency.id}" styleClass="Wid95" required="true">
                                <f:selectItems value="#{sessionBean.currencies}" var="currency4" itemLabel="#{currency4.nameMap.get(sessionBean.langId).name}" itemValue="#{currency4.id}" />
                                <p:ajax event="change" update="tbvStokProc:frmStockDetailTab:txtUnitPrice" global="false"/>
                            </p:selectOneMenu>
                        </div> 
                        <div class="ui-g-12 ui-md-4 ui-lg-3">     
                            <p:outputLabel value="#{loc.istaxincluded}" for="slcIsTaxIncluded2" class="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcIsTaxIncluded2" value="#{stockDetailTabBean.stock.salePriceListItem.is_taxIncluded}"  required="true">
                                <f:selectItem itemLabel="#{loc.no}" itemValue="false" />
                                <f:selectItem itemLabel="#{loc.yes}" itemValue="true" />
                            </p:selectOneMenu>
                        </div> 
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6">
                        <div class="ui-g-12 ui-md-4 ui-lg-4"> 
                            <p:outputLabel value="#{loc.purchaseprice}" for="txtPrice" class="Fs12 FontBold"/>
                            <p:inputNumber id="txtPrice" value="#{stockDetailTabBean.stock.purchasePriceListItem.price}" minValue="0"
                                           decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                           roundMethod="D"  symbolPosition="#{sessionBean.locale=='tr' ? 'p': 's'}" readonly="true"
                                           class="Wid90 TexAlRight" placeholder="#{loc.purchaseprice}" >                 
                            </p:inputNumber>
                        </div>
                        <div class="ui-g-12 ui-md-4 ui-lg-4">     
                            <p:outputLabel value="#{loc.currency}" for="slcCurrency1" class="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcCurrency1" value="#{stockDetailTabBean.stock.purchasePriceListItem.currency.id}" disabled="true" styleClass="Wid95">
                                <f:selectItems value="#{sessionBean.currencies}" var="currency5" itemLabel="#{currency5.nameMap.get(sessionBean.langId).name}" itemValue="#{currency5.id}" />
                            </p:selectOneMenu>
                        </div> 
                        <div class="ui-g-12 ui-md-4 ui-lg-3">     
                            <p:outputLabel value="#{loc.istaxincluded}" for="slcIsTaxIncluded" class="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcIsTaxIncluded" value="#{stockDetailTabBean.stock.purchasePriceListItem.is_taxIncluded}" disabled="true" >
                                <f:selectItem itemLabel="#{loc.no}" itemValue="false" />
                                <f:selectItem itemLabel="#{loc.yes}" itemValue="true" />
                            </p:selectOneMenu>
                        </div> 
                    </div>
                </div>
            </h:panelGroup>
        </div>

    </h:form>


    <div class="EmptyBox10" />

    <ui:include src="stocktaxgroupstab.xhtml" />


    <p:overlayPanel id="olpIncomeExpense" widgetVar="olp_IncomeExpense"  showEvent="none" modal="true" transient="true" for="frmStockDetailTab:btnIncome"  my="right top" at="left bottom" dismissable="true" hideEffect="blind" showCloseIcon="true" class="Wid30">
        <ui:include src="/pages/general/common/incomeexpensebook.xhtml">
            <ui:param name="updateBean" value='#{stockDetailTabBean}' />
            <ui:param name="type" value='stockDetailTabBean' />
            <ui:param name="parameters" value='#{[stockDetailTabBean.isIncome, sessionBean.user.lastBranch.id]}' /> 
            <ui:param name="form" value='frmIncomeExpenseBookFilter' /> 
        </ui:include>
    </p:overlayPanel>



    <p:overlayPanel id="olpIncomeExpense1" widgetVar="olp_IncomeExpense1"  showEvent="none" modal="true" transient="true" for="frmStockDetailTab:btnExpense"  my="right top" at="left bottom" dismissable="true" hideEffect="blind" showCloseIcon="true" class="Wid30">
        <ui:include src="/pages/general/common/incomeexpensebook.xhtml">
            <ui:param name="updateBean" value='#{stockDetailTabBean}' />
            <ui:param name="type" value='stockDetailTabBean' />
            <ui:param name="parameters" value='#{[stockDetailTabBean.isIncome, sessionBean.user.lastBranch.id]}' /> 
            <ui:param name="form" value='frmIncomeExpenseBookFilter1' /> 
        </ui:include>
    </p:overlayPanel>





</ui:composition>
