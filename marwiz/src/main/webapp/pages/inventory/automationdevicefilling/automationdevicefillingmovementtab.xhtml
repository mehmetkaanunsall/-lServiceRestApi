<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">



    <h:form id="frmMovementTab" style="padding: 5px 6px 0px 6px;">
        <div class="EmptyBox10" />
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.movements}"/>
            <ui:param name="selectedObjectName" value=""/>
            <ui:param name="bean" value='#{automationDeviceFillingMovementTabBean}' />
            <ui:param name="update" value="tbvAutomationDeviceFillingProcess:frmMovementTab:pgrMovementProcess tbvAutomationDeviceFillingProcess:frmMovementDataTable:dtbMovement" />
            <ui:param name="btnSaveId" value="false" />
            <ui:param name="renderback" value='false'/>
            <ui:param name="btnDeleteId" value='false' /> 
            <ui:param name="renderSelectedObject" value='false'/>
            <ui:param name="renderedFindReport" value='true'/>
        </ui:include>


        <h:panelGroup id="pgrMovementProcess" layout="block" transient="true">  
            <div class="ui-g divContent">
                <div class="ui-g-12">
                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                        <p:outputLabel value="#{loc.startdate}" for="cldStartDate" styleClass="Fs12 FontBold"/>
                        <p:calendar  id="cldStartDate" class="datepicker" value="#{automationDeviceFillingMovementTabBean.beginDate}" required="true" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" timeControlType="select"  showOn="button" showButtonPanel="true" placeholder="#{loc.startdate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                            <p:ajax event="change" update="cldStartDate" resetValues="true" global="false"/>
                        </p:calendar>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-3">
                        <p:outputLabel value="#{loc.enddate}" for="cldEndDate" styleClass="Fs12 FontBold"/>
                        <p:calendar  id="cldEndDate" class="datepicker" value="#{automationDeviceFillingMovementTabBean.endDate}" required="true" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" timeControlType="select"  showOn="button" showButtonPanel="true" placeholder="#{loc.enddate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                            <p:ajax event="change" update="cldEndDate" resetValues="true" global="false"/>
                        </p:calendar>
                    </div>

                </div>  
            </div>
        </h:panelGroup>
    </h:form>
    <div class="EmptyBox10" />
    <h:panelGroup id="pgrMovementDatatableProcess">
        <div class="ui-g">
            <div class="ui-g-12">
                <h:panelGroup rendered="#{automationDeviceFillingMovementTabBean.isFind}">

                    <ui:include src="/pages/general/common/datagridtoolbarreport.xhtml" >
                        <ui:param name="bean" value="#{automationDeviceFillingMovementTabBean}"/>
                        <ui:param name="datatable" value="tbvAutomationDeviceFillingProcess:frmMovementDataTable:dtbMovement" />
                        <ui:param name="fileName" value=""/>
                        <ui:param name="renderedToggler" value='false'/>
                        <ui:param name="renderedExcel" value='false'/>
                        <ui:param name="renderedPdf" value='false'/>
                        <ui:param name="renderedPrint" value='false'/>
                    </ui:include>

                    <h:form id="frmMovementDataTable">

                        <p:dataTable  id="dtbMovement" var="movement"  value="#{automationDeviceFillingMovementTabBean.listOfObjects}" widgetVar="movementPF" selection="#{automationDeviceFillingMovementTabBean.selectedObject}"  selectionMode="single" emptyMessage="#{loc.norecordsfound}"
                                      rowsPerPageTemplate="#{sessionBean.user.gridSize}" rows="#{sessionBean.user.defualtGridSize}"  rowKey="#{movement.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                                      paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}" 
                                      reflow="true" lazy="true" class="dialogDatatable"  >


                            <p:column id="clmMovementDate" headerText="#{loc.date}"  >
                                <h:outputText value="#{movement.processDate}">
                                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                                </h:outputText>
                            </p:column>


                            <p:column id="clmStock" headerText="#{loc.stock}" >
                                <h:outputText value="#{movement.automationDeviceItem.stock.name}"/>
                            </p:column>

                            <p:column id="clmShelf" headerText="#{loc.shelfno}" >
                                <h:outputText value="#{movement.automationDeviceItem.shelfNo}"/>
                            </p:column>

                            <p:column id="clmProcessType" headerText="#{loc.processtype}" >
                                <h:outputText value="#{movement.type==0 ? loc.sales : movement.type==1 ? loc.return : loc.transfering} #{movement.type==2 ? '(' : ''} #{movement.type==2 and movement.isDirection ? loc.entry   : movement.type==2 and !movement.isDirection ? loc.exit : ''} #{movement.type==2 ? ')' : ''}"/>
                            </p:column>

                            <p:column id="clmQuantity" headerText="#{loc.quantity}" >
                                <h:outputText value="#{movement.quantity}" style="float: right;">
                                     <f:converter converterId="currencyConverter"  />
                                    <f:attribute name="type" value="unit" />
                                    <f:attribute name="unit" value="#{movement.automationDeviceItem.stock.unit}" />
                                </h:outputText>
                            </p:column>
                        </p:dataTable>  
                    </h:form>

                </h:panelGroup>
            </div>
        </div>
    </h:panelGroup>


</ui:composition>
