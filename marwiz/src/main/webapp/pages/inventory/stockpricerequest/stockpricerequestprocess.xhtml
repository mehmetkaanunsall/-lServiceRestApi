<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <!-- 
Açıklama : Ürün fiyat talepleri işlem sayfası içim xhtml
Yazan    : Esra ÇABUK
Bean     : stockPriceRequestBean
Sayfa    : Ürün Fiyat Talepleri
    --> 
    <h:form id="frmStockProcess">  

        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.stockrequestprocesses}"/>
            <ui:param name="bean" value='#{stockPriceRequestBean}' />
            <ui:param name="update" value="pgrStockProcess" />
            <ui:param name="btnSaveId" value="#{stockPriceRequestBean.processType==1 and stockPriceRequestBean.getRendered(45, 0)}" />
            <ui:param name="renderback" value='false'/>
            <ui:param name="btnDeleteId" value='false' /> 

        </ui:include>


        <h:panelGroup id="pgrStockProcess" class="divContent" layout="block">  
            <div class="ui-g">

                <div class="ui-g-12 ui-md-6 ui-lg-6">     
                    <p:outputLabel value="#{loc.stock}" for="txtStock" class="Fs12 FontBold"/>
                    <p:inputText id="txtStock" value="#{stockPriceRequestBean.selectedObject.stock.name}" onclick="showBook()" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}"  placeholder="#{loc.stock} ">

                    </p:inputText>
                    <p:commandLink id="btnStock" class="commandLinkPositionForBookFilter" process="@this" oncomplete="PF('olp_stock').loadContents();" >
                        <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                        <p:ajax listener="#{stockBookFilterBean.findFilterListLazyLoading([],'frmStockBookFilter','olp_stock','stockpricerequest')}" />
                    </p:commandLink>
                </div> 
                <div class="ui-g-12 ui-md-6 ui-lg-6"></div>
                <div class="ui-g-12 ui-md-6 ui-lg-6"> 
                    <p:outputLabel value="#{loc.availablesaleprice}" for="txtAvailablePrice" class="Fs12 FontBold"/>
                    <p:inputNumber id="txtAvailablePrice" value="#{stockPriceRequestBean.selectedObject.stock.stockInfo.currentSalePrice}" minValue="0"
                                   decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                   roundMethod="D" symbolPosition="#{sessionBean.locale=='tr' ? 's': 'p'}" symbol="#{sessionBean.currencySignOrCode(stockPriceRequestBean.selectedObject.stock.stockInfo.currentSaleCurrency.id, 0)}"
                                   readonly="true" class="Wid90 TexAlRight" placeholder="#{loc.availablesaleprice}" >                 
                    </p:inputNumber>
                </div>
                <div class="ui-g-12 ui-md-6 ui-lg-6"> 
                    <p:outputLabel value="#{loc.recommendedsaleprice}" for="txtRecommendedSalePrice" class="Fs12 FontBold"/>
                    <p:inputNumber id="txtRecommendedSalePrice" value="#{stockPriceRequestBean.selectedObject.stock.stockInfo.recommendedPrice}" minValue="0"
                                   decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                   roundMethod="D" symbolPosition="#{sessionBean.locale=='tr' ? 's': 'p'}" symbol="#{sessionBean.currencySignOrCode(stockPriceRequestBean.selectedObject.stock.stockInfo.currency.id, 0)}"
                                   readonly="true" class="Wid90 TexAlRight" placeholder="#{loc.recommendedsaleprice}" >                 
                    </p:inputNumber>
                </div>
                <div class="ui-g-12 ui-md-6 ui-lg-6"> 
                    <p:outputLabel value="#{loc.requestedsaleprice}" for="txtRequestPrice" class="Fs12 FontBold"/>
                    <p:inputNumber id="txtRequestPrice" value="#{stockPriceRequestBean.selectedObject.requestPrice}" minValue="0"
                                   decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}" thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                   readonly="#{stockPriceRequestBean.processType==2}" roundMethod="D" required="true" class="Wid90 TexAlRight" placeholder="#{loc.requestedsaleprice}" >                 
                    </p:inputNumber>
                </div>
                <div class="ui-g-12 ui-md-6 ui-lg-6">     
                    <p:outputLabel value="#{loc.currency}" for="slcRequestCurrency" class="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcRequestCurrency" value="#{stockPriceRequestBean.selectedObject.requestCurrency.id}" required="true" styleClass="Wid95" disabled="#{stockPriceRequestBean.processType==2}">
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/>
                        <f:selectItems value="#{sessionBean.currencies}" var="currency" itemLabel="#{currency.nameMap.get(sessionBean.langId).name}" itemValue="#{currency.id}" />
                    </p:selectOneMenu>
                </div> 

                <div class="ui-g-12 ui-md-12 ui-lg-12">
                    <p:outputLabel value="#{loc.description}" for="txtDescription" styleClass="Fs12 FontBold"/>
                    <p:inputTextarea id="txtDescription"  value="#{stockPriceRequestBean.selectedObject.description}" rows="1" cols="5" autoResize="false" style="resize: none;"  readonly="#{stockPriceRequestBean.processType==2}" placeholder="#{loc.description}"  /> 
                </div>  


            </div>
            <p:remoteCommand name="showBook" process="@this" oncomplete="PF('olp_stock').loadContents()" actionListener="#{stockBookFilterBean.findFilterListLazyLoading([],'frmStockBookFilter','olp_stock','stockpricerequest')}" />
        </h:panelGroup>
    </h:form> 
    <!-- stok listesinde kitaba basıldığında stokların listendiği dialog-->
    <ui:include src="/pages/general/common/stockbook.xhtml" >
        <ui:param name="updateBean" value='#{stockPriceRequestBean}' />
        <ui:param name="for" value='frmStockProcess:btnStock' />
        <ui:param name="type" value='stockpricerequest' />
        <ui:param name="parameters" value='#{[]}' /> 
        <ui:param name="columnsize" value='4' />
        <ui:param name="form" value='frmStockBookFilter' /> 
        <ui:param name="overlay" value="olp_stock" />
    </ui:include>


</ui:composition>
