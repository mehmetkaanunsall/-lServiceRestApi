<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:form id="frmBranchProcess">
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.branchprocesses}"/>
            <ui:param name="bean" value='#{bean}' />
            <ui:param name="update" value="pgrBankandbranchProcess" />
            <ui:param name="btnSaveId" value="#{bean.getRendered(196, 0)}" />     
            <ui:param name="renderback" value='false'/>
            <ui:param name="btnDeleteId" value='false' />
            <ui:param  name="pageId" value="244" />
            <c:if test="#{bean.processType==4}">
                <ui:param name="btnDeleteId" value="#{bean.getRendered(197, 0)}" />
                <ui:param name="btnTestBeforeDeleteId" value='true' />
            </c:if>
        </ui:include>

        <h:panelGroup id="pgrBankandbranchProcess" layout="block">
            <div class="ui-g divContent">
                <p:focus for="txtBranchCode" />
                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.branchcode}" for="txtBranchCode" class="Fs12 FontBold"/>
                    <p:inputText id="txtBranchCode" value="#{bean.selectedBankBranch.code}" required="true"  placeholder="#{loc.branch} ">
                        <p:keyFilter regEx="/[0-9]/" preventPaste="false"/>
                        <f:validateRegex pattern="[0-9]*" />
                    </p:inputText>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.branchname}" for="txtBramchName" styleClass="Fs12 FontBold" />
                    <p:inputText id="txtBramchName" value="#{bean.selectedBankBranch.name}" required="true"  placeholder="#{loc.bankname} "/>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.phone}" for="txtPhone" class="Fs12 FontBold"/>
                    <p:inputMask id="txtPhone" value="#{bean.selectedBankBranch.phone}" required="true"  placeholder="#{loc.phone} " mask="(999) 999-99-99"/>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.mail}" for="txtMail" class="Fs12 FontBold"/>
                    <p:inputText id="txtMail" value="#{bean.selectedBankBranch.email}" required="true"  placeholder="#{loc.mail} ">
                        <f:validator validatorId="emailValidator"/>
                    </p:inputText>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.country}" for="slcCountry" class="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcCountry" value="#{bean.selectedBankBranch.country.id}" filter="true" filterMatchMode="contains" required="true" >
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="" itemDisabled="true" />
                        <f:selectItems value="#{sessionBean.countries}" var="country" itemLabel="#{country.getName(sessionBean.langId)}" itemValue="#{country.id}" /> 
                        <p:ajax  listener="#{citiesAndCountiesBean.updateCity(bean.selectedBankBranch.country,bean.selectedBankBranch.city,bean.selectedBankBranch.county)}" update="slcCity slcCounty" global="false"/>
                    </p:selectOneMenu>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.city}" for="slcCity" class="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcCity" value="#{bean.selectedBankBranch.city.id}" filter="true" filterMatchMode="contains" required="true">
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="" itemDisabled="true" />
                        <f:selectItems value="#{citiesAndCountiesBean.cities}" itemLabel="#{city.getName(sessionBean.langId)}" itemValue="#{city.id}" var="city"/>
                        <p:ajax  listener="#{citiesAndCountiesBean.updateCounty(bean.selectedBankBranch.city.country,bean.selectedBankBranch.city,bean.selectedBankBranch.county)}"   update="slcCounty" global="false"/>
                    </p:selectOneMenu>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.county}" for="slcCounty" class="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcCounty" value="#{bean.selectedBankBranch.county.id}" filter="true" filterMatchMode="contains" required="true">
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="" itemDisabled="true" />
                        <f:selectItems value="#{citiesAndCountiesBean.counties}" itemLabel="#{county.name}" itemValue="#{county.id}" var="county"/>
                    </p:selectOneMenu>
                </div>

                <div class="ui-g-12 ui-md-3">
                    <p:outputLabel value="#{loc.statu}" for="slcStatu" class="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcStatu" value="#{bean.selectedBankBranch.status.id}" required="true">
                        <f:selectItems value="#{sessionBean.getStatus(12)}" itemLabel="#{statu.nameMap.get(sessionBean.langId).name}" itemValue="#{statu.id}" var="statu"/>
                    </p:selectOneMenu>
                </div>

                <div class="ui-g-12 ui-md-12">
                    <p:outputLabel value="#{loc.address}" for="txtAddress" class="Fs12 FontBold"/>
                    <p:inputText id="txtAddress" required="true" value="#{bean.selectedBankBranch.address}" placeholder="#{loc.address} "/>
                </div>


            </div>
        </h:panelGroup>
    </h:form>

    <div class="EmptyBox10" />

    <h:panelGroup id="pngBranchResponsibleTab">
        <p:tabView id="tbvBankBranchProc" activeIndex="#{marwiz.tabIndex}" rendered="#{bean.processType==4 and bean.getRendered(64, 1)}" scrollable="true" dynamic="true" cache="true">
            <p:ajax event="tabChange" listener="#{bean.onTabChange}"/>
            <p:tab id="tab64" title="#{loc.responsibles}" rendered="#{bean.getRendered(64, 1)}">
                <c:if test="#{bean.activeIndex==64}" > 
                    <ui:include src="/pages/general/responsible/responsible.xhtml" >
                        <ui:param name="btnNewId" value="#{responsibleBean.getRendered(280, 0)}"/>
                    </ui:include>
                </c:if>
            </p:tab>
        </p:tabView>
    </h:panelGroup>


</ui:composition>

