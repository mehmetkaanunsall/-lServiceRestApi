   
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">



    <ui:include src="/pages/general/common/datagridtoolbar.xhtml" >
        <ui:param name="bean" value="#{discountBean}"/>   <!-- Bean -->
        <ui:param name="update" value=""/>  <!-- Yeni butonuna basınca açılacak sayfa  -->
        <ui:param name="btnNewId" value="#{discountBean.getRendered(95, 0)}"/>  <!-- buton id yetki kontrolü için  -->
        <ui:param name="datatable" value="frmDiscount:dtbDiscount" />  <!-- datatable  -->
        <ui:param name="dtbWidgetVar" value="discountPF" />  <!--   datatable WidgetVar  -->
        <ui:param name="fileName" value="#{loc.campaigns}"/>,
        <ui:param name="renderedFilter" value='true'/>
        <ui:param name="renderedToggler" value='true'/>
        <ui:param name="renderedExel" value='true'/>
        <ui:param name="renderedPdf" value='true'/>
        <ui:param name="renderedAdd" value='true'/>
    </ui:include>

    <h:form id="frmDiscount">

        <p:dataTable  id="dtbDiscount" widgetVar="discountPF"  selectionMode="single" var="Discount" rowKey="#{Discount.id}" value="#{discountBean.listOfObjects}" selection="#{discountBean.selectedObject}" emptyMessage="#{loc.norecordsfound}"
                      rows="#{sessionBean.user.defualtGridSize}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                      rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}" 
                      reflow="true" lazy="true" rowStyleClass="#{Discount.status.id==46 ? 'ColumnColorRed' : null}">

            <p:ajax event="#{sessionBean.user.gridRowSelect}" listener="#{discountBean.update()}"  />
            <p:ajax event="sort" listener="#{discountBean.sortListener}" />
            <p:column id="clmName" headerText="#{loc.name}" visible="#{discountBean.toogleList[0]}" sortable="true" sortBy="#{Discount.dsc.name}"  exportable="#{discountBean.toogleList[0]}">
                <h:outputText value="#{Discount.name}" />
            </p:column>
            <p:column id="clmStartDate" headerText="#{loc.startdate}" visible="#{discountBean.toogleList[1]}" sortable="true" sortBy="#{Discount.dsc.begindate}"   exportable="#{discountBean.toogleList[1]}">
                <h:outputText value="#{Discount.beginDate}" >
                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat}"/>
                </h:outputText>
            </p:column>
            <p:column id="clmEndDate" headerText="#{loc.enddate}" visible="#{discountBean.toogleList[2]}" sortable="true" sortBy="#{Discount.dsc.enddate}"  exportable="#{discountBean.toogleList[2]}">
                <h:outputText value="#{Discount.endDate}" >
                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat}"/>
                </h:outputText>
            </p:column>
            <p:column id="clmBranches" headerText="#{loc.allbranches}" visible="#{discountBean.toogleList[3]}" sortable="true" sortBy="#{Discount.dsc.is_allbranch}"  exportable="#{discountBean.toogleList[3]}">
                <h:outputText value="#{Discount.isAllBranch == true ? loc.yes : loc.no}" />
            </p:column>

            <p:column id="clmIsAllCustomer" headerText="#{loc.allcustomers}" visible="#{discountBean.toogleList[4]}" sortable="true" sortBy="#{Discount.dsc.is_allcustomer}"   exportable="#{discountBean.toogleList[4]}">
                <h:outputText value="#{Discount.isAllCustomer == true ? loc.yes : loc.no}" />
            </p:column>

            <p:column id="clmIsRetailCustonmer" headerText="#{loc.retailsalecustomer}" visible="#{discountBean.toogleList[5]}" sortable="true" sortBy="#{Discount.dsc.is_retailcustomer}"   exportable="#{discountBean.toogleList[5]}">
                <h:outputText value="#{Discount.isRetailCustomer == true ? loc.yes : loc.no}" />
            </p:column>

            <p:column id="clmIsInvoice" headerText="#{loc.isitoninvoicebasis}" visible="#{discountBean.toogleList[6]}" sortable="true" sortBy="#{Discount.dsc.is_invoice}"  exportable="#{discountBean.toogleList[6]}">
                <h:outputText value="#{Discount.isInvoice==true ? loc.yes : loc.no}" />   
            </p:column>
            <p:column id="clmCenterCampaign" headerText="#{loc.centercampaign}" visible="#{discountBean.toogleList[7]}" sortable="true" sortBy="#{Discount.dsc.centercampaign_id}"  exportable="#{discountBean.toogleList[7]}" rendered="#{sessionBean.user.lastBranchSetting.isCentralIntegration}">
                <h:outputText value="#{Discount.centercampaign_id == 0 ? loc.no : loc.yes}" />
            </p:column>
            <p:column id="clmStatus" headerText="#{loc.statu}" visible="#{discountBean.toogleList[8]}" sortable="true" sortBy="#{Discount.dsc.status_id}"  exportable="#{discountBean.toogleList[8]}">
                <h:outputText value="#{Discount.status.tag}" />
            </p:column>

            


        </p:dataTable>  

        <p:growl id="grwThrowAwayFromPageMessage" showDetail="true" globalOnly="true" life="5000"/> 
    </h:form>


</ui:composition>

