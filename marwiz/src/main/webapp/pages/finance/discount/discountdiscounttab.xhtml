<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">




    <h:form id="frmDiscountTab"  >


        <div class="ContainerIndent">
            <ui:include src="/pages/general/common/tabgridtoolbar.xhtml">

                <ui:param name="bean" value="#{discountDiscountTabBean}"/>
                <ui:param name="btnNewId" value="#{discountDiscountTabBean.selectedDiscount.centercampaign_id == 0 and discountDiscountTabBean.getRendered(98, 0)}"/>
                <ui:param name="update" value="frmDiscountDiscountTabProcess" />
                <ui:param name="outputtext" value="#{loc.campaigndetails}" />
            </ui:include>
            <p:dataTable  id="dtbDiscountTab" value="#{discountDiscountTabBean.listOfObjects}"  rowKey="#{DiscountItem.id}" var="DiscountItem" reflow="true" resizableColumns="true"
                          selection="#{discountDiscountTabBean.selectedObject}" class="dialogDatatable" widgetVar="discountTabPF" selectionMode="single" emptyMessage="#{loc.norecordsfound}" >

                <p:ajax event="#{sessionBean.user.gridRowSelect}" listener="#{discountDiscountTabBean.createDialog(2)}" resetValues="true" update="frmDiscountDiscountTabProcess"  />

                <p:column id="clmDiscountRate" headerText="#{loc.discountrateamount}" class="TexAlRight" width="20%" sortBy="#{DiscountItem.discountAmount==0 ? DiscountItem.discountRate : DiscountItem.discountAmount}">
                    <h:outputText value="#{DiscountItem.discountAmount}"  rendered="#{DiscountItem.discountAmount!=0 and DiscountItem.discountAmount!=null}">
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="currency" value="#{sessionBean.user.lastBranch.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>

                    <h:outputText rendered="#{DiscountItem.discountRate!=0 and DiscountItem.discountRate!=null}" value="#{DiscountItem.discountRate}"  >
                        <f:converter converterId="currencyConverter" />
                        <f:attribute name="type" value="" />
                    </h:outputText>
                    <h:outputText rendered="#{DiscountItem.discountRate!=0 and DiscountItem.discountRate!=null}" value="%"  >
                    </h:outputText>

                </p:column>



                <p:column id="clmCriteria" headerText="#{loc.criteria}">

                    <h:outputText value=" #{loc.kdv} : " class="FontBold" rendered="#{DiscountItem.isTaxIncluded!=null}"/>
                    <h:outputText value="#{DiscountItem.isTaxIncluded == true ? loc.inclusive : loc.except }" rendered="#{DiscountItem.isTaxIncluded!=null}" />


                    <h:outputText value=" #{loc.stock} : " rendered="#{DiscountItem.stock.id!=0}" class="FontBold"/>
                    <h:outputText value=" #{DiscountItem.stock.name}" rendered="#{DiscountItem.stock.id!=0}"/>

                    <h:outputText value=" #{loc.pricelist} : " rendered="#{DiscountItem.priceList.id!=0}" class="FontBold"/>
                    <h:outputText value=" #{DiscountItem.priceList.name}" rendered="#{DiscountItem.priceList.id!=0}"/>


                    <h:outputText value=" #{loc.startdate}" rendered="#{DiscountItem.beginDate!=null}" class="FontBold"/>
                    <h:outputText value=" : " rendered="#{DiscountItem.beginDate!=null}" class="FontBold"/>
                    <h:outputText value="#{DiscountItem.beginDate}" rendered="#{DiscountItem.beginDate!=null}" >
                        <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat}"/>
                    </h:outputText>

                    <h:outputText value=" #{loc.enddate}" rendered="#{DiscountItem.endDate!=null}" class="FontBold"/>
                    <h:outputText value=" : " rendered="#{DiscountItem.endDate!=null}" class="FontBold"/>
                    <h:outputText value="#{DiscountItem.endDate}" rendered="#{DiscountItem.endDate!=null}">
                        <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat}"/>
                    </h:outputText>

                    <h:outputText value=" #{loc.starttime}" rendered="#{DiscountItem.beginTime!=null}" class="FontBold"/>
                    <h:outputText value=" : " rendered="#{DiscountItem.beginTime!=null}" class="FontBold"/>
                    <h:outputText value="#{DiscountItem.beginTime}" rendered="#{DiscountItem.beginTime!=null}">
                        <f:convertDateTime pattern="HH:mm"/>
                    </h:outputText>

                    <h:outputText value=" #{loc.endtime}" rendered="#{DiscountItem.endTime!=null}" class="FontBold"/>
                    <h:outputText value=" : " rendered="#{DiscountItem.endTime!=null}" class="FontBold"/>
                    <h:outputText value="#{DiscountItem.endTime}" rendered="#{DiscountItem.endTime!=null}" >
                        <f:convertDateTime pattern="HH:mm"/>
                    </h:outputText>

                    <h:outputText value=" #{loc.startamount} : " rendered="#{DiscountItem.beginPrice!=0 and DiscountItem.beginPrice!=null}" class="FontBold"/>
                    <h:outputText value=" #{DiscountItem.beginPrice}" rendered="#{DiscountItem.beginPrice!=0 and DiscountItem.beginPrice!=null}">

                    </h:outputText>

                    <h:outputText value=" #{loc.endamount} : " rendered="#{DiscountItem.endPrice!=0 and DiscountItem.endPrice!=null}" class="FontBold"/>
                    <h:outputText value=" #{DiscountItem.endPrice}" rendered="#{DiscountItem.endPrice!=0 and DiscountItem.endPrice!=null}">

                    </h:outputText>


                    <h:outputText value=" #{loc.brand} : " rendered="#{DiscountItem.brand.id!=0}" class="FontBold"/>
                    <h:outputText value=" #{DiscountItem.brand.name}" rendered="#{DiscountItem.brand.id!=0}"/>

               <!--  <h:outputText value=" #{loc.discountcode} : " class="FontBold" rendered="#{!discountDiscountTabBean.selectedDiscount.isInvoice}"/>
                    <h:outputText value=" #{DiscountItem.isDiscountCode == true ? loc.yes : loc.no }" rendered="#{!discountDiscountTabBean.selectedDiscount.isInvoice}"/> -->

                    <h:outputText value=" #{loc.salecount} : " rendered="#{DiscountItem.saleCount!=0}" class="FontBold"/>
                    <h:outputText value=" #{DiscountItem.saleCount}" rendered="#{DiscountItem.saleCount!=0}"/>

                    <h:outputText value=" #{loc.days} : " rendered="#{DiscountItem.specialDays.size()!=0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.specialDays.size()!=0}"/>

                    <h:outputText value=" #{loc.months} : " rendered="#{DiscountItem.specialMonths.size()!=0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.specialMonths.size()!=0}"/>

                    <h:outputText value=" #{loc.dayofmonth} : " rendered="#{DiscountItem.specialMonthDays.size()!=0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.specialMonthDays.size()!=0}"/>

                    <h:outputText value=" #{loc.necessarystock} : " rendered="#{DiscountItem.necessaryStocks.length()>0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.necessaryStocks.length()>0}"/>

                    <h:outputText value=" #{loc.promotionstock} : " rendered="#{DiscountItem.promotionStocks.length()>0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.promotionStocks.length()>0}"/>

                    <h:outputText value=" #{loc.necessarybrand} : " rendered="#{DiscountItem.necessaryBrands.length()>0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.necessaryBrands.length()>0}"/>

                    <h:outputText value=" #{loc.promotionbrand} : " rendered="#{DiscountItem.promotionBrands.length()>0}" class="FontBold"/>
                    <h:outputText value=" #{loc.available} " rendered="#{DiscountItem.promotionBrands.length()>0}"/>


                </p:column>
            </p:dataTable>  


        </div>
    </h:form>

    <p:overlayPanel id="ovlHistory" widgetVar="ovlHistory" dynamic="true" for="frmDiscountDiscountTabProcess:btnHistoryProcess"  dismissable="true" modal="true" hideEffect="blind" class="Wid50" showCloseIcon="true" transient="true" >  
        <ui:include src="/pages/general/common/historydatatabledlg.xhtml">
            <ui:param name="bean" value='#{discountDiscountTabBean}' />
        </ui:include>
    </p:overlayPanel> 


</ui:composition>