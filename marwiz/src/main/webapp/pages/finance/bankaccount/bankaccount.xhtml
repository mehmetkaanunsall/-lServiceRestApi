<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <ui:include src="/pages/general/common/datagridtoolbardefinition.xhtml" >
        <ui:param name="bean" value="#{bankAccountBean}"/> 
        <ui:param name="update" value=""/>  
        <ui:param name="btnNewId" value="#{bankAccountBean.getRendered(110, 0)}"/>
        <ui:param name="datatable" value='frmBankAccount:dtbBankAccount'/>
        <ui:param name="widgetvar" value='bankaccountPF' />
        <ui:param name="form" value='frmToolbarBankAccount' />
        <ui:param name="fileName" value="#{loc.bankaccounts}"/> 
        <ui:param name="renderedToggler" value='true'/>       
        <ui:param name="renderedExel" value='true'/>
        <ui:param name="renderedPdf" value='true'/>
    </ui:include>


    <h:form id="frmBankAccount">

        <p:dataTable  id="dtbBankAccount" var="BankAccount"  value="#{bankAccountBean.listOfObjects}" filteredValue="#{bankAccountBean.listOfFilteredObjects}" widgetVar="bankaccountPF" selection="#{bankAccountBean.selectedObject}"  selectionMode="single" emptyMessage="#{loc.norecordsfound}"
                      rowKey="#{BankAccount.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                      paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}" 
                      reflow="true" rowStyleClass="#{BankAccount.status.id==22 ? 'ColumnColorRed' : null}"  resizableColumns="true" draggableColumns="true"
                      rowsPerPageTemplate="#{sessionBean.user.gridSize}" rows="#{sessionBean.user.defualtGridSize}" >

            <p:ajax event="#{sessionBean.user.gridRowSelect}" listener="#{bankAccountBean.goToProcess()}" global="false" />  
            <p:ajax event="page" global="false"/>
            <p:ajax event="filter" global="false" oncomplete="updateGrid()"/>
            <p:ajax event="colReorder" listener="#{bankAccountBean.reorder}" update="frmToolbarBankAccount:toggle" />     
            <p:ajax event="colResize"  listener="#{bankAccountBean.onResize}" />

            <f:facet  name="footer"     >
                <p:inputText id="globalFilter" value="#{bankAccountBean.autoCompleteValue}"  style="display: none" />
            </f:facet>

            <p:column id="clmBankAccountName" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmBankAccountName')}" headerText="#{loc.accountname}"  sortable="true" sortBy="#{BankAccount.name}" filterable="true"  filterBy="#{BankAccount.name}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.name}"/>
            </p:column>

            <p:column id="clmAccountNumber" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmAccountNumber')}" headerText="#{loc.accountnumber}" sortable="true" sortBy="#{BankAccount.accountNumber}" filterable="true"  filterBy="#{BankAccount.accountNumber}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.accountNumber}"/>
            </p:column>

            <p:column id="clmBankName" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmBankName')}" headerText="#{loc.bankname}" sortable="true" sortBy="#{BankAccount.bankBranch.bank.name}" filterable="true"  filterBy="#{BankAccount.bankBranch.bank.name}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.bankBranch.bank.name}" />
            </p:column>

            <p:column id="clmBranch" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmBranch')}" headerText="#{loc.branchname}" sortable="true" sortBy="#{BankAccount.bankBranch.name}" filterable="true"  filterBy="#{BankAccount.bankBranch.name}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.bankBranch.name}" />
            </p:column>

            <p:column id="clmBranchCode" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmBranchCode')}" headerText="#{loc.branchcode}"  sortable="true" sortBy="#{BankAccount.bankBranch.code}" filterable="true"  filterBy="#{BankAccount.bankBranch.code}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.bankBranch.code}" />
            </p:column>

            <p:column id="clmType" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmType')}" headerText="#{loc.type}"  sortable="true" sortBy="#{BankAccount.type.tag}" filterable="true"  filterBy="#{BankAccount.type.tag}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.type.tag}" />
            </p:column>

            <p:column id="clmBalance"  sortable="true" sortBy="#{BankAccount.bankAccountBranchCon.balance}" filterable="true"  filterBy="#{BankAccount.bankAccountBranchCon.balance}" filterMatchMode="contains"  exportable="false">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <f:facet name="header" class="TexAlCenter">
                    <h:outputText value="#{loc.balance}"/>
                </f:facet>

                <h:outputText value="#{BankAccount.bankAccountBranchCon.balance}" style="float: right;">
                    <f:converter converterId="currencyConverter" />
                    <f:attribute name="currency" value="#{BankAccount.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>

                <h:panelGroup rendered="#{bankAccountBean.renderedColumnValue(BankAccount.bankAccountBranchCon.balance,1)}" >
                    <li class="Fleft BordRad10 TexAlLeft" >
                        <i class="fa fa-arrow-down red"></i>
                    </li>
                </h:panelGroup>
                <h:panelGroup rendered="#{bankAccountBean.renderedColumnValue(BankAccount.bankAccountBranchCon.balance,2)}" >
                    <li  class="Fleft BordRad10 TexAlLeft">
                        <i class="fa fa-arrow-up green"></i>
                    </li>
                </h:panelGroup>

            </p:column>
            <p:column id="clmBalanceExport" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmBalance')}" toggleable="false" sortable="true" sortBy="#{BankAccount.bankAccountBranchCon.balance}" filterable="true"  filterBy="#{BankAccount.bankAccountBranchCon.balance}" filterMatchMode="contains" visible="false" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <f:facet name="header" class="TexAlCenter">
                    <h:outputText value="#{loc.balance}"/>
                </f:facet>

                <h:outputText value="#{BankAccount.bankAccountBranchCon.balance}" style="float: right;">
                    <f:converter converterId="currencyConverter" />
                    <f:attribute name="currency" value="#{BankAccount.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>


            </p:column>


            <p:column id="clmCurrency" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmCurrency')}" headerText="#{loc.currency}" sortBy="#{BankAccount.currency.code} #{BankAccount.currency.tag}" filterable="true"  filterBy="#{BankAccount.currency.code} #{BankAccount.currency.tag}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.currency.code} - #{BankAccount.currency.tag}" />
            </p:column>

            <p:column id="clmStatu" exportable="#{bankAccountBean.getColumnVisibility('frmBankAccount:dtbBankAccount:clmStatu')}" headerText="#{loc.statu}" sortBy="#{BankAccount.status.tag}" filterable="true"  filterBy="#{BankAccount.status.tag}" filterMatchMode="contains" >
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet>
                <h:outputText value="#{BankAccount.status.tag}" />
            </p:column>

            <p:columnGroup id="clmColumGroup" rendered="#{bankAccountBean.listOfObjects.size()>0}"  type="footer" >
                <p:column id="clmBankAccountName2"  >
                    <f:facet name="footer">
                        <h:outputText value=""/>
                    </f:facet>
                </p:column>

                <p:column id="clmAccountNumber2" >
                    <f:facet name="footer">
                        <h:outputText value=""/>
                    </f:facet>
                </p:column>

                <p:column id="clmBankName2" >
                    <f:facet name="footer">
                        <h:outputText value="" />
                    </f:facet>
                </p:column>

                <p:column id="clmBranch2" >
                    <f:facet name="footer">
                        <h:outputText value="" />
                    </f:facet>
                </p:column>

                <p:column id="clmBranchCode2" >
                    <f:facet name="footer">
                        <h:outputText value="" />
                    </f:facet>
                </p:column>

                <p:column id="clmType2" >
                    <f:facet name="footer">
                        <h:outputText value="" />
                    </f:facet>
                </p:column>

                <p:column id="clmBalance2">
                    <f:facet name="footer">
                        <h:outputText value="#{bankAccountBean.subTotalBalance}" class="Fright FontBold">
                        </h:outputText>
                    </f:facet>

                </p:column>

                <p:column id="clmBalanceExport2" visible="false">
                    <f:facet name="footer">
                        <h:outputText value="">
                        </h:outputText>
                    </f:facet>

                </p:column>

                <p:column id="clmCurrency2" >
                    <f:facet name="footer">
                        <h:outputText value="" /> 
                    </f:facet>
                </p:column>

                <p:column id="clmStatu2" >
                    <f:facet name="footer">
                        <h:outputText value="" />
                    </f:facet>
                </p:column>
            </p:columnGroup>

        </p:dataTable> 


        <p:remoteCommand name="order" actionListener="#{bankAccountBean.bringOrder('frmBankAccount:dtbBankAccount')}" oncomplete="updateToggle()" autoRun="true"  global="false" />
        <p:remoteCommand name="updateGrid" action="#{bankAccountBean.calcSubTotals()}" actionListener="#{bankAccountBean.updateGridProperties('frmBankAccount:dtbBankAccount')}"  global="false" />
        <p:remoteCommand name="updateToggle"  update="frmToolbarBankAccount:toggle" delay="500" global="false" />
    </h:form>



</ui:composition>

