<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:outputScript name="js/written-number.js" library="sentinel-layout" />

    <h:form id="frmFinancingDocumentProcess">
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.financingdocumentprocess}"/>
            <ui:param name="bean" value='#{financingDocumentBean}' />
            <ui:param name="update" value="pgrFinancingDocumentProcess" />
            <ui:param name="btnSaveId" value="#{financingDocumentBean.getRendered(19, 0) and (financingDocumentBean.processType==1 or (financingDocumentBean.processType==2 and financingDocumentBean.isUpdate))}" />     
            <ui:param name="renderback" value='false'/>
            <ui:param name="btnDeleteId" value='#{financingDocumentBean.processType==2 and financingDocumentBean.getRendered(20, 0)}' />
            <ui:param name="btnPrinterDesign" value="#{financingDocumentBean.processType == 2 ? (financingDocumentBean.selectedObject.financingType.id == 47 || financingDocumentBean.selectedObject.financingType.id == 48 ||  financingDocumentBean.selectedObject.financingType.id == 55 ||  financingDocumentBean.selectedObject.financingType.id == 56  ? 'true':'false') : 'false'}" /> 
            <ui:param name="dtbWidgetVar" value="financingDocumentPF" />
            <ui:param name="btnTestBeforeDeleteId" value="true" />
            <ui:param name="btnEditId" value="#{financingDocumentBean.processType==2 and !financingDocumentBean.isUpdate}"/>
        </ui:include>

        <h:panelGroup id="pgrFinancingDocumentProcess" layout="block" class="divContent">
            <div class="ui-g">
                <h:panelGroup rendered="#{financingDocumentBean.listOfBranch.size() > 1}">
                    <div class="ui-g-12 ui-md-2">
                        <p:outputLabel value="#{loc.branch}" for="slcBranch" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBranch" value="#{financingDocumentBean.selectedObject.branch.id}" disabled="#{financingDocumentBean.processType==2}">
                            <f:selectItem itemValue="#{null}" itemLabel="#{loc.choose}" itemDisabled="true"/>
                            <f:selectItems value="#{financingDocumentBean.listOfBranch}" var="branch" itemValue="#{branch.id}" itemLabel="#{branch.name}" />
                            <p:ajax update="pgrFinancingDocumentProcess" listener="#{financingDocumentBean.changeBranch()}" process="@this"/>
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup>  
                <!--İşlem Tipi-->
                <h:panelGroup>
                    <div  class="#{financingDocumentBean.listOfBranch.size() > 1 ? 'ui-g-12 ui-md-2' : 'ui-g-12 ui-md-4'}">
                        <p:outputLabel value="#{loc.operationtype}" for="slcOperationType" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcOperationType" value="#{financingDocumentBean.selectedObject.financingType.id}" disabled="#{financingDocumentBean.processType==2}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfFinancingType}" var="operationtype" itemLabel="#{operationtype.nameMap.get(sessionBean.langId).name}" itemValue="#{operationtype.id}"  />
                            <p:ajax update="pgrFinancingDocumentProcess" listener="#{financingDocumentBean.resetFinancing()}" process="@this"/>
                        </p:selectOneMenu>
                    </div>

                </h:panelGroup>
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==0}">
                    <div class="ui-g-12 ui-md-6"/>
                </h:panelGroup>

                <!-- 47:Nakit Tahsilat(Cari->Kasa)-->  
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==47}">
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{financingDocumentBean.isIncomeExpense ? loc.income : loc.currentname}" for="#{financingDocumentBean.isIncomeExpense ? 'slcIncomeExpense' : 'txtCurrentName'}" styleClass="Fs12 FontBold"/>
                        <p:commandLink resetValues="true" process="@this" rendered="#{financingDocumentBean.processType==1}" global="false" 
                                       title="#{!financingDocumentBean.isIncomeExpense ? loc.income : loc.currentname}" 
                                       actionListener="#{financingDocumentBean.accountOrIncomeExp()}" update="pgrFinancingDocumentProcess"  >
                            <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                        </p:commandLink>
                        <h:panelGroup rendered="#{!financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="txtCurrentName" onclick="#{financingDocumentBean.isUpdate ? 'showAccountBook()' : ''}" value="#{financingDocumentBean.selectedObject.account.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" placeholder="#{loc.currentname} " >

                            </p:inputText>
                            <p:commandLink class="commandLinkPositionForBookFilter" process="@this" disabled="#{!financingDocumentBean.isUpdate}" oncomplete="PF('olp_account').loadContents();" >
                                <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([financingDocumentBean.selectedObject.branch],'frmAccountBookFilter','olp_account',financingDocumentBean.bookType)}" global="false"/>
                            </p:commandLink> 
                        </h:panelGroup>
                        <h:panelGroup rendered="#{financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="slcIncomeExpense" required="true" onclick="#{financingDocumentBean.isUpdate ? 'showIncomeExpenseBook()' : ''}"  value="#{financingDocumentBean.selectedObject.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.income}" >

                            </p:inputText>
                            <p:commandLink process="@this" disabled="#{!financingDocumentBean.isUpdate}" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([true, financingDocumentBean.selectedObject.branch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','financingDocumentBean')}" />
                            </p:commandLink>
                        </h:panelGroup>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.safecodename}" for="slcSafe" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcSafe" value="#{financingDocumentBean.secondId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfSafe}" var="safe" itemLabel="#{safe.name} - (#{safe.currency.code})" itemValue="#{safe.id}" itemDisabled="#{!safe.isMposMovement}" />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false" />
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup> 

                <!--48:Nakit Ödeme(Kasa->Cari) -->
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==48}">
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.safecodename}" for="slcSafe1" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcSafe1" value="#{financingDocumentBean.firstId}"  filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfSafe}" var="safe" itemLabel="#{safe.name} - (#{safe.currency.code})" itemValue="#{safe.id}" itemDisabled="#{!safe.isMposMovement}" />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false" />
                        </p:selectOneMenu>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{financingDocumentBean.isIncomeExpense ? loc.expense : loc.currentname}" for="#{financingDocumentBean.isIncomeExpense ? 'slcIncomeExpense2' : 'txtCurrentName2'}" styleClass="Fs12 FontBold"/>
                        <p:commandLink resetValues="true" process="@this" rendered="#{financingDocumentBean.isUpdate and financingDocumentBean.processType==1}" global="false" title="#{!financingDocumentBean.isIncomeExpense ? loc.expense : loc.currentname}" actionListener="#{financingDocumentBean.accountOrIncomeExp()}" update="pgrFinancingDocumentProcess"  >
                            <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                        </p:commandLink>
                        <h:panelGroup rendered="#{!financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="txtCurrentName2" onclick="#{financingDocumentBean.isUpdate ? 'showAccountBook()' : ''}" value="#{financingDocumentBean.selectedObject.account.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" placeholder="#{loc.currentname} " >

                            </p:inputText>
                            <p:commandLink class="commandLinkPositionForBookFilter" process="@this" disabled="#{!financingDocumentBean.isUpdate}" oncomplete="PF('olp_account').loadContents();" >
                                <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([financingDocumentBean.selectedObject.branch],'frmAccountBookFilter','olp_account',financingDocumentBean.bookType)}" global="false"/>
                            </p:commandLink> 
                        </h:panelGroup>
                        <h:panelGroup rendered="#{financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="slcIncomeExpense2" required="true" onclick="#{financingDocumentBean.isUpdate ? 'showIncomeExpenseBook()' : ''}"  value="#{financingDocumentBean.selectedObject.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.expense}" >

                            </p:inputText>
                            <p:commandLink process="@this" disabled="#{!financingDocumentBean.isUpdate}" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([false, financingDocumentBean.selectedObject.branch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','financingDocumentBean')}" />
                            </p:commandLink>
                        </h:panelGroup>
                    </div>
                </h:panelGroup> 

                <!--49:Borc-50:Alacak Dekontu(Cari) -->
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==49 or financingDocumentBean.selectedObject.financingType.id==50 or financingDocumentBean.selectedObject.financingType.id==108 or financingDocumentBean.selectedObject.financingType.id==109}">

                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{financingDocumentBean.isIncomeExpense ? 
                                                (financingDocumentBean.selectedObject.financingType.id==49 ? loc.expense : loc.income)
                                                : loc.currentname}" 
                                       for="#{financingDocumentBean.isIncomeExpense ? 'slcIncomeExpense3' : 'txtCurrentName3'}" styleClass="Fs12 FontBold"/>
                        <p:commandLink resetValues="true" process="@this" rendered="#{financingDocumentBean.processType==1}" global="false" title="#{!financingDocumentBean.isIncomeExpense ? loc.income : loc.currentname}" actionListener="#{financingDocumentBean.accountOrIncomeExp()}" update="pgrFinancingDocumentProcess"  >
                            <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                        </p:commandLink>
                        <h:panelGroup rendered="#{!financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="txtCurrentName3" onclick="#{financingDocumentBean.isUpdate ? 'showAccountBook()' : ''}" value="#{financingDocumentBean.selectedObject.account.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" placeholder="#{loc.currentname} " >

                            </p:inputText>
                            <p:commandLink class="commandLinkPositionForBookFilter" process="@this" disabled="#{!financingDocumentBean.isUpdate}" oncomplete="PF('olp_account').loadContents();" >
                                <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([financingDocumentBean.selectedObject.branch],'frmAccountBookFilter','olp_account',financingDocumentBean.bookType)}" global="false"/>
                            </p:commandLink> 
                        </h:panelGroup>

                        <h:panelGroup rendered="#{financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="slcIncomeExpense3" required="true" onclick="#{financingDocumentBean.isUpdate ? 'showIncomeExpenseBook()' : ''}"  value="#{financingDocumentBean.selectedObject.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{financingDocumentBean.selectedObject.financingType.id==49 ? loc.expense : loc.income}" >

                            </p:inputText>
                            <p:commandLink process="@this" disabled="#{!financingDocumentBean.isUpdate}" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([(financingDocumentBean.selectedObject.financingType.id==49 ? false : true), financingDocumentBean.selectedObject.branch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','financingDocumentBean')}" />
                            </p:commandLink>
                        </h:panelGroup>

                    </div>

                    <div class="ui-g-12 ui-md-3"/>
                </h:panelGroup>

                <!--51:Bankadan Bankaya Virman(Banka->Banka) -->
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==51}">
                    <div  class="#{financingDocumentBean.listOfBranch.size() > 1 ? 'ui-g-12 ui-md-2' : 'ui-g-12 ui-md-3'}">
                        <p:outputLabel value="#{loc.bankcodename}" for="slcBank" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBank" value="#{financingDocumentBean.firstId}"  filter="true" disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfBankAccount}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name} - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false" />
                            <p:ajax listener="#{financingDocumentBean.changeBank(1)}" global="false" />
                        </p:selectOneMenu>
                    </div>
                    <h:panelGroup rendered="#{financingDocumentBean.listOfBranch.size() > 1}">
                        <div class="ui-g-12 ui-md-2">
                            <p:outputLabel value="#{loc.branch}" for="slcBranch1" styleClass="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcBranch1" value="#{financingDocumentBean.selectedObject.transferBranch.id}" disabled="#{financingDocumentBean.processType==2}">
                                <f:selectItem itemValue="#{null}" itemLabel="#{loc.choose}" itemDisabled="true"/>
                                <f:selectItems value="#{financingDocumentBean.listOfBranch}" var="branch" itemValue="#{branch.id}" itemLabel="#{branch.name}" />
                                <p:ajax update="slcBank2" listener="#{financingDocumentBean.changeTransferBranch()}" process="@this"/>
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup>  
                    <div  class="#{financingDocumentBean.listOfBranch.size() > 1 ? 'ui-g-12 ui-md-2' : 'ui-g-12 ui-md-3'}">
                        <p:outputLabel value="#{loc.bankcodename}" for="slcBank2" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBank2" value="#{financingDocumentBean.secondId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfBankAccount2}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name} - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                            <p:ajax listener="#{financingDocumentBean.changeBank(2)}" global="false" />
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup>

                <!--52 :Kasadan Kasaya Virman(Kasa->Kasa) -->
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==52}">
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.safecodename}" for="slcSafe2" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcSafe2" value="#{financingDocumentBean.firstId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfSafe}" var="safe" itemLabel="#{safe.name} - (#{safe.currency.code})" itemValue="#{safe.id}" itemDisabled="#{!safe.isMposMovement}" />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                            <p:ajax listener="#{financingDocumentBean.changeSafe(1)}" global="false" />
                        </p:selectOneMenu>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.safecodename}" for="slcSafe3" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcSafe3" value="#{financingDocumentBean.secondId}"  filter="true" disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfSafe2}" var="safe" itemLabel=" #{safe.name} - (#{safe.currency.code})" itemValue="#{safe.id}" itemDisabled="#{!safe.isMposMovement}" />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                            <p:ajax listener="#{financingDocumentBean.changeSafe(2)}" global="false" />
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup>

                <!--53:Bankaya Nakit Yatırma(Kasa-Banka) -->  
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==53}">
                    <div  class="#{financingDocumentBean.listOfBranch.size() > 1 ? 'ui-g-12 ui-md-2' : 'ui-g-12 ui-md-3'}">
                        <p:outputLabel value="#{loc.safecodename}" for="slcSafe4" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcSafe4" value="#{financingDocumentBean.firstId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfSafe}" var="safe" itemLabel="#{safe.name} - (#{safe.currency.code})" itemValue="#{safe.id}" itemDisabled="#{!safe.isMposMovement}" />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false" />
                        </p:selectOneMenu>
                    </div>
                    <h:panelGroup rendered="#{financingDocumentBean.listOfBranch.size() > 1}">
                        <div class="ui-g-12 ui-md-2">
                            <p:outputLabel value="#{loc.branch}" for="slcBranch2" styleClass="Fs12 FontBold"/>
                            <p:selectOneMenu id="slcBranch2" value="#{financingDocumentBean.selectedObject.transferBranch.id}" disabled="#{financingDocumentBean.processType==2}">
                                <f:selectItem itemValue="#{null}" itemLabel="#{loc.choose}" itemDisabled="true"/>
                                <f:selectItems value="#{financingDocumentBean.listOfBranch}" var="branch" itemValue="#{branch.id}" itemLabel="#{branch.name}" />
                                <p:ajax update="slcBank3" listener="#{financingDocumentBean.changeTransferBranch()}" process="@this"/>
                            </p:selectOneMenu>
                        </div>
                    </h:panelGroup> 
                    <div  class="#{financingDocumentBean.listOfBranch.size() > 1 ? 'ui-g-12 ui-md-2' : 'ui-g-12 ui-md-3'}">
                        <p:outputLabel value="#{loc.bankcodename}" for="slcBank3" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBank3" value="#{financingDocumentBean.secondId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfBankAccount}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name} - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup>

                <!--54:Bankadan Nakit Çekme(Banka-Kasa) -->
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==54}">
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.bankcodename}" for="slcBank4" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBank4" value="#{financingDocumentBean.firstId}"  filter="true" disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfBankAccount}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name} - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                        </p:selectOneMenu>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.safecodename}" for="slcSafe5" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcSafe5" value="#{financingDocumentBean.secondId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfSafe}" var="safe" itemLabel="#{safe.name} - (#{safe.currency.code})" itemValue="#{safe.id}" itemDisabled="#{!safe.isMposMovement}" />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                        </p:selectOneMenu>
                    </div>

                </h:panelGroup>

                <!--55,73:Gelen Havale veya Kredi Kartı Tahsilat(Cari-Banka) --> 
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==55 or financingDocumentBean.selectedObject.financingType.id==73}">
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{financingDocumentBean.isIncomeExpense ? loc.income : loc.currentname}" for="#{financingDocumentBean.isIncomeExpense ? 'slcIncomeExpense5' : 'txtCurrentName5'}" styleClass="Fs12 FontBold"/>
                        <p:commandLink resetValues="true" process="@this" rendered="#{financingDocumentBean.processType==1}" global="false" title="#{!financingDocumentBean.isIncomeExpense ? loc.income : loc.currentname}" actionListener="#{financingDocumentBean.accountOrIncomeExp()}" update="pgrFinancingDocumentProcess"  >
                            <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                        </p:commandLink>
                        <h:panelGroup rendered="#{!financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="txtCurrentName5" onclick="#{financingDocumentBean.isUpdate ? 'showAccountBook()' : ''}" value="#{financingDocumentBean.selectedObject.account.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" placeholder="#{loc.currentname} " >

                            </p:inputText>
                            <p:commandLink class="commandLinkPositionForBookFilter" process="@this" disabled="#{!financingDocumentBean.isUpdate}" oncomplete="PF('olp_account').loadContents();" >
                                <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([financingDocumentBean.selectedObject.branch],'frmAccountBookFilter','olp_account',financingDocumentBean.bookType)}" global="false"/>
                            </p:commandLink> 
                        </h:panelGroup>
                        <h:panelGroup rendered="#{financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="slcIncomeExpense5" required="true" onclick="#{financingDocumentBean.isUpdate ? 'showIncomeExpenseBook()' : ''}"  value="#{financingDocumentBean.selectedObject.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.income}" >

                            </p:inputText>
                            <p:commandLink process="@this" disabled="#{!financingDocumentBean.isUpdate}" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([true, financingDocumentBean.selectedObject.branch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','financingDocumentBean')}" />
                            </p:commandLink>
                        </h:panelGroup>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.bankcodename}" for="slcBank5" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBank5" value="#{financingDocumentBean.secondId}" filter="true"  disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfBankAccount}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name}  - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false" />
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup>

                <!--56,74:Giden Havale veya Kredi Kartı Ödeme(Banka-Cari) -->
                <h:panelGroup rendered="#{financingDocumentBean.selectedObject.financingType.id==56 or financingDocumentBean.selectedObject.financingType.id==74}">
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.bankcodename}" for="slcBank6" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcBank6" value="#{financingDocumentBean.firstId}"  filter="true" disabled="#{!financingDocumentBean.isUpdate}" required="true" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{financingDocumentBean.listOfBankAccount}" var="bankaccount" itemLabel="#{bankaccount.name} - #{bankaccount.bankBranch.bank.name} - (#{bankaccount.currency.code})" itemValue="#{bankaccount.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false"/>
                        </p:selectOneMenu>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{financingDocumentBean.isIncomeExpense ? loc.expense : loc.currentname}" for="#{financingDocumentBean.isIncomeExpense ? 'slcIncomeExpense4' : 'txtCurrentName4'}" styleClass="Fs12 FontBold"/>
                        <p:commandLink resetValues="true" process="@this" rendered="#{financingDocumentBean.isUpdate and financingDocumentBean.processType==1}" global="false" title="#{!financingDocumentBean.isIncomeExpense ? loc.expense : loc.currentname}" actionListener="#{financingDocumentBean.accountOrIncomeExp()}" update="pgrFinancingDocumentProcess"  >
                            <i class="fa fa-refresh Fs14 tlbrAddBtn"/>                 
                        </p:commandLink>
                        <h:panelGroup rendered="#{!financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="txtCurrentName4" onclick="#{financingDocumentBean.isUpdate ? 'showAccountBook()' : ''}" value="#{financingDocumentBean.selectedObject.account.name}" class="inputPositionForBookFilter" required="true" readonly="#{facesContext.currentPhaseId.ordinal ge 4}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" placeholder="#{loc.currentname} " >

                            </p:inputText>
                            <p:commandLink class="commandLinkPositionForBookFilter" process="@this" disabled="#{!financingDocumentBean.isUpdate}" oncomplete="PF('olp_account').loadContents();" >
                                <i class="fa fa-book Fs16 softgray iconPositionForBookFilter "/>   
                                <p:ajax listener="#{accountBookFilterBean.findFilterListLazyLoading([financingDocumentBean.selectedObject.branch],'frmAccountBookFilter','olp_account',financingDocumentBean.bookType)}" global="false"/>
                            </p:commandLink> 
                        </h:panelGroup>
                        <h:panelGroup rendered="#{financingDocumentBean.isIncomeExpense}">
                            <p:inputText id="slcIncomeExpense4" required="true" onclick="#{financingDocumentBean.isUpdate ? 'showIncomeExpenseBook()' : ''}"  value="#{financingDocumentBean.selectedObject.incomeExpense.name}" class="inputPositionForBookFilter"  readonly="true"  placeholder="#{loc.expense}" >

                            </p:inputText>
                            <p:commandLink process="@this" disabled="#{!financingDocumentBean.isUpdate}" class="commandLinkPositionForBookFilter" oncomplete="PF('olp_IncomeExpense').loadContents();">
                                <i class="fa fa-book Fs16 iconPositionForBookFilter"></i>
                                <p:ajax listener="#{incomeExpenseBookFilterBean.findFilterList([false, financingDocumentBean.selectedObject.branch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','financingDocumentBean')}" />
                            </p:commandLink>
                        </h:panelGroup>
                    </div>

                </h:panelGroup>

                <h:panelGroup>

                    <div  class="ui-g-12 ui-md-2">
                        <p:outputLabel value="#{loc.documentnumber}" for="txtDocumentNumber" styleClass="Fs12 FontBold" />
                        <p:inputText id="txtDocumentNumber" styleClass="Wid99" readonly="#{!financingDocumentBean.isUpdate}" placeholder="#{loc.documentnumber}" 
                                     value="#{financingDocumentBean.selectedObject.documentNumber}">
                        </p:inputText>
                    </div>

                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.documentdate}" for="cldExchangeDate" styleClass="Fs12 FontBold"/>
                        <p:calendar  id="cldExchangeDate" required="true" readonly="#{!financingDocumentBean.isUpdate}" value="#{financingDocumentBean.selectedObject.documentDate}" styleClass="Wid95"  beforeShow="dpClearButton" timeControlType="select" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" showOn="#{financingDocumentBean.isUpdate ? 'button' : 'false'}" showButtonPanel="true" placeholder="#{loc.documentdate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                            <p:ajax event="dateSelect" global="false"/>
                        </p:calendar>
                    </div>
                    <div  class="ui-g-12 ui-md-3">
                        <p:outputLabel value="#{loc.total}" for="txtPrice" styleClass="Fs12 FontBold" />
                        <p:inputNumber id="txtPrice" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1? ',': '.'}" minValue="0"
                                        decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" readonly="#{!financingDocumentBean.isUpdate}"
                                       value="#{financingDocumentBean.selectedObject.price}"  class="Wid97 TexAlRight"  placeholder="#{loc.total}" required="true">
                            <p:ajax event="keyup" process="@this" delay="1" global="false" update="txtPrice2" />
                        </p:inputNumber>
                    </div>
                    <div  class="ui-g-12 ui-md-2">
                        <p:outputLabel value="#{loc.currency}" for="slcCurrency" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcCurrency" value="#{financingDocumentBean.selectedObject.currency.id}" required="true" styleClass="Wid97" 
                                         disabled="#{!sessionBean.lastBranchSetting.isForeignCurrency
                                                     or ((financingDocumentBean.selectedObject.financingType.id==49 
                                                     or financingDocumentBean.selectedObject.financingType.id==50) ? 'false' : 'true')}" >
                            <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true"/> 
                            <f:selectItems value="#{sessionBean.currencies}" var="currency" itemLabel="#{currency.code}" itemValue="#{currency.id}"  />
                            <p:ajax listener="#{financingDocumentBean.bringCurrency()}" global="false" />
                        </p:selectOneMenu>
                    </div>

                    <h:panelGroup  rendered="#{sessionBean.lastBranchSetting.isForeignCurrency}" >
                        <div  class="ui-g-12 ui-md-2">
                            <p:outputLabel value="#{loc.exchangerate} #{financingDocumentBean.exchange}" for="txtExchangeRate" styleClass="Fs12 FontBold" />
                            <p:inputNumber id="txtExchangeRate" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol ==1 ? '.': ','}"  
                                           thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}" 
                                           roundMethod="D" decimalPlaces="4" readonly="#{!financingDocumentBean.isUpdate or financingDocumentBean.inCurrency.id==financingDocumentBean.outCurrency.id}"
                                           value="#{financingDocumentBean.selectedObject.exchangeRate}"  class="Wid97 TexAlRight"  placeholder="#{loc.exchangerate}" required="true">
                                <p:ajax event="keyup" process="@this" delay="1" global="false" update="txtPrice2" />
                            </p:inputNumber>
                        </div>
                    </h:panelGroup>
                    <h:panelGroup  rendered="#{!sessionBean.lastBranchSetting.isForeignCurrency}" >
                        <div  class="ui-g-12 ui-md-2" />
                    </h:panelGroup>

                    <div  class="ui-g-12 ui-md-2">
                        <p:outputLabel value="#{loc.total}" for="txtPrice2" styleClass="Fs12 FontBold" />
                        <p:inputNumber id="txtPrice2" decimalSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? '.': ','}"  
                                       thousandSeparator="#{sessionBean.user.lastBranch.decimalsymbol==1 ? ',': '.'}"
                                        decimalPlaces="#{sessionBean.user.lastBranch.currencyrounding}" readonly="true"
                                       symbol="#{sessionBean.currencySignOrCode(financingDocumentBean.inCurrency.id,0)}"
                                       symbolPosition="s"
                                       value="#{financingDocumentBean.selectedObject.price*financingDocumentBean.selectedObject.exchangeRate}"  class="Wid97 TexAlRight"  placeholder="#{loc.totality}" required="true">
                        </p:inputNumber>
                    </div>

                </h:panelGroup>

                <h:panelGroup>
                    <div  class="ui-g-12 ui-md-12">
                        <p:outputLabel value="#{loc.description}" for="txtAcıklama" styleClass="Fs12 FontBold" />
                        <p:inputText id="txtAcıklama" styleClass="Wid99" readonly="#{!financingDocumentBean.isUpdate}" placeholder="#{loc.description}" value="#{financingDocumentBean.selectedObject.description}">
                            <p:ajax event="keyup" global="false"/>
                        </p:inputText>
                    </div>
                </h:panelGroup>

            </div>

        </h:panelGroup>
        <p:remoteCommand name="showAccountBook" process="@this" oncomplete="PF('olp_account').loadContents()" actionListener="#{accountBookFilterBean.findFilterListLazyLoading([financingDocumentBean.selectedObject.branch],'frmAccountBookFilter','olp_account',financingDocumentBean.bookType)}" />
        <p:remoteCommand name="showIncomeExpenseBook" process="@this"  oncomplete="PF('olp_IncomeExpense').loadContents();" 
                         actionListener="#{incomeExpenseBookFilterBean.findFilterList([(financingDocumentBean.selectedObject.financingType.id==47 
                                           or financingDocumentBean.selectedObject.financingType.id==50
                                           or financingDocumentBean.selectedObject.financingType.id==55
                                           ) ? true : false, financingDocumentBean.selectedObject.branch],'frmIncomeExpenseBookFilter','olp_IncomeExpense','financingDocumentBean')}" />

    </h:form>

    <h:form id="formId" >
        <h:inputHidden id="x" value="#{financingDocumentBean.wordFromNumber}" />
        <p:commandButton style="display: none" id="cmdSubmit" value="submit" onclick="getVars()" global="false"/>
        <p:remoteCommand  name="tessst" onstart=" document.getElementById('formId:cmdSubmit').click();" autoRun="true" global="false"/>
    </h:form>

    <div style="display: none">
        <p:outputPanel id="printPanel"  style="width: 22cm;height: 29cm;">
        </p:outputPanel>  
        <script>
            //<![CDATA[        
            function getVars() {

                // ...
                var str = '#{financingDocumentBean.selectedObject.price}'

                var x = "";
                if (str.includes(".")) {
                    var res = str.split(".")

                    if (str != "") {
                        if (parseInt(res[0]) > 0) {
                            x = writtenNumber(parseInt(res[0]), {lang: '#{sessionBean.user.language.code}'.toLowerCase()}) + ' #{sessionBean.currencySignOrCode(financingDocumentBean.selectedObject.currency.id, 0)}';
                        }
                        if (res[1].length > 2) {
                            if (parseInt(res[1].substring(0, 2)) > 0) {
                                var subCurrency = "";
                                if ('#{financingDocumentBean.selectedObject.currency.id}' == 1) {
                                    subCurrency = '#{loc.kurus}';
                                } else if ('#{financingDocumentBean.selectedObject.currency.id}' == 2) {
                                    subCurrency = '#{loc.cent}';
                                }
                                if ('#{financingDocumentBean.selectedObject.currency.id}' == 3) {
                                    subCurrency = '#{loc.cent}';
                                }
                                if ('#{financingDocumentBean.selectedObject.currency.id}' == 4) {
                                    subCurrency = '#{loc.tetri}';
                                }
                                x = x + ' , ' + writtenNumber(parseInt(res[1].substring(0, 2)), {lang: '#{sessionBean.user.language.code}'.toLowerCase()}) + ' ' + subCurrency;
                            }
                        }
                    }
                } else {
                    x = writtenNumber(parseInt(str), {lang: '#{sessionBean.user.language.code}'.toLowerCase()}) + ' #{sessionBean.currencySignOrCode(financingDocumentBean.selectedObject.currency.id, 0)}';
                }
                document.getElementById("formId:x").value = x.toUpperCase();

            }
            function printData() {
                var contents = document.getElementById("printPanel").innerHTML;
                var frame1 = document.createElement('iframe');
                frame1.name = "frame1";
                frame1.style.position = "absolute";
                frame1.style.top = "-1000000px";
                document.body.appendChild(frame1);
                var frameDoc = (frame1.contentWindow) ? frame1.contentWindow : (frame1.contentDocument.document) ? frame1.contentDocument.document : frame1.contentDocument;
                frameDoc.document.open();
                frameDoc.document.write('<html><head><title>DIV Contents</title>');
                frameDoc.document.write('</head><body>');
                frameDoc.document.write(contents);
                frameDoc.document.write('</body></html>');
                frameDoc.document.close();
                setTimeout(function () {
                    window.frames["frame1"].focus();
                    window.frames["frame1"].print();
                    document.body.removeChild(frame1);
                }, 500);
                return false;
            }

            //]]>
        </script>
    </div>
</ui:composition>


