<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions" 
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:form id="frmChequeBillProcess">
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.chequebillprocesses}"/>
            <ui:param name="bean" value='#{chequeBillProcessBean}' />
            <ui:param name="update" value="pgrChequeBillProcess" />
            <ui:param name="btnSaveId" value='#{chequeBillProcessBean.getRendered(26, 0)}' />     
            <ui:param name="renderback" value='true'/>
            <c:if test="#{chequeBillProcessBean.processType==2}">
                <ui:param name="btnDeleteId" value='#{chequeBillProcessBean.getRendered(27, 0)}' />
                <ui:param name="btnTestBeforeDeleteId" value="true" />
            </c:if>
        </ui:include>

        <p:remoteCommand name="showBook" process="@this" oncomplete="PF('olp_account').loadContents();" actionListener="#{accountBookFilterBean.findFilterListLazyLoading([chequeBillProcessBean.selectedObject.branch],'frmAccountBookFilter','olp_account','chequebill')}" global="false" />

        <p:remoteCommand name="rcgoToRelatedRecord" actionListener="#{chequeBillProcessBean.goToRelatedRecord()}" delay="500" process="@this"/>

        <div class="ui-g-12 divContent">
            <h:panelGroup id="pgrChequeBillProcess" layout="block">
                <div class="panelToggle">
                    <ui:include  src="newchequebill.xhtml">
                        <ui:param name="bean" value='#{chequeBillProcessBean}' />
                    </ui:include>
                </div>

            </h:panelGroup>
        </div>
    </h:form>

    <div class="EmptyBox10"></div>

    <p:tabView id="tbvChequeBill" activeIndex="#{marwiz.tabIndex}" rendered="#{chequeBillProcessBean.getRendered(8, 1)}" scrollable="true" dynamic="true" cache="true">

        <p:ajax event="tabChange" listener="#{chequeBillProcessBean.onTabChange}" />
        <p:tab id="tab8" title="#{chequeBillProcessBean.selectedObject.isCustomer ? loc.recoveries : loc.payments}" rendered="#{chequeBillProcessBean.getRendered(8, 1)}">
            <c:if test="#{chequeBillProcessBean.activeIndex==8}" >
                <ui:include src="chequebillpaymenttab.xhtml"/>
            </c:if>
        </p:tab>

    </p:tabView>

    <p:dialog id="dlgChequeBillPaymentProcess" widgetVar="dlg_ChequeBillPaymentProcess" resizable="false" focus="dlgChequeBillPaymentProcess" responsive="true" dynamic="true" modal="true" closeOnEscape="true" width="50%" >
       <c:if test="#{chequeBillProcessBean.activeIndex==8}" >
        <ui:include src="chequebillpaymentprocess.xhtml"/>
       </c:if>
    </p:dialog> 

    <ui:include src="/pages/general/common/accountbook.xhtml" >
        <ui:param name="updateBean" value='#{chequeBillProcessBean}' />
        <ui:param name="for" value='frmChequeBillProcess:btnAccountName2' />
        <ui:param name="type" value='chequebill' />
        <ui:param name="parameters" value='#{[chequeBillProcessBean.selectedObject.branch]}' /> 
        <ui:param name="columnsize" value='2' /> 
        <ui:param name="form" value='frmAccountBookFilter' /> 
        <ui:param name="overlay" value="olp_account" />
    </ui:include>

    <p:confirmDialog id="dlgRelatedRecordInfo"  class="deleteConfirm controlDelete"  widgetVar="dlg_RelatedRecordInfo" closable="true" width="30%" responsive="true">
        <f:facet name="message">
            <p:panel class="divContent">
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText value="#{chequeBillProcessBean.deleteControlMessage}" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText value="#{chequeBillProcessBean.deleteControlMessage1}" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6">
                        <h:outputText value="#{chequeBillProcessBean.deleteControlMessage2}" class="Fright"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6">
                        <p:commandLink value="#{chequeBillProcessBean.relatedRecord}" class="Fleft cmdRelatedRecord" title="#{loc.gotorelatedrecord}" actionListener="#{chequeBillProcessBean.goToRelatedRecordBefore()}" />
                    </div>
                    <h:panelGroup rendered="#{chequeBillProcessBean.isDeleteButton}">
                        <div class="ui-g-12 ui-md-12 ui-lg-6">
                            <p:commandButton value="#{loc.yes}" action="#{chequeBillProcessBean.delete()}" onclick="PF('dlg_RelatedRecordInfo').hide()" process="@this" styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-6">
                            <p:commandButton value="#{loc.no}" type="button" onclick="PF('dlg_RelatedRecordInfo').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
                        </div>
                    </h:panelGroup>
                </div>
            </p:panel>
        </f:facet>
    </p:confirmDialog>

</ui:composition>
