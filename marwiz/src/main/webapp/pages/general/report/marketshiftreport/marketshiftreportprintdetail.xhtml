<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:form id="frmShiftReportPrintDetail">
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.printdetailmarketshiftreport}"/>
            <ui:param name="bean" value='#{marketShiftReportPrintDetailBean}' />
            <ui:param name="update" value="" />
            <ui:param name="btnSaveId" value="false" />     
            <ui:param name="renderback" value='true'/>
            <ui:param name="btnDeleteId" value='false' />
            <ui:param name="btnPrinterId" value="true" /> 
            <ui:param name="target" value="frmShiftReportPrintDetail" /> 
        </ui:include>

        <h:panelGroup id="pgrShiftPrintDetail" layout="block" transient="true" >  
            <div class="ui-g divContent">
                <div class="ui-g panelToggle">
                    <div class="EmptyBox10"/>
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText   value="#{loc.shiftno} : " />
                        <h:outputText style="text-align: left !important;" value="#{marketShiftReportPrintDetailBean.selectedObject.shiftNo}"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText   value="#{loc.startdate} : " />
                        <h:outputText   value="#{marketShiftReportPrintDetailBean.selectedObject.beginDate}">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>

                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText value="#{loc.enddate} : " />
                        <h:outputText   value="#{marketShiftReportPrintDetailBean.selectedObject.endDate}">
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <h:outputText value="#{loc.salecount} : " />
                        <h:outputText   value="#{marketShiftReportPrintDetailBean.selectedObject.saleCount}"/>
                    </div>
                </div>
            </div>
        </h:panelGroup>

        <div class="EmptyBox20" />



        <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding-right: 0px; padding-left: 0px">
            <!-- sale type-->
            <p:dataTable  id="dtbSalesType" reflow="false" var="salesType" value="#{marketShiftReportPrintDetailBean.listOfUser}" class="rowGroupTable"
                          widgetVar="salesTypePF" emptyMessage="#{loc.norecordsfound}" expandableRowGroups="true" 
                          rowKey="#{salesType.user.id}"  sortBy="#{salesType.type.id}">

                <f:facet name="header" >
                    <h:outputText  style="padding-left:50%;" value="#{loc.salestype}"/>
                </f:facet>

                <p:headerRow>
                    <p:column colspan="2">
                        <h:outputText value="#{salesType.type.id==0 ? loc.open : salesType.type.tag} / #{loc.sum} : #{marketShiftReportPrintDetailBean.calculateTotalMoneyForUser(salesType.type.id, 1)}"/>
                    </p:column>
                </p:headerRow> 
                <p:column id="clmUserSalesType" headerText="#{loc.user}" >
                    <h:outputText value="#{salesType.user.fullName} - #{sessionBean.currencySignOrCode(salesType.currency.id,0)}"/>
                </p:column>
                <p:column id="clmTotalMoneySaleType" headerText="#{loc.overalltotal}" >
                    <h:outputText value="#{salesType.price}" style="float: right;" >
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{salesType.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>
                <p:columnGroup type="footer" class="Fright">
                    <p:row>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText value="#{loc.sum} " style="text-align:right; font-weight: bold; " />
                            </f:facet>
                        </p:column>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText  style="text-align:right; font-weight: bold; " value="#{marketShiftReportPrintDetailBean.calculateTotalMoney()}" />
                            </f:facet>
                        </p:column>

                    </p:row>
                </p:columnGroup>
            </p:dataTable> 
        </div>

        <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding-right: 0px; padding-left: 0px">
            <!-- user-->
            <p:dataTable  id="dtbUser" reflow="false" var="salesUser" value="#{marketShiftReportPrintDetailBean.listOfUser}" class="rowGroupTable"
                          widgetVar="salesUserPF" emptyMessage="#{loc.norecordsfound}" expandableRowGroups="true" 
                          rowKey="#{salesUser.user.id}"  sortBy="#{salesUser.user.id}">

                <f:facet name="header" >
                    <h:outputText  style="padding-left:50%;" value="#{loc.user}"/>
                </f:facet>

                <p:headerRow>
                    <p:column colspan="2">
                        <h:outputText value="#{salesUser.user.fullName} (#{salesUser.saleCount}) / #{loc.sum} : #{marketShiftReportPrintDetailBean.calculateTotalMoneyForUser(salesUser.user.id, 2)}"/>
                    </p:column>
                </p:headerRow> 
                <p:column id="clmSalesTypeUser" headerText="#{loc.salestype}" >
                    <h:outputText value="#{salesUser.type.id==0 ? loc.open : salesUser.type.tag} - #{sessionBean.currencySignOrCode(salesUser.currency.id,0)}"/>
                </p:column>
                <p:column id="clmTotalMoneyUser" headerText="#{loc.overalltotal}" >
                    <h:outputText value="#{salesUser.price}" style="float: right;" >
                        <f:converter converterId="currencyConverter"  />
                        <f:attribute name="currency"  value="#{salesUser.currency}"/>
                        <f:attribute name="type" value="currency" />
                    </h:outputText>
                </p:column>
                <p:columnGroup type="footer" class="Fright">
                    <p:row>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText value="#{loc.sum} " style="text-align:right; font-weight: bold; " />
                            </f:facet>
                        </p:column>
                        <p:column colspan="1" style="text-align:right; font-weight: bold; ">
                            <f:facet name="footer"  >
                                <h:outputText  style="text-align:right; font-weight: bold; " value="#{marketShiftReportPrintDetailBean.calculateTotalMoney()}" />
                            </f:facet>
                        </p:column>
                    </p:row>
                </p:columnGroup>
            </p:dataTable> 
        </div>
    </h:form>


</ui:composition>



