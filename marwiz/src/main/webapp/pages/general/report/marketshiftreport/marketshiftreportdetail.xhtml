<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:panelGroup id="pgrMarketShiftReportDetail" >

        <ui:include src="/pages/general/common/datagridtoolbarreport.xhtml" >
            <ui:param name="bean" value="#{marketShiftReportDetailBean}"/>
            <ui:param name="datatable" value="#{!marketShiftReportDetailBean.isStockView ? 'frmShiftDetailReportDatatable:dtbShiftDetailReport' : 'frmShiftReportStockDetail:dtbShiftReportStockDetail'}" />
            <ui:param name="outputText" value="#{loc.shift}-#{marketShiftReportDetailBean.selectedObject.shift.shiftNo}"/>
            <ui:param name="renderedOutputText" value='true'/>
            <ui:param name="fileName" value="#{loc.detailmarketshiftreport}"/>
            <ui:param name="renderedBack" value='true'/>
            <ui:param name="renderedToggler" value='true'/>
            <ui:param name="renderedExcel" value='true'/>
            <ui:param name="renderedPdf" value='true'/>
            <ui:param name="renderedPrint" value='true'/>
            <ui:param name="renderedUnlock" value="#{marwiz.oldId != 66 ? 'false' : marketShiftReportDetailBean.selectedShift.status.id==7 ? 'false' : marketShiftReportDetailBean.getRendered(51, 0)}"/>
            <ui:param name="textUnlock" value="#{loc.reopenshift}"/> 
            <ui:param name="renderedStockView" value="true" />
            <ui:param name="textStockView" value="#{marketShiftReportDetailBean.isStockView ? loc.switchtoreceiptview : loc.switchtoproductview}" />
        </ui:include>



        <h:panelGroup rendered="#{!marketShiftReportDetailBean.isStockView}">
            <h:form id="frmShiftDetailReportDatatable">

                <p:dataTable  id="dtbShiftDetailReport" selectionMode="single" class="dtbReport" var="ShiftDetailReport" value="#{marketShiftReportDetailBean.listOfObjects}"  selection="#{marketShiftReportDetailBean.selectedObject}"  widgetVar="shiftDetailReportPF" emptyMessage="#{loc.norecordsfound}"
                              rows="#{sessionBean.user.defualtGridSize}" rowKey="#{ShiftDetailReport.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                              rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="true" lazy="true"
                              >

                    <p:ajax event="#{sessionBean.user.gridRowSelect}"  update="dlgShiftSales" listener="#{marketShiftReportDetailBean.createDialog()}" />
                    <p:ajax event="colReorder" listener="#{marketShiftReportDetailBean.reorder}" update="frmGridToolbar:toggle" />     
                    <p:ajax event="colResize"  listener="#{marketShiftReportDetailBean.onResize}" />
                    <p:column id="clmStartDate" headerText="#{loc.date}"  visible="#{marketShiftReportDetailBean.toogleList[0]}"   exportable="#{marketShiftReportDetailBean.toogleList[0]}">
                        <h:outputText value="#{ShiftDetailReport.processDate}"  >
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmPOSName" headerText="#{loc.posname}" visible="#{marketShiftReportDetailBean.toogleList[1]}" exportable="#{marketShiftReportDetailBean.toogleList[1]}" >
                        <h:outputText value="#{ShiftDetailReport.pointOfSale.name}" />
                    </p:column>
                    <p:column id="clmUser" headerText="#{loc.user}" visible="#{marketShiftReportDetailBean.toogleList[2]}" exportable="#{marketShiftReportDetailBean.toogleList[2]}" >
                        <h:outputText value="#{ShiftDetailReport.user.fullName}" />
                    </p:column>
                    <p:column id="clmCustomer" headerText="#{loc.customer}" visible="#{marketShiftReportDetailBean.toogleList[3]}" exportable="#{marketShiftReportDetailBean.toogleList[3]}" >
                        <h:outputText value="#{ShiftDetailReport.account.name}" />
                    </p:column>
                    <p:column id="clmPrice" headerText="#{loc.totalofproduct}" visible="#{marketShiftReportDetailBean.toogleList[4]}" exportable="#{marketShiftReportDetailBean.toogleList[4]}" >
                        <h:outputText value="#{ShiftDetailReport.totalPrice}" style="float: right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{ShiftDetailReport.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                        <h:panelGroup rendered="#{ShiftDetailReport.isReturn}" >
                            <li class="Fright BordRad10 TexAlLeft MarRight10" >
                                <i class="fa fa-minus red"></i>
                            </li>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{!ShiftDetailReport.isReturn}" >
                            <li  class="Fright BordRad10 TexAlLeft MarRight10">
                                <i class="fa fa-plus green"></i>
                            </li>
                        </h:panelGroup>
                    </p:column>
                    <p:column id="clmDiscountPrice" headerText="#{loc.discounttotal}" visible="#{marketShiftReportDetailBean.toogleList[5]}" exportable="#{marketShiftReportDetailBean.toogleList[5]}" >
                        <h:outputText value="#{ShiftDetailReport.totalDiscount}" style="float: right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{ShiftDetailReport.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmTaxPrice" headerText="#{loc.taxtotal}" visible="#{marketShiftReportDetailBean.toogleList[6]}" exportable="#{marketShiftReportDetailBean.toogleList[6]}" >
                        <h:outputText value="#{ShiftDetailReport.totalTax}" style="float: right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{ShiftDetailReport.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmSalesPrice" headerText="#{loc.overalltotal}" visible="#{marketShiftReportDetailBean.toogleList[7]}" exportable="#{marketShiftReportDetailBean.toogleList[7]}" >
                        <h:outputText value="#{ShiftDetailReport.totalMoney}" style="float: right;" >
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{ShiftDetailReport.currency}" />
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                        <h:panelGroup rendered="#{ShiftDetailReport.isReturn}" >
                            <li class="Fright BordRad10 TexAlLeft MarRight10" >
                                <i class="fa fa-minus red"></i>
                            </li>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{!ShiftDetailReport.isReturn}" >
                            <li  class="Fright BordRad10 TexAlLeft MarRight10">
                                <i class="fa fa-plus green"></i>
                            </li>
                        </h:panelGroup>
                    </p:column>
                    <p:columnGroup type="footer" rendered="#{marketShiftReportDetailBean.listOfObjects.rowCount>0}">
                        <ui:repeat value="#{marketShiftReportDetailBean.listOfTotals}" var="totals" >
                            <p:row>
                                <p:column colspan="#{marketShiftReportDetailBean.toogleList.size()-marketShiftReportDetailBean.countToggle-1}" style="text-align:right" >
                                    <f:facet name="footer" >
                                        <h:outputText value="#{totals.type.tag} : " class="FontBold" style="font-size: 15px;  color: #565656;"/>
                                    </f:facet>
                                </p:column>
                                <p:column>
                                    <f:facet name="footer" >
                                        <h:outputText value="#{totals.price}" class="Fright FontBold" style="font-size: 15px;  color: #565656;">
                                            <f:converter converterId="currencyConverter" />
                                            <f:attribute name="currency" value="#{totals.sales.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                            </p:row>
                        </ui:repeat>
                        <p:row>
                            <p:column colspan="#{marketShiftReportDetailBean.toogleList.size()-marketShiftReportDetailBean.countToggle-1}" style="text-align:right" >
                                <f:facet name="footer" >
                                    <h:outputText value="#{loc.sum} : " class="FontBold" style="font-size: 15px;  color: #565656;"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <f:facet name="footer" >
                                    <h:outputText value="#{marketShiftReportDetailBean.calculateTotal()}" class="Fright FontBold" style="font-size: 15px;  color: #565656;"/>
                                </f:facet>
                            </p:column>
                        </p:row>
                    </p:columnGroup>
                </p:dataTable>  
            </h:form>

        </h:panelGroup>

        <!--Ürün görünümünde kullanılan datatable -->
        <h:panelGroup rendered="#{marketShiftReportDetailBean.isStockView}" >

            <h:form id="frmShiftReportStockDetail">  

                <p:dataTable  id="dtbShiftReportStockDetail" var="stockDetail"  value="#{marketShiftReportDetailBean.listStockDetail}"  widgetVar="stockDetailPF" emptyMessage="#{loc.norecordsfound}"
                              rows="#{sessionBean.user.defualtGridSize}" rowKey="#{stockDetail.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                              rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="false" lazy="true"
                              >
                    <p:ajax event="colReorder" listener="#{marketShiftReportDetailBean.reorder}" update="frmGridToolbar:toggle" />     
                    <p:ajax event="colResize"  listener="#{marketShiftReportDetailBean.onResize}" />

                    <p:column id="clmProcessDate" headerText="#{loc.processdate}" visible="#{marketShiftReportDetailBean.toogleList[0]}" exportable="#{marketShiftReportDetailBean.toogleList[0]}" sortable="true" sortBy="#{stockDetail.sli.processdate}" >
                        <h:outputText value="#{stockDetail.processDate}"  >
                            <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmStockCode" headerText="#{loc.stockcode}" visible="#{marketShiftReportDetailBean.toogleList[1]}" exportable="#{marketShiftReportDetailBean.toogleList[1]}" sortable="true" sortBy="#{stockDetail.stck.code}">
                        <h:outputText  value="#{stockDetail.stock.code}"/>
                    </p:column>
                    <p:column id="clmCenterStockCode" headerText="#{loc.centerstockcode}" visible="#{marketShiftReportDetailBean.toogleList[2]}" exportable="#{marketShiftReportDetailBean.toogleList[2]}" sortable="true" sortBy="#{stockDetail.stck.centerProductCode}">
                        <h:outputText  value="#{stockDetail.stock.centerProductCode}"/>
                    </p:column>
                    <p:column id="clmBarcode" headerText="#{loc.stockbarcode}" visible="#{marketShiftReportDetailBean.toogleList[3]}" exportable="#{marketShiftReportDetailBean.toogleList[3]}" sortable="true" sortBy="#{stockDetail.stck.barcode}">
                        <h:outputText  value="#{stockDetail.stock.barcode}" />
                    </p:column>
                    <p:column id="clmStock" headerText="#{loc.stock}" visible="#{marketShiftReportDetailBean.toogleList[4]}" exportable="#{marketShiftReportDetailBean.toogleList[4]}" sortable="true" sortBy="#{stockDetail.stck.name}">
                        <h:outputText value="#{stockDetail.stock.name}" />
                    </p:column>
                    <p:column id="clmCategory" headerText="#{loc.stockcategory}"  visible="#{marketShiftReportDetailBean.toogleList[5]}" exportable="#{marketShiftReportDetailBean.toogleList[5]}" sortable="false" >
                        <h:outputText  value="#{stockDetail.category}"/>
                    </p:column>
                    <p:column id="clmCentralSupplier" headerText="#{loc.centralsupplier}" rendered="#{sessionBean.user.lastBranchSetting.isCentralIntegration and sessionBean.user.lastBranch.conceptType == 1}"  visible="#{marketShiftReportDetailBean.toogleList[6]}" exportable="#{marketShiftReportDetailBean.toogleList[6]}" sortable="true" sortBy="#{stockDetail.cspp.name}">
                        <h:outputText  value="#{stockDetail.stock.centralSupplier.name}"/>
                    </p:column>
                    <p:column id="clmSupplier" headerText="#{loc.supplier}"  visible="#{marketShiftReportDetailBean.toogleList[7]}" exportable="#{marketShiftReportDetailBean.toogleList[7]}" sortable="true" sortBy="#{stockDetail.acc1.name}">
                        <h:outputText  value="#{stockDetail.stock.supplier.name}"/>
                    </p:column>
                    <p:column id="clmAccount" headerText="#{loc.customer}" visible="#{marketShiftReportDetailBean.toogleList[8]}" exportable="#{marketShiftReportDetailBean.toogleList[8]}" sortable="true" sortBy="#{stockDetail.acc.name}">
                        <h:outputText value="#{stockDetail.sales.account.name}" />
                    </p:column>
                    <p:column id="clmBrand" headerText="#{loc.brand}"  visible="#{marketShiftReportDetailBean.toogleList[9]}" exportable="#{marketShiftReportDetailBean.toogleList[9]}" sortable="true" sortBy="#{stockDetail.br.name}">
                        <h:outputText  value="#{stockDetail.stock.brand.name}"/>
                    </p:column>
                    <p:column id="clmReceiptNumber" headerText="#{loc.invoice} #{loc.documentnumber} / #{loc.receiptno}" visible="#{marketShiftReportDetailBean.toogleList[10]}" exportable="#{marketShiftReportDetailBean.toogleList[10]}" sortable="true" sortBy="#{stockDetail.rcp.receiptNo}">
                        <h:outputText value="#{stockDetail.sales.receipt.id == 0 ? stockDetail.sales.invoice.documentNumber : stockDetail.sales.receipt.receiptNo}" />
                    </p:column>
                    <p:column id="clmUnitPrice" headerText="#{loc.unitprice}" visible="#{marketShiftReportDetailBean.toogleList[11]}" exportable="#{marketShiftReportDetailBean.toogleList[11]}" sortable="true" sortBy="#{stockDetail.sli.unitPrice}">                        
                        <h:outputText value="#{stockDetail.unitPrice}" class="Fright">
                            <f:converter converterId="currencyConverter" />
                            <f:attribute name="currency" value="#{stockDetail.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmQuantity" headerText="#{loc.salesamount}" visible="#{marketShiftReportDetailBean.toogleList[12]}" exportable="#{marketShiftReportDetailBean.toogleList[12]}" sortable="true" sortBy="#{stockDetail.COALESCE(sli.quantity, 0)}">
                        <h:outputText value="#{stockDetail.quantity}" class="Fright">
                            <f:converter converterId="currencyConverter" />
                            <f:attribute name="unit" value="#{stockDetail.unit}"/>
                            <f:attribute name="type" value="unit" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmGiro" headerText="#{loc.totalgiro}" visible="#{marketShiftReportDetailBean.toogleList[13]}" exportable="#{marketShiftReportDetailBean.toogleList[13]}" sortable="true" sortBy="#{stockDetail.COALESCE((sli.totalmoney - ((sli.totalmoney * COALESCE(sl.discountrate, 0))/100)), 0)}">
                        <h:outputText value="#{stockDetail.totalMoney}" class="Fright">
                            <f:converter converterId="currencyConverter" />
                            <f:attribute name="currency" value="#{stockDetail.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                        <h:panelGroup rendered="#{stockDetail.sales.isReturn}" >
                            <li class="Fright BordRad10 TexAlLeft MarRight10" >
                                <i class="fa fa-minus red"></i>
                            </li>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{!stockDetail.sales.isReturn}" >
                            <li  class="Fright BordRad10 TexAlLeft MarRight10">
                                <i class="fa fa-plus green"></i>
                            </li>
                        </h:panelGroup>
                    </p:column>                    

                    <p:columnGroup type="footer" rendered="#{marketShiftReportDetailBean.listStockDetail.rowCount>0}">
                        <ui:repeat value="#{marketShiftReportDetailBean.listStockDetailOfTotals}" var="totals" >
                            <p:row>
                                <p:column colspan="#{marketShiftReportDetailBean.toogleList.size()-marketShiftReportDetailBean.countToggle-1}" style="text-align:right" >
                                    <f:facet name="footer" >
                                        <h:outputText value="#{totals.type.tag} : " class="FontBold" style="font-size: 15px;  color: #565656;"/>
                                    </f:facet>
                                </p:column>
                                <p:column>
                                    <f:facet name="footer" >
                                        <h:outputText value="#{totals.price}" class="Fright FontBold" style="font-size: 15px;  color: #565656;">
                                            <f:converter converterId="currencyConverter" />
                                            <f:attribute name="currency" value="#{totals.sales.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                            </p:row>
                        </ui:repeat>
                        <p:row>
                            <p:column colspan="#{marketShiftReportDetailBean.toogleList.size()-marketShiftReportDetailBean.countToggle-1}" style="text-align:right" >
                                <f:facet name="footer" >
                                    <h:outputText value="#{loc.sum} : " class="FontBold" style="font-size: 15px;  color: #565656;"/>
                                </f:facet>
                            </p:column>
                            <p:column>
                                <f:facet name="footer" >
                                    <h:outputText value="#{marketShiftReportDetailBean.calculateTotal()}" class="Fright FontBold" style="font-size: 15px;  color: #565656;"/>
                                </f:facet>
                            </p:column>
                        </p:row>
                    </p:columnGroup>
                </p:dataTable>  
            </h:form>
        </h:panelGroup>

    </h:panelGroup>

    <p:dialog id="dlgShiftSales" widgetVar="dlg_ShiftSales" resizable="false" style="max-height: 85%; overflow-y: auto;" width="60%" focus="dlgShiftSales" modal="true" responsive="true" dynamic="true" closeOnEscape="true">
        <h:form id="frmSalesReportDetail">
            <p:toolbar >
                <f:facet name="left">
                    <h:outputText value=" #{loc.marketshiftsales}" class="outputTextFont Fleft MarRight8" />
                </f:facet>
                <f:facet name="right">
                    <p:commandLink id="btnPrinter"     title="#{loc.print}" >  
                        <i class="icon-print Fs20 tlbrSaveBtn"/>  
                        <p:printer target="frmSalesReportDetail" /> 
                    </p:commandLink>
                </f:facet>
            </p:toolbar>

            <p:panelGrid id="grdSalesReport" columns="2" class="Wid100 reportPanelGrid">

                <h:outputText value="#{loc.saledate}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.processDate}" >
                    <f:convertDateTime pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss"/>
                </h:outputText>
                <h:outputText value="#{loc.shiftno}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.shift.shiftNo}" />
                <h:outputText value="#{loc.posname}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.pointOfSale.name}" />
                <h:outputText value="#{loc.pos} #{loc.macaddress}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.posMacAddress}" />
                <h:outputText value="#{loc.salestype}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.isReturn ? loc.saleofreturn : loc.sales}" />
                <h:outputText value="#{loc.user}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.user.fullName}" />
                <h:outputText value="#{loc.customer}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.account.name}" />
                <h:outputText value="#{loc.totalofproduct}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.totalPrice}"  style="float: right">
                    <f:converter converterId="currencyConverter"  />
                    <f:attribute name="currency"  value="#{marketShiftReportDetailBean.selectedObject.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>
                <h:outputText value="#{loc.bottomdiscountamount}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.discountPrice}"  style="float: right">
                    <f:converter converterId="currencyConverter"  />
                    <f:attribute name="currency"  value="#{marketShiftReportDetailBean.selectedObject.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>
                <h:outputText value="#{loc.productbaseddiscountamount}" />
                <h:outputText value="#{marketShiftReportDetailBean.calculateProductBasedDiscount()}"  style="float: right">
                    <f:converter converterId="currencyConverter"  />
                    <f:attribute name="currency"  value="#{marketShiftReportDetailBean.selectedObject.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>
                <h:outputText value="#{loc.totaldiscountamount}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.totalDiscount}"  style="float: right">
                    <f:converter converterId="currencyConverter"  />
                    <f:attribute name="currency"  value="#{marketShiftReportDetailBean.selectedObject.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>
                <h:outputText value="#{loc.taxtotal}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.totalTax}"  style="float: right">
                    <f:converter converterId="currencyConverter"  />
                    <f:attribute name="currency"  value="#{marketShiftReportDetailBean.selectedObject.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>
                <h:outputText value="#{loc.overalltotal}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.totalMoney}"  style="float: right">
                    <f:converter converterId="currencyConverter"  />
                    <f:attribute name="currency"  value="#{marketShiftReportDetailBean.selectedObject.currency}"/>
                    <f:attribute name="type" value="currency" />
                </h:outputText>
                <h:outputText value="#{loc.invoice} #{loc.documentnumber}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.invoice.documentNumber}" />
                <h:outputText value="#{loc.receiptno}" />
                <h:outputText value="#{marketShiftReportDetailBean.selectedObject.receipt.receiptNo}" />
            </p:panelGrid>
            <div class="EmptyBox10"/>
            <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0 !important">
                <ui:include src="/pages/general/common/tabgridtoolbar.xhtml" >
                    <ui:param name="outputtext" value="#{loc.stocksofsales}"/>
                    <ui:param name="bean" value='#{marketShiftReportDetailBean}' />
                    <ui:param name="update"  value="" />
                </ui:include>
                <p:dataTable id="dtbSaleItem" class="dtbReport dialogDatatable" var="saleItem"  widgetVar="saleItemPF" value="#{marketShiftReportDetailBean.shiftSaleItemList}" 
                             rowKey="#{saleItem.id}" emptyMessage="#{loc.norecordsfound}" resizableColumns="true" >


                    <p:column id="clmStockCode" headerText="#{loc.stockcode}">
                        <h:outputText  value="#{saleItem.stock.code}"/>
                    </p:column>
                    <p:column id="clmCenterStockCode" headerText="#{loc.centerstockcode}">
                        <h:outputText  value="#{saleItem.stock.centerProductCode}"/>
                    </p:column>
                    <p:column id="clmBarcode" headerText="#{loc.stockbarcode}">
                        <h:outputText  value="#{saleItem.stock.barcode}" />
                    </p:column>
                    <p:column id="clmStock" headerText="#{loc.stock}">
                        <h:outputText value="#{saleItem.stock.name}" />
                    </p:column>
                    <p:column id="clmQuantity" headerText="#{loc.quantity}">
                        <h:outputText value="#{saleItem.quantity}" style="float: right">
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="unit" value="#{saleItem.unit}"/>
                            <f:attribute name="type" value="unit" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmUnitPrice" headerText="#{loc.unitprice}">
                        <h:outputText value="#{saleItem.unitPrice}" style="float: right">
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{saleItem.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmTotalOfProduct" headerText="#{loc.totalofproduct}">
                        <h:outputText value="#{saleItem.totalPrice}" style="float: right">
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{saleItem.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmOverallTotal" headerText="#{loc.overalltotal}">
                        <h:outputText value="#{saleItem.totalMoney}" style="float: right">
                            <f:converter converterId="currencyConverter"  />
                            <f:attribute name="currency"  value="#{saleItem.currency}"/>
                            <f:attribute name="type" value="currency" />
                        </h:outputText>
                    </p:column>
                    <p:column id="clmManagerDiscount" headerText="#{loc.managerdiscount}">
                        <h:outputText value="#{saleItem.managerUserData.id==0 ? '' : saleItem.managerUserData.fullName}" />
                    </p:column>
                    <p:columnGroup type="footer" class="Fright" >
                        <c:forEach items="#{marketShiftReportDetailBean.listOfTotalSaleType}" var="salePayment">
                            <p:row>
                                <p:column colspan="7" style="text-align:right; font-weight: bold;">
                                    <f:facet name="footer"  >
                                        <h:outputText value="#{salePayment.type.tag} :" style="text-align:right; font-weight: bold; color: #303030" />
                                    </f:facet>
                                </p:column>
                                <p:column style="text-align:right; font-weight: bold;">
                                    <f:facet name="footer"  >
                                        <h:outputText value="#{salePayment.price}" style="text-align:right; font-weight: bold; color: #303030" >
                                            <f:converter converterId="currencyConverter"  />
                                            <f:attribute name="currency"  value="#{salePayment.currency}"/>
                                            <f:attribute name="type" value="currency" />
                                        </h:outputText>
                                    </f:facet>
                                </p:column>
                                <p:column style="text-align:right; font-weight: bold;">

                                </p:column>
                            </p:row>
                        </c:forEach>
                    </p:columnGroup> 


                </p:dataTable>
            </div>
        </h:form>
    </p:dialog>


    <p:confirmDialog global="true" class="deleteConfirm MaxWid500"   id="dlgReOpenShift" widgetVar="dlg_ReOpenShift"  closeOnEscape="true" responsive="true">
        <f:facet name="message">
            <h:outputText value="#{loc.areyousuretoreopenshift}"  style="white-space: pre-wrap;"/>
        </f:facet>
        <p:commandButton value="#{loc.yes}" actionListener="#{marketShiftReportDetailBean.reopenShift()}" onclick="PF('dlg_ReOpenShift').hide()" process="@this" styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
        <p:commandButton value="#{loc.no}" type="button" onclick="PF('dlg_ReOpenShift').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
    </p:confirmDialog>

    <!--Print butonuna basınca çalışan kısım-->
    <p:panel id="printerContainer" style="display: none"  >
        <p:panelGrid id="printerPanel" >

        </p:panelGrid>
    </p:panel> 



    <script type="text/javascript">
        function print_page() {
            var divContents = $("#printerPanel").html();
            var printWindow = window.open('', '', 'height=400,width=800');
            printWindow.document.write('<div style="text-align:center; font-weight:bold; font-family:sans-serif;">#{loc.detailmarketshiftreport}</div>');
            printWindow.document.write('<div id="printerDiv">');
            printWindow.document.write(divContents);
            printWindow.document.write('</div>');
            printWindow.document.close();
            printWindow.print();

        }
    </script>


</ui:composition>



