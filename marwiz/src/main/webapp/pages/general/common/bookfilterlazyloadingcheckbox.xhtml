<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                >




    <h:form id="#{form}"> 

        <ui:include src="/pages/general/common/datagridtoolbarbookfilter.xhtml">
            <ui:param name="bean" value="#{bean}"/>                                      <!--  -->
            <ui:param name="filterBean" value='#{filterBean}' />                         <!-- Listeye verinin cekileceği bean örn:PersonbookFilterBean -->
            <ui:param name="btnNewId" value="false"/><!-- (+) butonu yetki kontrolu. Hangi sayfadan çağırıyorsan orada yapılır. Örn:EmployeeProcess -->
            <ui:param name="datatable" value="#{form}:dtbFilter" />                      <!-- datatable  -->
            <ui:param name="type" value='#{type}' />  
            <ui:param name="update" value='#{dialog}' />          <!-- hangi sayfadan geldiğimiz.Dao tarafında ayırt etmek için. Örn:employee,account.. -->
            <ui:param name="parameters" value='#{parameters}' />                         <!-- sorguda kullanılacak parametreler Örn:Employee objesi -->
            <ui:param name="btnOk" value='true' />
        </ui:include>

        <h:panelGroup rendered="#{type=='reportcheckbox' or type=='warehouseitem' or type=='reportcheckboxwithbranch' or type=='accountextractreportcheckbox' or type=='employeeextractreportcheckbox' or type=='stockbatchupdate'
                                  or type=='supplierCheckboxReport' or type=='invoiceCheckBox' or type=='orderCheckBox' or type=='salereturn' or type=='customeragreement' or type=='eInvoiceCheckBox'}">
            <p:separator style="margin-top: 0px !important; margin-bottom: 5px;" class="allCheckSeparator"/>
            <div class="ui-g  allCheckPanelGrid" style="display: block; border-bottom : 0px !important; border-radius: 0px !important; box-shadow: none !important; padding: 0px !important">
                <p:selectBooleanCheckbox  value="#{filterBean.isAll}" rendered = "#{type != 'warehouseitem' }" itemLabel="#{loc.all}" class="Fleft allcheck" style="#{type=='reportcheckbox' ? 'margin-top: 7px;margin-left: 5px; padding: 1px 10px !important;' : 'margin-top: 2px;margin-left: 5px; padding: 1px 10px !important;'}">
                    <p:ajax global="false"/>
                </p:selectBooleanCheckbox>
                <p:commandButton class="btnClear" value="#{loc.clear}" title="#{loc.clearselected}" actionListener="#{filterBean.clearSelected()}" icon="ui-icon-trash"  process="@this" style="#{type=='reportcheckbox' ? 'margin-top: 7px;' : type == 'warehouseitem' ? 'margin-top: 1px; margin-left: 5px;' : 'margin-top: 1px;'}" />
                <p:selectBooleanCheckbox rendered="#{type=='stockbatchupdate'}" value="#{filterBean.isFilter}"  itemLabel="#{loc.applyfilter}" class="Fright allcheck" style="margin-top: 2px; margin-left: 5px; padding: 1px 10px !important;">
                    <p:ajax delay="100" update="#{form}:dtbFilter"/>
                </p:selectBooleanCheckbox>
                <p:selectBooleanCheckbox rendered="#{type=='warehouseitem'}" value="#{filterBean.isWithoutSalePrice}"  itemLabel="#{loc.stockswithsalesprice}" class="Fright allcheck" style="margin-top: 2px; margin-left: 5px; padding: 1px 10px !important;">
                    <p:ajax global="false"/>
                </p:selectBooleanCheckbox>
                  <h:panelGroup rendered="#{type=='reportcheckbox' and form != 'frmStockBookFilterCheckbox'}">
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Fright" style="padding: 3px 0px 3px 0px !important" >
                        <p:selectOneMenu value="#{filterBean.supplierType}" class="Fright" >
                            <f:selectItem itemLabel="#{loc.all}" itemValue="0" />
                            <f:selectItem itemLabel="#{loc.showothersuppliers}" itemValue="1" />
                            <f:selectItem itemLabel="#{loc.showultramarketsuppliers}" itemValue="2"/>   
                            <p:ajax event="change" delay="100" update="#{form}:dtbFilter"/>
                        </p:selectOneMenu>
                    </div>
                </h:panelGroup>
            </div>
        </h:panelGroup>




        <p:dataTable  id="dtbFilter" var="data" widgetVar="filterPF"  transient="true"  value="#{filterBean.dataListLazyLoading}"  selection="#{filterBean.selectedDataList}" emptyMessage="#{loc.norecordsfound}"
                      rows="10" rowKey="#{data.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                      reflow="true" class="tabDatatable" lazy="true" rowsPerPageTemplate="10,15,20" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}" 
                      rowStyleClass="#{bookname=='stockbook' and data.status.id==4 ? 'ColumnColorRed' : null}">

            <p:ajax event="rowSelectCheckbox" listener="#{filterBean.changeSelected()}" />
            <p:ajax event="rowUnselectCheckbox" listener="#{filterBean.changeSelected()}"/>
            <p:ajax event="toggleSelect" listener="#{filterBean.changeSelected()}" />
            <p:column selectionMode="multiple" style="width:26px;text-align:center" selectRow="false"/>
            <p:column headerText="#{header1}" rendered="#{columnsize>=1}" selectRow="false">
                <h:outputText value="#{value1}" />
            </p:column>
            <p:column headerText="#{header2}"  rendered="#{columnsize>=2}" selectRow="false">
                <h:outputText value="#{value2}" />
            </p:column>
            <p:column headerText="#{header3}" rendered="#{columnsize>=3}" selectRow="false">
                <h:outputText value="#{value3}" />
            </p:column>
            <p:column headerText="#{header4}" rendered="#{columnsize>=4}" selectRow="false">
                <h:outputText value="#{value4}" />
            </p:column>
            <p:column headerText="#{header5}" rendered="#{columnsize>=5}" selectRow="false">
                <h:outputText value="#{value5}" />
            </p:column>

        </p:dataTable>  
    </h:form>
</ui:composition>
