<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">


    <h:form id="frmMovementTab" style="padding: 5px 6px 0px 6px;">
        <div class="EmptyBox20" />
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.movements}"/>
            <ui:param name="selectedObjectName" value=""/>
            <ui:param name="bean" value='#{bean}' />
            <ui:param name="update" value="#{update}" />
            <ui:param name="btnSaveId" value="false" />
            <ui:param name="renderback" value='false'/>
            <ui:param name="btnDeleteId" value='false' /> 
            <ui:param name="renderSelectedObject" value='false'/>
            <ui:param name="renderedFindReport" value='true'/>
        </ui:include>


        <h:panelGroup id="pgrMovementProcess" layout="block" transient="true">  
            <div class="ui-g divContent">
                <div class="ui-g-12">
                    <h:panelGroup rendered="#{renderedBranch}">
                        <h:panelGroup rendered="#{bean.listOfBranch.size() > 1}">
                            <div class="ui-g-12 ui-md-6 ui-lg-2">
                                <p:outputLabel value="#{loc.branch}" for="slcBranch" styleClass="Fs12 FontBold"/>
                                <p:selectCheckboxMenu  id="slcBranch" value="#{bean.selectedBranchList}" 
                                                       filter="true" filterMatchMode="contains" converter="entityConverter" widgetVar="slcBranchCheckBox"  
                                                       label="#{bean.selectedBranchList.size()!=0 ? bean.selectedBranchList.size() :loc.all} #{bean.selectedBranchList.size()!=0 ? loc.branch : ''} #{bean.selectedBranchList.size()!=0 ? loc.selected : ''}" styleClass="Wid90" >
                                    <f:selectItems value="#{bean.listOfBranch}" itemLabel="#{branch.name}" itemValue="#{branch}" var="branch" />       
                                    <p:ajax oncomplete="PF('slcBranchCheckBox').show()" global="false" update="#{updateSelectMenu}"/>
                                    <p:ajax event="toggleSelect" update="#{updateSelectMenu}"  oncomplete="PF('slcBranchCheckBox').show()" global="false"/>
                                </p:selectCheckboxMenu>
                            </div>
                        </h:panelGroup>  
                    </h:panelGroup>
                   
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.startdate}" for="cldStartDate" styleClass="Fs12 FontBold"/>
                        <p:calendar  id="cldStartDate" class="datepicker" value="#{bean.beginDate}" required="true" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" timeControlType="select" showOn="button" showButtonPanel="true" placeholder="#{loc.startdate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                            <p:ajax event="change" update="cldStartDate" resetValues="true" global="false"/>
                        </p:calendar>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.enddate}" for="cldEndDate" styleClass="Fs12 FontBold"/>
                        <p:calendar  id="cldEndDate" class="datepicker" value="#{bean.endDate}" required="true" beforeShow="dpClearButton" pattern="#{sessionBean.user.lastBranch.dateFormat} HH:mm:ss" timeControlType="select"  showOn="button" showButtonPanel="true" placeholder="#{loc.enddate}" mask="true" navigator="true" locale="#{sessionBean.locale}" yearRange="c-100:c+20" >
                            <p:ajax event="change" update="cldEndDate" resetValues="true" global="false"/>
                        </p:calendar>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-4">
                        <p:outputLabel value="#{loc.processtype}" for="srdOperationType" styleClass="Fs12 FontBold"/>
                        <p:panelGrid layout="grid" columns="1" class="pngCheckBox" >  
                            <p:selectOneRadio id="srdOperationType" value="#{bean.opType}" class="srcExtractRadio" layout="responsive" columns="3">
                                <f:selectItem itemLabel="#{loc.incoming}" itemValue="1" />
                                <f:selectItem itemLabel="#{loc.outcoming}" itemValue="2" />
                                <f:selectItem itemLabel="#{loc.all}" itemValue="3" />
                                <p:ajax listener="#{bean.find()}" update="#{update}"/>
                            </p:selectOneRadio>
                        </p:panelGrid>
                    </div> 
                    <div  class="ui-g-12 ui-md-6 ui-lg-2">
                        <p:outputLabel value="#{loc.financingdocumenttype}" for="slcOperationType" styleClass="Fs12 FontBold"/>
                        <p:selectOneMenu id="slcOperationType" value="#{bean.financingTypeId}" styleClass="Wid97">
                            <f:selectItem itemLabel="#{loc.all}" itemValue="0" /> 
                            <f:selectItems value="#{bean.listOfFinancingType}" var="operationtype" itemLabel="#{operationtype.nameMap.get(sessionBean.langId).name}" itemValue="#{operationtype.id}"  />
                            <p:ajax global="false"/>
                        </p:selectOneMenu>
                    </div>

                </div>  
            </div>
        </h:panelGroup>
    </h:form>
    <div class="EmptyBox20" />
    <h:panelGroup id="pgrMovementDatatableProcess">
        <div class="ui-g">
            <div class="ui-g-12">
                <h:panelGroup rendered="#{bean.isFind}">

                    <ui:include src="/pages/general/common/datagridtoolbarreport.xhtml" >
                        <ui:param name="bean" value="#{bean}"/>
                        <ui:param name="datatable" value="#{datatable}" />
                        <ui:param name="fileName" value=""/>
                        <ui:param name="renderedToggler" value='false'/>
                        <ui:param name="renderedExcel" value='true'/>
                        <ui:param name="renderedPdf" value='true'/>
                        <ui:param name="renderedPrint" value='true'/>
                        <ui:param name="renderedGraphic" value='false'/>
                        <ui:param name="renderedAdd" value="#{renderedAdd}"/>
                        <ui:param name="renderedBankAccountCommission" value="#{renderedBankAccountCommission}"/>
                    </ui:include>


                    <ui:include src="/pages/general/common/movementtabdatatable.xhtml">
                        <ui:param name="bean" value='#{bean}' />
                        <ui:param name="currency" value='#{currency}' />
                        <ui:param name="renderedBranch" value="#{renderedBranch}"/>
                    </ui:include>
                </h:panelGroup>
            </div>
        </div>
    </h:panelGroup>
</ui:composition>
