<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <h:form id="#{form}"> 
        <ui:include src="/pages/general/common/tabgridtoolbar.xhtml">
            <ui:param name="btnNewId" value="false"/>
            <ui:param name="update" value="" />
            <ui:param name="outputtext" value="#{loc.categories}" />
            <ui:param name="btnOk" value='true' />
            <ui:param name="filterBean" value='#{categoryBookCheckboxFilterBean}' />
        </ui:include>

        <h:panelGroup rendered="#{type=='reportcheckbox' or type=='productMovementReportcheckbox' or type=='stockTakingCheckbox' or type=='stockinventoryreport' or type=='accountExtract'
                                  or type=='SaleSummaryReportCheckbox' or type=='SaleDetailReportCheckbox' or type=='DashboardCheckbox' or type=='profitMarginReportCheckbox' or type=='orderListReportCheckbox' or type=='entryExitSummaryReportcheckbox' or type=='fulltakingreport'
                                  or type=='movementReportBetweenWarehouseTakings' or type=='purchasesalereportCheckbox' or type=='wasteReportCheckbox' or type=='freeStockReportCheckbox' or type=='purchaseDetailReportCheckbox' or type =='stockOperationCategoryCheckbox'}">
            <p:separator style="margin-top: 0px !important; margin-bottom: 5px;" class="allCheckSeparator"/>
            <div class="ui-g  allCheckPanelGrid" style="display: block; border-bottom : 0px !important; border-radius: 0px !important; box-shadow: none !important; padding: 0px !important">
                <p:selectBooleanCheckbox  value="#{categoryBookCheckboxFilterBean.isAll}" itemLabel="#{loc.all}" class="Fleft allcheck" style="margin-top: 2px; margin-left: 5px; padding: 1px 10px !important;">
                    <p:ajax global="false"/>
                </p:selectBooleanCheckbox>
                <p:commandButton class="btnClear" value="#{loc.clear}" title="#{loc.clearselected}" icon="ui-icon-trash" actionListener="#{categoryBookCheckboxFilterBean.clearSelected()}" process="@this" style="margin-top: 1px" />
            </div>
        </h:panelGroup>


        <p:treeTable id="ttbCategory" showUnselectableCheckbox="true" scrollable="true"  scrollHeight="300" value="#{categoryBookCheckboxFilterBean.root}" selection="#{categoryBookCheckboxFilterBean.selectedCategories}"  var="category" selectionMode="checkbox" >    
            <p:ajax event="select"  listener="#{categoryBookCheckboxFilterBean.onNodeSelect}" global="false"/>
            <p:ajax event="unselect" listener="#{categoryBookCheckboxFilterBean.onNodeUnSelect}" global="false"/>

            <p:column id="clmName" headerText="#{loc.categoryname}">
                <h:outputText value="#{category}" />
            </p:column>

        </p:treeTable>
    </h:form>
</ui:composition>
