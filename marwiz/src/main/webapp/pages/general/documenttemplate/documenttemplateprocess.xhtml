<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">        


    <h:outputStylesheet name="css/jquery.ui.ruler.css" library="sentinel-layout" />
    <h:outputScript name="js/jquery-ui.min.js" library="sentinel-layout" />
    <h:outputScript name="js/jquery.ui.ruler.js" library="sentinel-layout" />    

    <style type="text/css">

        .pnlDocumentTemplateLeft{
            overflow-x: auto;
            border-top: 2px solid #737272;
            border-left: 2px solid #737272;
            border-bottom: 2px solid #737272;
            border-radius: 10px 0 0 10px;
        }

        .pnlDocumentTemplateRight{
            border: 2px solid #737272;
            border-radius: 0 10px 10px 0;            
        }

        .ef-ruler {
            position: relative;
            overflow: hidden !important;
        }
        .ef-ruler .stage {
            width:#{(documentTemplateProcessBean.selectedObject.width)}mm !important;
            height:#{(documentTemplateProcessBean.selectedObject.height)}mm !important;
        }

        .ui-panel .ui-panel-title {
            margin: 1px; 
        }

        .ui-panel .ui-panel-content {
            padding: 0px !important;
        }

        .ui-panel .ui-panel-titlebar {
            padding: 0px !important;
        }

        .ui-button-text-only .ui-button-text {
            padding: 7px !important;
        }

        .panelCloseBtn{
            position: absolute;
            top: 0;
            right: 0;
            margin-right: 0px;
            cursor: pointer;
            color: #717577 !important;
        }

        .btnPageVertical{
            width: 55px;
            height: 75px;
            border: 1px solid #8a8888;
            background-color: #999b9c;
        }
        .btnPageVertical .ui-button-text{
            display: none;
        }

        .btnPageHorizantal{
            margin-left: 20px;
            vertical-align: top;
            margin-top: 11px;
            width: 80px;
            height: 50px;
            border: 1px solid #8a8888;
            background-color: #999b9c;
        }
        .btnPageHorizantal .ui-button-text{
            display: none;
        }

        .btnPageSelected{
            border: 1px solid rgb(139, 175, 241);
            -webkit-box-shadow: 2px 2px 5px 0px rgb(139, 175, 241);
            -moz-box-shadow: 2px 2px 5px 0px rgb(139, 175, 241);
            box-shadow: 2px 2px 5px 0px rgb(139, 175, 241);
        }

        .btnLargePageVertical{
            margin: auto;
            margin-top: 25px;
            width: 115px;
            height: 150px;
            border: 1px solid #8a8888;
            background-color: #999b9c;
        }

        .btnLargePageHorizantal{
            margin: auto;
            margin-top: 40px;
            width: 160px;
            height: 105px;
            border: 1px solid #8a8888;
            background-color: #999b9c;
        }

        .stockColumns .ui-datatable-header{
            padding: 0px;
            border: none;
            background: none !important;
        }

        .stocksVisibleBtn{
            color: white !important;
            position: absolute;
            border-right: 1px solid #cfd8dc;
            border-bottom: 1px solid #efefef;
            font-size: 18px;
            left: 0;
            top: 0;
            background-color: #2c84b1;
            border-radius: 0 0 5px 0;
            width: 28px;
            height: 25px;
            z-index: 1;
        }

        #itemsdt label{
            /*   font-weight: inherit !important; */
        }
        
        .ui-fileupload-buttonbar{
            padding: 0px !important;
            margin-top: -35px !important;
            margin: -20px 2px;
        }       
        .wrapLabel{
            word-wrap: break-word !important;
        }
        .pgrResponsive{
            border-collapse: collapse;
            margin: 0;
            padding: 0px;
            width: 100%;
            table-layout: auto;
        }

    </style>



    <p:dialog id="dlgDocumentTemplateProcess" widgetVar="dlg_DocumentTemplateProcess" resizable="false" transient="true" focus="dlgDocumentTemplateProcess" responsive="true" dynamic="true" closeOnEscape="true" width="30%">    
        <h:form id="frmDocumentTemplateProcess" >            
            <ui:include src="/pages/general/common/processtoolbar.xhtml" >
                <ui:param name="bean" value='#{documentTemplateProcessBean}' />
                <ui:param name="outputtext" value="#{loc.documenttemplatesettings}"/>
                <ui:param name="update" value="pgrDocumentTemplateProcess" />
                <ui:param name="btnSaveId" value="#{documentTemplateBean.getRendered(263, 0)}" />
                <ui:param name="btnDeleteId" value="#{documentTemplateBean.getRendered(264, 0)}" /> 
            </ui:include>

            <h:panelGroup id="pgrDocumentTemplateProcess" layout="block">
                <div class="ui-g divContent">
                    <ui:include src="/pages/general/documenttemplate/newdocumenttemplate.xhtml" >
                        <ui:param name="processInsert" value="false" />
                        <ui:param name="processUpdate" value="true" />
                        <ui:param name="bean" value='#{documentTemplateProcessBean}' />
                    </ui:include>
                </div>
            </h:panelGroup>
        </h:form>
    </p:dialog>



    <h:form id="form" prependId="false" >
        <p:remoteCommand onstart="rulers()" delay="100" global="false" autoRun="true"/>
        <p:remoteCommand name="documenttemplate" actionListener="#{documentTemplateProcessBean.onDrop()}" oncomplete="initDND()" global="false" />
        <p:remoteCommand name="selectdocumenttemplate" actionListener="#{documentTemplateProcessBean.onSelect()}"  global="false" />
        <p:remoteCommand name="unSelect" actionListener="#{documentTemplateProcessBean.unSelect()}"  global="false" />
        <p:remoteCommand name="goToGrid" actionListener="#{documentTemplateProcessBean.goToGrid()}" delay="200"/>


        <p:remoteCommand name="remove" actionListener="#{documentTemplateProcessBean.removePnl()}" global="false" />

        <p:toolbar>
            
        <f:facet name="left">
            <p:commandLink title="#{loc.back}" class="Fleft" rendered="true"   immediate="true"  >
                <i class="icon-reply-outline Fs20 tlbrBackBtn"/>    
                <f:actionListener  binding="#{marwiz.gotoBackActionListener()}"/>
            </p:commandLink>
            <h:outputText value="#{documentTemplateProcessBean.selectedObject.name}" class="outputTextFont Fleft MarRight8" />
       
        </f:facet>
            <f:facet name="right">
                <p:commandLink title="#{loc.delete}" process="@form" rendered="#{documentTemplateBean.getRendered(262, 0)}" class="Fright" id="btnTestDelete" immediate="true" actionListener="#{documentTemplateProcessBean.testBeforeDelete()}"  > 
                    <i class="icon-trash Fs20 tlbrDeleteBtn" /> 
                </p:commandLink>

                <p:commandLink id="btnSave" title="#{loc.save}" rendered="#{documentTemplateBean.getRendered(261, 0)}" actionListener="#{documentTemplateProcessBean.jsonSave()}" class="Fright">
                    <i class="fa fa-save Fs20 MarTop5 tlbrSaveBtn"/>                 
                </p:commandLink>

                <p:commandLink id="btnPrinter"  title="#{loc.preview}" actionListener="#{documentTemplateProcessBean.preview()}" class="Fright">  
                    <i class="icon-print Fs20 MarTop5 tlbrSaveBtn"/>  
                 <!--   <p:printer target="#{target}" />-->
                </p:commandLink>
                <p:commandLink id="btnPage"  title="#{loc.settings}" oncomplete="PF('dlg_DocumentTemplateProcess').show()">  
                    <i class="fa fa-gear Fs20 MarTop5 tlbrSaveBtn"/>
                </p:commandLink>
                <p:commandLink  title="#{loc.fileupload} (txt)" process="@this" immediate="true" class="Fleft" onclick="PF('dlg_TemplateUpload').show();"  rendered="#{documentTemplateProcessBean.selectedObject.type.id!=96}">
                    <i class="fa fa-cloud-upload Fs23 tlbrUploadBtn MarTop3 MarRight5" />                 
                </p:commandLink>
                <p:commandLink title="#{loc.filedownload} (txt)" ajax="false" class="Fleft MarTop2 MarRight7" >
                    <p:fileDownload value="#{documentTemplateProcessBean.prepDownload()}" />
                    <i class="fa fa-download Fs18 tlbrUploadBtn tblrExport"/>                 
                </p:commandLink>
            </f:facet>
        </p:toolbar>

        <p:confirmDialog global="true" class="deleteConfirm MaxWid500"   id="dlgDelete" widgetVar="dlgDeleteVar"   closeOnEscape="true" responsive="true">
            <f:facet name="message">
                <h:outputText value="#{loc.areyousureyouwanttodelete}"  style="white-space: pre-wrap;">
                    <i class="icon-trash Fs20 tlbrDeleteBtn" /> 
                </h:outputText>

            </f:facet>
            <p:commandButton value="#{loc.yes}" action="#{documentTemplateProcessBean.delete()}" onclick="PF('dlgDeleteVar').hide()" process="@this" styleClass="ui-confirmdialog-yes" icon="ui-icon-check fa fa-check Fs14 white"   />
            <p:commandButton value="#{loc.no}" type="button" onclick="PF('dlgDeleteVar').hide()" styleClass="ui-confirmdialog-no" icon="ui-icon-close fa fa-close Fs14 white" />
        </p:confirmDialog>



        <h:panelGroup id="pgrNewPos" layout="block" >
            <div class="ui-g divContent">  
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.left}" for="txtLeft"/>
                    <p:inputNumber id="txtLeft"   symbol="&#32;mm" symbolPosition="s" 
                                   decimalSeparator="," thousandSeparator="."  value="#{documentTemplateProcessBean.documentTemplateObject.left}" class="Wid97 TexAlRight"> 
                        <p:ajax event="keyup"  listener="#{documentTemplateProcessBean.changeLeft()}"  />

                    </p:inputNumber>
                </div>   
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.top}" for="txtTop" />

                    <p:inputNumber id="txtTop"   symbol="&#32;mm" symbolPosition="s" 
                                   decimalSeparator="," thousandSeparator="."  value="#{documentTemplateProcessBean.documentTemplateObject.top}" class="Wid97 TexAlRight"> 
                        <p:ajax event="keyup"  listener="#{documentTemplateProcessBean.changeTop()}"  />

                    </p:inputNumber>
                </div> 
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.width}" for="txtWidth"/>
                    <p:inputNumber id="txtWidth"   symbol="&#32;mm" symbolPosition="s" 
                                   decimalSeparator="," thousandSeparator="."  value="#{documentTemplateProcessBean.documentTemplateObject.width}" class="Wid97 TexAlRight"> 
                        <p:ajax event="keyup"  listener="#{documentTemplateProcessBean.changeWidth()}"  />

                    </p:inputNumber>
                </div> 
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.height}" for="txtHeight" />
                    <p:inputNumber id="txtHeight"   symbol="&#32;mm" symbolPosition="s" 
                                   decimalSeparator="," thousandSeparator="."  value="#{documentTemplateProcessBean.documentTemplateObject.height}" class="Wid97 TexAlRight"> 
                        <p:ajax event="keyup"  listener="#{documentTemplateProcessBean.changeHeight()}"  />

                    </p:inputNumber>
                </div> 
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.fontsize}" for="txtSize"/>
                    <p:inputNumber id="txtSize" decimalPlaces="0"
                                   symbol="&#32;Pt"
                                   symbolPosition="s"
                                   value="#{documentTemplateProcessBean.documentTemplateObject.fontSize}" class="Wid97 TexAlRight" >
                        <p:ajax event="keyup"  listener="#{documentTemplateProcessBean.changeFontSize()}" />
                    </p:inputNumber>
                </div>                
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.align}" for="txtAling"/>
                    <p:selectOneButton id="txtAling" class="Wid100" value="#{documentTemplateProcessBean.documentTemplateObject.fontAlign}"   >
                        <f:selectItem itemLabel="" itemValue="left" />
                        <f:selectItem itemLabel="" itemValue="center" />
                        <f:selectItem itemLabel="" itemValue="right" />
                        <p:ajax listener="#{documentTemplateProcessBean.changeFontAlign()}" global="false" />
                    </p:selectOneButton>
                </div>
                <div class="ui-g-12 ui-md-2 ui-lg-1">
                    <p:outputLabel value="#{loc.textstyle}" for="txtBoldItalic"/>
                    <br/>
                    <p:selectManyButton id="txtBoldItalic"  class="Wid100" value="#{documentTemplateProcessBean.documentTemplateObject.fontStyle}" >
                        <f:selectItem itemLabel="" itemValue="bold" />
                        <f:selectItem itemLabel="" itemValue="italic" />

                        <p:ajax listener="#{documentTemplateProcessBean.changeFontStyle()}" global="false" />
                    </p:selectManyButton>
                </div>
                <div class="ui-g-12 ui-md-2 ui-lg-1" >
                    <p:outputLabel value="#{loc.withoutlabel}" for="txtLabel" rendered="#{documentTemplateProcessBean.withoutlabel}"/>
                    <br/>
                    <p:selectBooleanCheckbox id ="txtLabel" value="#{documentTemplateProcessBean.documentTemplateObject.label}" rendered="#{documentTemplateProcessBean.withoutlabel}" >
                       <p:ajax global="false" listener="#{documentTemplateProcessBean.changeLabel()}" />
                    </p:selectBooleanCheckbox>
                   
                </div>
            </div>
        </h:panelGroup>
        <p:blockUI block="pgrNewPos" widgetVar="bui"/>
    </h:form>

    <div class="EmptyBox10"/>

    <div class="ui-g">

        <div class="ui-g-12 ui-md-9 ui-lg-9 pnlDocumentTemplateLeft">
            <p:outputPanel id="pagePanel" class="page" layout="block" 
                           style="   background-position-y: 10px;/*  background-image: url('#{documentTemplateProcessBean.selectedObject.isUseTemplate==true?ftpConnectionBean.path:null }');*/background-repeat: no-repeat;background-size: contain; width:#{(documentTemplateProcessBean.selectedObject.width+17) }mm;height:#{(documentTemplateProcessBean.selectedObject.height+15)}mm;border:1px solid #666666;margin: auto; background-color: white" >
                <p:outputPanel id="droppable"  layout="block"  style="background-color: transparent; width:#{(documentTemplateProcessBean.selectedObject.width+12)}mm;height:#{(documentTemplateProcessBean.selectedObject.height+10)}mm;margin: auto;" >

                </p:outputPanel>
                <p:growl widgetVar="duplicate" id="duplicate" showDetail="true" globalOnly="true" life="3000" class="red"   />  

                <p:droppable  scope="documenttemplate" for="droppable"/> 
            </p:outputPanel>
        </div>

        <div class="ui-g-12 ui-md-3 ui-lg-3 pnlDocumentTemplateRight">
            <p:panel  id="textPropPnl" style="width:95%" visible="#{documentTemplateProcessBean.renderEditText}">
                <h:form id="frmTextprop">           
                    <p:inputTextarea rows="1" cols="30"  value="#{documentTemplateProcessBean.documentTemplateObject.name}"  widgetVar="editorWidget"  id="textprop"  autoResize="false" />
                    <h:panelGrid columns="2" style="margin-top: 10px">
                        <p:commandButton value="#{loc.save}" actionListener="#{documentTemplateProcessBean.SaveEditText()}" global="false" icon="ui-icon-disk" />
                    </h:panelGrid>
                </h:form>
            </p:panel>
            <p:panel  id="imgUploadPnl" style="width:95%" visible="#{documentTemplateProcessBean.renderImgUpload}">
                <h:form id="frmImg">           
                    <p:graphicImage  transient="true"  cache="false" id="img" value="#{ftpConnectionBean.path}"  class= "img"  width="25%" height="100%"   /> 
                    <p:fileUpload  id="uploadImage"  update="imgUploadPnl" allowTypes="/(\.|\/)(jpe?g|png)$/" invalidFileMessage="#{loc.invalidfiletype}" invalidSizeMessage="#{loc.filesizecannotbegreaterthan1mb}"
                                   label="#{loc.upload}"  auto="true" sizeLimit="10000000" fileUploadListener="#{ftpConnectionBean.handleFileUploadImage}"  mode="advanced"  />

                </h:form>
            </p:panel>
            <h:form prependId="false">
                <p:panelMenu style="width:95%; " rendered="#{documentTemplateProcessBean.selectedObject.type.id !=96}">
                    <p:submenu label="#{loc.branchinformations}" style="display: #{documentTemplateProcessBean.selectedObject.type.id != 72 ? 'block;' : 'none;'}">
                        <p:menuitem value="#{loc.name}" class="Fs14 MarLeft10" id="branchname" icon="fa fa-building" />
                        <p:menuitem value="#{loc.address}" class="Fs14 MarLeft10" id="branchaddress" icon="fa fa-envelope" />
                        <p:menuitem value="#{loc.mail}" class="Fs14 MarLeft10" id="branchmail"  icon="fa fa-envelope" />
                        <p:menuitem value="#{loc.telephone}"  class="Fs14 MarLeft10" id="branchtelephone"  icon="fa fa-phone" />
                        <p:menuitem value="#{loc.taxoffice}" class="Fs14 MarLeft10" id="branchtaxoffice"  icon="fa fa-legal" />
                        <p:menuitem value="#{loc.taxno}" class="Fs14 MarLeft10" id="branchtaxnumber"  icon="fa fa-legal" />
                    </p:submenu>
                    <p:separator />


                    <p:submenu label="#{loc.customerinformations}" style="display: #{documentTemplateProcessBean.selectedObject.type.id != 72 ? 'block;' : 'none;'}">
                        <p:menuitem value="#{loc.customertitle}" class="Fs14 MarLeft10" id="customertitle" icon="fa fa-building" />
                        <p:menuitem value="#{loc.customeraddress}" class="Fs14 MarLeft10" id="customeraddress" icon="fa fa-envelope" />
                        <p:menuitem value="#{loc.customerphone}" class="Fs14 MarLeft10" id="customerphone"  icon="fa fa-phone" />
                        <p:menuitem value="#{loc.taxinformationofficeandnumber}"  class="Fs14 MarLeft10" id="customertaxofficenumber"  icon="fa fa-legal" />
                        <p:menuitem value="#{loc.taxoffice}" class="Fs14 MarLeft10" id="customertaxoffice"  icon="fa fa-legal" />
                        <p:menuitem value="#{loc.taxno}" class="Fs14 MarLeft10" id="customertaxnumber"  icon="fa fa-legal" />
                        <p:menuitem value="#{loc.customerbalance}" class="Fs14 MarLeft10" id="customerbalance" icon="fa fa-building" />
                    </p:submenu>
                    <p:separator />

                    <p:submenu label="#{documentTemplateProcessBean.selectedObject.type.id == 62 ? loc.invoiceinformations :( documentTemplateProcessBean.selectedObject.type.id == 63 ? loc.waybillinformations : loc.documentinformations)}" style="display: #{documentTemplateProcessBean.selectedObject.type.id != 72 ? 'block;' : 'none;'}">


                        <p:menuitem value="#{documentTemplateProcessBean.selectedObject.type.id == 62 ? loc.invoicedate :( documentTemplateProcessBean.selectedObject.type.id == 63 ? loc.waybilldate : loc.documentdate)}" class="Fs14 MarLeft10" id="invoicedate" icon="fa fa-calendar"/>
                        <p:menuitem value="#{loc.documentno}" class="Fs14 MarLeft10" id="invoiceno" icon="fa fa-file-text-o"/>
                        <p:menuitem value="#{loc.waybillno}" class="Fs14 MarLeft10" id="waybillno"      icon="fa fa-truck" style="display: none;"/>
                        <p:menuitem value="#{loc.dispatchdate}"  style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;' }" class="Fs14 MarLeft10" id="dispatchdate"    icon="fa fa-truck"/>
                        <p:menuitem value="#{loc.dispatchaddress}" style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="dispatchaddress" icon="fa fa-truck"/>
                        <p:menuitem value="#{loc.termdate}" style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="duedate" icon="fa fa-calendar"/>
                    </p:submenu>
                    <p:separator />
                    <p:submenu label="#{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? loc.stockservice: loc.customerbankinformations}" style="display: #{documentTemplateProcessBean.selectedObject.type.id != 72 ? 'block;' : 'none;'}">
                        <p:menuitem    value=" #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? loc.stockservice: loc.customerbankinformations}" class="Fs14 MarLeft10" id="items" icon="fa fa-cubes"/>
                    </p:submenu>   


                    <p:separator /> 


                    <p:submenu label="#{loc.totalamountinformations}" style="display: #{documentTemplateProcessBean.selectedObject.type.id != 72 ? 'block;' : 'none;'}">
                        <p:menuitem value="#{loc.subtotal}"   style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="totalprice" icon="fa fa-calculator" />
                        <p:menuitem value="#{loc.totaldiscount}"   style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="totaldiscount" icon="fa fa-tag" />
                        <p:menuitem value="#{loc.totaltaxprice}"  style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="totaltax"      icon="fa fa-legal" />
                        <p:menuitem value="#{loc.foreignexchangetransactionamount}"    class="Fs14 MarLeft10" id="exchangerate" icon="fa fa-money" />
                        <p:menuitem value="#{loc.grandtotal}" class="Fs14 MarLeft10" id="totalmoney" icon="fa fa-calculator" />
                        <p:menuitem value="#{loc.grandtotalwithwriting}" class="Fs14 MarLeft10" id="grandtotalmoneywrite" icon="fa fa-calculator" />
                        <p:menuitem value="#{loc.cash}"  style="display: #{documentTemplateProcessBean.selectedObject.type.id == 70 or  documentTemplateProcessBean.selectedObject.type.id == 71 ? 'block;' : 'none;' }" class="Fs14 MarLeft10" id="cash" icon="fa fa-calculator" />  
                        <p:menuitem value="#{loc.checkbill}" style="display: #{documentTemplateProcessBean.selectedObject.type.id == 70 or  documentTemplateProcessBean.selectedObject.type.id == 71 ? 'block;' : 'none;' }" class="Fs14 MarLeft10" id="checkbill" icon="fa fa-calculator" />
                        <p:menuitem value="#{loc.totalprice}"  style="display: #{documentTemplateProcessBean.selectedObject.type.id == 62 or  documentTemplateProcessBean.selectedObject.type.id == 63 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="totalpricetax" icon="fa fa-calculator" />

                    </p:submenu>
                    <p:separator />
                    <p:submenu label="#{loc.special}">
                        <p:menuitem value="#{loc.specialnote}" class="Fs14 MarLeft10" id="text" icon="fa fa-font" />
                        <p:menuitem value="#{loc.frame}" class="Fs14 MarLeft10" id="container" icon="fa fa-square-o" />
                        <p:menuitem value="#{loc.logochoose}" class="Fs14 MarLeft10" id="image"  icon="fa fa-image" />
                        <p:menuitem value="#{loc.domesticproduct} #{loc.logochoose}"  style="display: #{documentTemplateProcessBean.selectedObject.type.id == 72 ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="domesticproductsimage"  icon="fa fa-rupee" />
                    </p:submenu>  


                    <p:separator /> 
                    <p:submenu label="#{loc.deliveryinformations}" style="display: #{documentTemplateProcessBean.selectedObject.type.id != 72 ? 'block;' : 'none;'}">
                        <p:menuitem value="#{loc.recipientperson}" style="display: #{documentTemplateProcessBean.selectedObject.type.id == 63  ? 'block;' : 'none;'}" class="Fs14 MarLeft10" id="recipientperson" icon="fa fa-user" />
                        <p:menuitem value="#{loc.deliveryperson}" class="Fs14 MarLeft10" id="deliveryperson" icon="fa fa-user" />
                    </p:submenu>

                    <p:separator />


                    <p:separator />
                    <p:submenu label="#{loc.productinformations}" style="display: #{documentTemplateProcessBean.selectedObject.type.id == 72 ? 'block;' : 'none;'}">
                        <p:menuitem value="#{loc.productname}" class="Fs14 MarLeft10" id="productname" icon="fa fa-file-text-o" />
                        <p:menuitem value="#{loc.saleprice}" class="Fs14 MarLeft10" id="saleprice" icon="fa fa-tag" />
                        <p:menuitem value="#{loc.madein}" class="Fs14 MarLeft10" id="madein" icon="fa fa-building" />
                        <p:menuitem value="#{loc.unitprice}" class="Fs14 MarLeft10" id="lastchangingunitprice" icon="fa fa-tag" />
                        <p:menuitem value="#{loc.pricechangedate}" class="Fs14 MarLeft10" id="lastunitpricechangedate" icon="fa fa-calendar" />
                        <p:menuitem value="#{loc.barcode}" class="Fs14 MarLeft10" id="stockbarcode" icon="fa fa-barcode" />

                    </p:submenu>


                </p:panelMenu>
            </h:form>            


        </div>

        <p:dialog id="dlgTemplateUpload" widgetVar="dlg_TemplateUpload" modal="true" dynamic="true" resizable="false" focus="dlgTemplateUpload"  responsive="true" closeOnEscape="true" width="30%">
            <p:ajax event="close" update="dlgTemplateUpload" listener="#{documentTemplateProcessBean.clearData()}" global="false"/>
            <h:form id="frmTemplateUpload" enctype="multipart/form-data" > 
                <p:panelGrid  id="pgrFileUpload" class="pgrResponsive">
                    <div class="ui-g">
                        <h:panelGroup layout="block">
                            <p:row>
                                <p:column colspan="12" style="font-weight: bold;font-size: 16px"> <h:outputText value="#{loc.fileselectionandtransferoperations}" /></p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="6">
                                    <table style="width: 150px !important;table-layout: fixed;border: none !important;" >
                                        <tbody>
                                            <tr>
                                                <p:fileUpload  allowTypes="/(\.|\/)(txt)$/" invalidFileMessage="#{loc.invalidfiletype}"
                                                               invalidSizeMessage="#{loc.filesizecannotbegreaterthan1mb}"
                                                               update="@this,btnTransfer,txtFileName,btnClose"
                                                               style=" margin-top: 46px !important;position: relative;" auto="true" sizeLimit="10000000" multiple="false" label="#{loc.choosefile}"
                                                               fileUploadListener="#{documentTemplateProcessBean.handleFileUploadFile}"
                                                               mode="advanced" process="@this"/>
                                            </tr>
                                            <tr>
                                                <td style="width: 100px;border:none !important;"><h:outputText id="txtFileName"  styleClass="wrapLabel" value="#{documentTemplateProcessBean.uploadedFile!=null ? documentTemplateProcessBean.fileName : ''}" /> </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </p:column> 
                                <p:column  colspan="6">
                                    <p:commandButton id="btnTransfer" icon="fa fa-exchange" disabled="#{documentTemplateProcessBean.uploadedFile==null}" resetValues="true" value="#{loc.transfer}" update="@this,btnTransfer ,btnClose,txtFileName" actionListener="#{documentTemplateProcessBean.importTemplateFromTxt()}" />
                                    <p:commandButton id="btnClose"  icon="fa fa-close" disabled="#{documentTemplateProcessBean.uploadedFile==null}" resetValues="true" value="#{loc.remove}" update="@this,btnTransfer ,btnClose,txtFileName" actionListener="#{documentTemplateProcessBean.clearData()}" />
                                </p:column>
                            </p:row>
                        </h:panelGroup>
                    </div>
                </p:panelGrid> 
            </h:form>
        </p:dialog>

        <script type="text/javascript">

            function rulers() {
                $('.page').ruler({
                    unit: 'mm',
                    tickMajor: 10,
                    tickMinor: 5,
                    tickMicro: 1,
                    showLabel: true,
                    arrowStyle: 'arrow'
                });
            }

            function toolbarIcons() {
                $("#txtBoldItalic .ui-button-text:eq(0)").addClass("fa fa-bold Fs14");
                $("#txtBoldItalic .ui-button-text:eq(1)").addClass("fa fa-italic Fs14");

                $("#txtAling .ui-button-text:eq(0)").addClass("fa fa-align-left Fs14");
                $("#txtAling .ui-button-text:eq(1)").addClass("fa fa-align-center Fs14");
                $("#txtAling .ui-button-text:eq(2)").addClass("fa fa-align-right Fs14");
            }

            function pnlSelect() {
                var x = 99;
                $('.drgPanel').bind("mousedown", function (e) {
                    $('.drgPanel').css('background-color', 'rgb(207,216,220,0) !important');
                    x = x + 1;
                    e.stopPropagation();
                    if (!$(this).attr('id').includes('container')) {
                        this.style.setProperty('background-color', 'rgb(207,216,220)', 'important');
                        this.style.setProperty('z-index', x, 'important');
                    } else {
                        this.style.setProperty('z-index', 0, 'important');
                    }
                }).bind("click", function (e) {
                    x = x + 1;
                    $('.drgPanel').css('background-color', 'rgb(207,216,220,0) !important');

                    e.stopPropagation();
                    if (!$(this).attr('id').includes('container')) {
                        this.style.setProperty('background-color', 'rgb(207,216,220)', 'important');
                        this.style.setProperty('z-index', x, 'important');
                    } else {
                        this.style.setProperty('z-index', 00, 'important');
                    }
                    var objId = $(this).attr('id');
                    var objFontSize, objTextAlign, objFontWeight, objFontStyle;

                    if (objId == 'itemspnl') {
                        objFontSize = $('#' + objId + ' table').css("font-size");
                        objTextAlign = $('#' + objId + ' table').css("text-align");
                        objFontWeight = $('#' + objId + ' table').css('font-weight');
                        if (objFontWeight == 700) {
                            objFontWeight = 'bold';
                        }
                        objFontStyle = $('#' + objId + ' table').css('font-style');
                    } else {
                        objFontSize = $(this).find(".ui-outputlabel").css("font-size");
                        objTextAlign = $(this).find(".ui-outputlabel").css("text-align");
                        objFontWeight = $('#' + objId + 'lb').css('font-weight');
                        if (objFontWeight == 700) {
                            objFontWeight = 'bold';
                        }
                        objFontStyle = $('#' + objId + 'lb').css('font-style');
                    }

                    selectdocumenttemplate([
                        {name: 'width', value: this.style.getPropertyValue('width')}
                        , {name: 'id', value: $(this).attr('id')}
                        , {name: 'height', value: $(this).height()}
                        , {name: 'top', value: this.style.getPropertyValue('top')}
                        , {name: 'left', value: this.style.getPropertyValue('left')}
                        , {name: 'text', value: $(this).text()}
                        , {name: 'fontsize', value: objFontSize}
                        , {name: 'textalign', value: objTextAlign}
                        , {name: 'fontweight', value: objFontWeight}
                        , {name: 'fontstyle', value: objFontStyle}
                    ]);

                });
                $('#droppable').click(function () {
                    $('.drgPanel').css('background-color', 'rgb(207,216,220,0) !important');
                    unSelect();
                });
            }

            function initDND() {
                $('.ui-menuitem').draggable({
                    appendTo: '#droppable',
                    helper: 'clone',
                    scope: 'documenttemplate',
                    zIndex: 300,
                    containment: '#droppable'
                });

                $('#droppable').droppable({
                    activeClass: 'ui-state-active',
                    hoverClass: 'ui-state-highlight',
                    tolerance: 'pointer',
                    scope: 'documenttemplate',
                    drop: function (event, ui) {
                        var id = ui.draggable.find('.ui-menuitem-link ').attr('id'),
                                top = ui.position.top,
                                left = ui.position.left,
                                text = ui.draggable.find('.ui-menuitem-link ').context.textContent,
                                width = ui.draggable.find('.ui-menuitem-link ').width(),
                                height = ui.draggable.find('.ui-menuitem-link ').height(),
                                fontsize = 16,
                                textalign = 'center';
                        //     console.log(ui.draggable.find('.ui-menuitem-link ').context.textContent);
                        if (id == null) {
                            id = ui.draggable[0].id;
                            height = $("#" + id).height();
                            width = $("#" + id).width();
                            fontsize = $("#" + id).find(".ui-outputlabel").css("font-size");
                            textalign = $("#" + id).find(".ui-outputlabel").css("text-align");
                        }
                        documenttemplate([
                            {name: 'id', value: id}
                            , {name: 'top', value: top}
                            , {name: 'left', value: left}
                            , {name: 'text', value: text}
                            , {name: 'width', value: width}
                            , {name: 'height', value: height}
                            , {name: 'fontsize', value: fontsize}
                            , {name: 'textalign', value: textalign}
                        ]);
                    }
                });
            }

            $(function () {
                initDND();
                pnlSelect();
                toolbarIcons();
            });

            function printData() {
                var contents = document.getElementById("printPanel").innerHTML;
                var frame1 = document.createElement('iframe');
                frame1.name = "frame1";
                frame1.style.position = "absolute";
                frame1.style.top = "-1000000px";
                document.body.appendChild(frame1);
                var frameDoc = (frame1.contentWindow) ? frame1.contentWindow : (frame1.contentDocument.document) ? frame1.contentDocument.document : frame1.contentDocument;
                frameDoc.document.open();
                frameDoc.document.write('<html><head><title>DIV Contents</title>');
                frameDoc.document.write('</head><body>');
                frameDoc.document.write(contents);
                frameDoc.document.write('</body></html>');
                frameDoc.document.close();
                setTimeout(function () {
                    window.frames["frame1"].focus();
                    window.frames["frame1"].print();
                    document.body.removeChild(frame1);
                }, 500);
                return false;
            }
        </script>

    </div>
    <div style="display: none">
        <p:outputPanel id="printPanel"  style="width: 22cm;height: 29cm;">


        </p:outputPanel>  

    </div>

</ui:composition>
