<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:include src="/pages/general/common/datagridtoolbardefinition.xhtml" >
        <ui:param name="bean" value="#{pointOfSaleBean}"/> 
        <ui:param name="update" value="dlgPosProcess"/>
        <ui:param name="btnNewId" value='#{pointOfSaleBean.getRendered(198, 0)}'/>
        <ui:param name="datatable" value="frmPointOfSale:dtbPointOfSale" />
        <ui:param name="widgetvar" value="pointOfSalePF" />
        <ui:param name="form" value='frmToolbarPointOfSale' />
        <ui:param name="fileName" value="#{loc.pos}"/> 
        <ui:param name="renderedToggler" value='true'/>
        <ui:param name="renderedExel" value='true'/>
        <ui:param name="renderedPdf" value='true'/>
    </ui:include>


    <h:form id="frmPointOfSale">

        <p:dataTable  id="dtbPointOfSale" var="pointOfSale"  value="#{pointOfSaleBean.listOfObjects}" widgetVar="pointOfSalePF" filteredValue="#{pointOfSaleBean.listOfFilteredObjects}" selection="#{pointOfSaleBean.selectedObject}"  selectionMode="single" emptyMessage="#{loc.norecordsfound}"
                      rows="#{sessionBean.user.defualtGridSize}" rowKey="#{pointOfSale.id}" paginator="true" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                      rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}" 
                      reflow="true" rowStyleClass="#{pointOfSale.status.id==10 ? 'ColumnColorRed' : null}" >
            <p:ajax event="#{sessionBean.user.gridRowSelect}" listener="#{pointOfSaleBean.update()}" update="dlgPosProcess" global="false" /> 
            <p:ajax event="page" global="false"/>
            <p:ajax event="filter" global="false"/>
            <p:ajax event="colReorder" listener="#{pointOfSaleBean.reorder}" update="frmToolbarPointOfSale:toggle" />     
            <p:ajax event="colResize"  listener="#{pointOfSaleBean.onResize}" /> 

            <f:facet name="footer" rendered="false" >
                <p:inputText id="globalFilter" value="#{pointOfSaleBean.autoCompleteValue}"  style="display: none"  />
            </f:facet>

            <p:column id="clmCode" headerText="#{loc.code}" sortable="true" sortBy="#{pointOfSale.code}" filterable="true"  filterBy="#{pointOfSale.code}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[0]}" exportable="#{pointOfSaleBean.toogleList[0]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.code}" />
            </p:column >
            <p:column id="clmName" headerText="#{loc.name}" sortable="true" sortBy="#{pointOfSale.name}" filterable="true"  filterBy="#{pointOfSale.name}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[1]}" exportable="#{pointOfSaleBean.toogleList[1]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.name}" />
            </p:column >
            <p:column id="clmBrand" headerText="#{loc.brand}" sortable="true" sortBy="#{pointOfSale.brand}" filterable="true"  filterBy="#{pointOfSale.brand}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[2]}" exportable="#{pointOfSaleBean.toogleList[2]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.brand}" />
            </p:column >
            <p:column id="clmSerialNumber" headerText="#{loc.serialno}" sortable="true" sortBy="#{pointOfSale.serialNumber}" filterable="true"  filterBy="#{pointOfSale.serialNumber}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[3]}" exportable="#{pointOfSaleBean.toogleList[3]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.serialNumber}" />
            </p:column >
            <p:column id="clmVersion" headerText="#{loc.version}" sortable="true" sortBy="#{pointOfSale.version}" filterable="true"  filterBy="#{pointOfSale.version}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[4]}" exportable="#{pointOfSaleBean.toogleList[4]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.version}" />
            </p:column >
            <p:column id="clmMacAddress" headerText="#{loc.macaddress}" sortable="true" sortBy="#{pointOfSale.macAddress}" filterable="true"  filterBy="#{pointOfSale.macAddress}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[5]}" exportable="#{pointOfSaleBean.toogleList[5]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.macAddress}" />
            </p:column >
             <p:column id="clmLocalIpAddress" headerText="#{loc.localipaddress}" sortable="true" sortBy="#{pointOfSale.localIpAddress}" filterable="true"  filterBy="#{pointOfSale.localIpAddress}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[6]}" exportable="#{pointOfSaleBean.toogleList[6]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.localIpAddress}" />
            </p:column >
            <p:column id="clmIpAddress" headerText="#{loc.ip} #{loc.address}" sortable="true" sortBy="#{pointOfSale.ipAddress}" filterable="true"  filterBy="#{pointOfSale.ipAddress}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[7]}" exportable="#{pointOfSaleBean.toogleList[7]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.ipAddress}" />
            </p:column >

            <p:column id="clmIntegrationCode" rendered="#{sessionBean.lastBranchSetting.paroUrl.length() gt 0 ? true:false}" headerText="#{loc.integrationcode}" sortable="true"  sortBy="#{pointOfSale.integrationCode}" filterable="true"  filterBy="#{pointOfSale.integrationCode}" filterMatchMode="contains" visible="#{pointOfSaleBean.toogleList[8]}" exportable="#{pointOfSaleBean.toogleList[8]}">
                <f:facet name="filter">
                    <p:outputLabel   rendered="false" />
                </f:facet> 
                <h:outputText value="#{pointOfSale.integrationCode}" />
            </p:column>
        </p:dataTable>  
    </h:form>

    <p:dialog id="dlgPosProcess" widgetVar="dlg_PosProcess" style="max-height: 60%; overflow-y: auto;" resizable="false" transient="true" focus="dlgPosProcess" responsive="true" dynamic="true" modal="true" closeOnEscape="true" width="50%">
        <ui:include src="/pages/general/pointofsale/pointofsaleprocess.xhtml" />
    </p:dialog>

    <p:dialog  id="dlgSafeProcess" widgetVar="dlg_SafeProcess" modal="true" transient="true" width="20%" resizable="false" focus="dlgSafeProcess" dynamic="true"  responsive="true" closeOnEscape="true">
        <c:if test="#{pointOfSaleBean.activeIndex==53 and pointOfSaleBean.processType==2}"> 
            <ui:include src="pointofsalesafeprocess.xhtml"/>
        </c:if>

    </p:dialog>
    
</ui:composition>


