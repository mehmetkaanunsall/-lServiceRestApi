<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:form id="frmMyMenu" >  
        <p:growl id="grwPerson" showDetail="true" globalOnly="true" life="1000"/>
        <ui:include src="/pages/general/common/processtoolbar.xhtml" >
            <ui:param name="outputtext" value="#{loc.add}"/>
            <ui:param name="update" value="frmMyMenu" />
            <ui:param name="btnSaveId" value="true" />               
            <ui:param name="btnDeleteId" value="false" />            
            <ui:param name="renderdelete" value='false' /> 
            <ui:param name="renderback" value='false'/>
            <ui:param name="bean" value="#{profileWidgetTabBean}" />   
        </ui:include>


        <!--   <p:focus for="txtIdentityNo"/>
           <p:focus for="txtIdentityNo1"/> -->


        <h:panelGroup id="pgrNewPerson1" layout="block" >
            <div class="ui-g-12 divContent">              



                <div class="ui-g-12 ui-md-6 ui-lg-4">
                    <p:outputLabel value="#{loc.modules}" for="slcModule" styleClass="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcModule" value="#{profileWidgetTabBean.moduleId}"  styleClass="Wid95" >
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="0" itemDisabled="true" />
                        <f:selectItems value="#{sessionBean.authorizedModules}" var="module" itemLabel="#{module.nameMap.get(sessionBean.langId).name}" itemValue="#{module.id}" />
                        <p:ajax event="change" listener="#{profileWidgetTabBean.updateFolders()}" update="slcFolder,slcPage" />

                    </p:selectOneMenu>
                </div>


                <div class="ui-g-12 ui-md-6 ui-lg-4">
                    <p:outputLabel value="#{loc.folders}" for="slcFolder" styleClass="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcFolder" value="#{profileWidgetTabBean.folderId}"   styleClass="Wid95" >
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="0" />
                        <f:selectItems value="#{profileWidgetTabBean.selectedFolderList}" var="folder" itemLabel="#{folder.nameMap.get(sessionBean.langId).name}" itemValue="#{folder.id}" />
                        <p:ajax listener="#{profileWidgetTabBean.updatePages()}" update="slcPage" />
                    </p:selectOneMenu>
                </div>

                <div class="ui-g-12 ui-md-6 ui-lg-4">
                    <p:outputLabel value="#{loc.pages}" for="slcPage" styleClass="Fs12 FontBold"/>
                    <p:selectOneMenu id="slcPage" value="#{profileWidgetTabBean.pageId}" styleClass="Wid95" >
                        <f:selectItem itemLabel="#{loc.choose}" itemValue="0" />
                        <f:selectItems value="#{profileWidgetTabBean.selectedPageList}" var="page" itemLabel="#{page.nameMap.get(sessionBean.langId).name}" itemValue="#{page.id}" />
                        <p:ajax listener="#{profileWidgetTabBean.updateGrid()}" update="dtbWidget" />
                    </p:selectOneMenu>
                </div>

                <p:dataTable  id="dtbWidget" var="column" widgetVar="opportunityPF"  value="#{profileWidgetTabBean.listOfGridColumns}"  selection="#{profileWidgetTabBean.selectedGridColumns}" 
                              emptyMessage="#{loc.norecordsfound}"
                              rows="#{sessionBean.user.defualtGridSize}" filteredValue="#{profileWidgetTabBean.listOfGridColumns}" rowKey="#{column.id}" paginator="true" 
                              paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                              rowsPerPageTemplate="#{sessionBean.user.gridSize}" paginatorPosition="bottom" currentPageReportTemplate="{startRecord}-{endRecord} #{loc.intotal} {totalRecords}"  reflow="true" >


                    <p:column selectionMode="multiple" style="width:25px;text-align:center" selectRow="false" />
                    <p:column id="clmName" selectRow="false" headerText="#{loc.widgets}"   sortable="true" sortBy="#{column.columnName}" filterable="true"  filterBy="#{column.columnName}" filterMatchMode="contains" >
                        <f:facet name="filter">
                            <p:outputLabel   rendered="false" />
                        </f:facet>
                        <h:outputText value="#{loc[column.columnName]}" />
                    </p:column>

                </p:dataTable>

            </div>

        </h:panelGroup>


    </h:form> 


</ui:composition>

